<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>;
<p>Normally you would define a React component as a plain JavaScript class:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">class</span> Greeting <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="cf">return</span> <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello<span class="op">,</span> <span class="op">{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">name</span><span class="op">}</span>&lt;/h1<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>If you don't use ES6 yet, you may use the <code>create-react-class</code> module instead:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> createReactClass <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;create-react-class&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> Greeting <span class="op">=</span> <span class="at">createReactClass</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">render</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="cf">return</span> <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello<span class="op">,</span> <span class="op">{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">name</span><span class="op">}</span>&lt;/h1<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The API of ES6 classes is similar to <code>createReactClass()</code> with a few exceptions.</p>
<h2 id="declaring-default-props">Declaring Default Props</h2>
<p>With functions and ES6 classes <code>defaultProps</code> is defined as a property on the component itself:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">class</span> Greeting <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="va">Greeting</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Mary&#39;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>With <code>createReactClass()</code>, you need to define <code>getDefaultProps()</code> as a function on the passed object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> Greeting <span class="op">=</span> <span class="at">createReactClass</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">getDefaultProps</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-4" title="4">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Mary&#39;</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="op">};</span></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb4-7" title="7"></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="setting-the-initial-state">Setting the Initial State</h2>
<p>In ES6 classes, you can define the initial state by assigning <code>this.state</code> in the constructor:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">class</span> Counter <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span><span class="dt">count</span><span class="op">:</span> <span class="va">props</span>.<span class="at">initialCount</span><span class="op">};</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>With <code>createReactClass()</code>, you have to provide a separate <code>getInitialState</code> method that returns the initial state:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">var</span> Counter <span class="op">=</span> <span class="at">createReactClass</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">getInitialState</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="cf">return</span> <span class="op">{</span><span class="dt">count</span><span class="op">:</span> <span class="kw">this</span>.<span class="va">props</span>.<span class="at">initialCount</span><span class="op">};</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="autobinding">Autobinding</h2>
<p>In React components declared as ES6 classes, methods follow the same semantics as regular ES6 classes. This means
    that they don't automatically bind <code>this</code> to the instance. You'll have to explicitly use
    <code>.bind(this)</code> in the constructor:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">class</span> SayHello <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span><span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hello!&#39;</span><span class="op">};</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="co">// This line is important!</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="kw">this</span>.<span class="at">handleClick</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">handleClick</span>.<span class="at">bind</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="at">handleClick</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="at">alert</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-12" title="12"></a>
<a class="sourceLine" id="cb7-13" title="13">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb7-14" title="14">    <span class="co">// Because `this.handleClick` is bound, we can use it as an event handler.</span></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb7-16" title="16">      <span class="op">&lt;</span>button onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">handleClick</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb7-17" title="17">        Say hello</a>
<a class="sourceLine" id="cb7-18" title="18">      &lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb7-19" title="19">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb7-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>With <code>createReactClass()</code>, this is not necessary because it binds all methods:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">var</span> SayHello <span class="op">=</span> <span class="at">createReactClass</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">getInitialState</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="cf">return</span> <span class="op">{</span><span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hello!&#39;</span><span class="op">};</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="dt">handleClick</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="at">alert</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="op">},</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="dt">render</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb8-12" title="12">      <span class="op">&lt;</span>button onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">handleClick</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb8-13" title="13">        Say hello</a>
<a class="sourceLine" id="cb8-14" title="14">      &lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-15" title="15">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb8-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>This means writing ES6 classes comes with a little more boilerplate code for event handlers, but the upside is slightly better performance in large applications.</p>
<p>If the boilerplate code is too unattractive to you, you may enable the <strong>experimental</strong> <a href="https://babeljs.io/docs/plugins/transform-class-properties/">Class Properties</a> syntax proposal with Babel:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">class</span> SayHello <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span><span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hello!&#39;</span><span class="op">};</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="co">// </span><span class="al">WARNING</span><span class="co">: this syntax is experimental!</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="co">// Using an arrow here binds the method:</span></a>
<a class="sourceLine" id="cb9-8" title="8">  handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-9" title="9">    <span class="at">alert</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-11" title="11"></a>
<a class="sourceLine" id="cb9-12" title="12">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb9-13" title="13">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb9-14" title="14">      <span class="op">&lt;</span>button onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">handleClick</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb9-15" title="15">        Say hello</a>
<a class="sourceLine" id="cb9-16" title="16">      &lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb9-17" title="17">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="op">}</span></a></code></pre></div>
<p>Please note that the syntax above is <strong>experimental</strong> and the syntax may change, or the proposal might not make it into the language.</p>
<p>If you'd rather play it safe, you have a few options:</p>
<ul>
<li>Bind methods in the constructor.</li>
<li>Use arrow functions, e.g. <code>onClick={(e) =&gt; this.handleClick(e)}</code>.</li>
<li>Keep using <code>createReactClass</code>.</li>
</ul>
<h2 id="mixins">Mixins</h2>
<blockquote>
<p><strong>Note:</strong></p>
<p>ES6 launched without any mixin support. Therefore, there is no support for mixins when you use React with ES6 classes.</p>
<p><strong>We also found numerous issues in codebases using mixins, <a
            href="/blog/2016/07/13/mixins-considered-harmful.html">and don't recommend using them in the new
            code</a>.</strong></p>
<p>This section exists only for the reference.</p>
</blockquote>
<p>Sometimes very different components may share some common functionality. These are sometimes called <a href="https://en.wikipedia.org/wiki/Cross-cutting_concern">cross-cutting concerns</a>. <code>createReactClass</code> lets you use a legacy <code>mixins</code> system for that.</p>
<p>One common use case is a component wanting to update itself on a time interval. It's easy to use
    <code>setInterval()</code>, but it's important to cancel your interval when you don't need it anymore to save
    memory. React provides <a href="/docs/react-component.html#the-component-lifecycle">lifecycle methods</a> that let
    you know when a component is about to be created or destroyed. Let's create a simple mixin that uses these methods
    to provide an easy <code>setInterval()</code> function that will automatically get cleaned up when your component is
    destroyed.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">var</span> SetIntervalMixin <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">componentWillMount</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="kw">this</span>.<span class="at">intervals</span> <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="dt">setInterval</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-6" title="6">    <span class="kw">this</span>.<span class="va">intervals</span>.<span class="at">push</span>(<span class="va">setInterval</span>.<span class="at">apply</span>(<span class="kw">null</span><span class="op">,</span> <span class="kw">arguments</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb10-7" title="7">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-8" title="8">  <span class="dt">componentWillUnmount</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-9" title="9">    <span class="kw">this</span>.<span class="va">intervals</span>.<span class="at">forEach</span>(clearInterval)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb10-12" title="12"></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="kw">var</span> createReactClass <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;create-react-class&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-14" title="14"></a>
<a class="sourceLine" id="cb10-15" title="15"><span class="kw">var</span> TickTock <span class="op">=</span> <span class="at">createReactClass</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb10-16" title="16">  <span class="dt">mixins</span><span class="op">:</span> [SetIntervalMixin]<span class="op">,</span> <span class="co">// Use the mixin</span></a>
<a class="sourceLine" id="cb10-17" title="17">  <span class="dt">getInitialState</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-18" title="18">    <span class="cf">return</span> <span class="op">{</span><span class="dt">seconds</span><span class="op">:</span> <span class="dv">0</span><span class="op">};</span></a>
<a class="sourceLine" id="cb10-19" title="19">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-20" title="20">  <span class="dt">componentDidMount</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-21" title="21">    <span class="kw">this</span>.<span class="at">setInterval</span>(<span class="kw">this</span>.<span class="at">tick</span><span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span> <span class="co">// Call a method on the mixin</span></a>
<a class="sourceLine" id="cb10-22" title="22">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-23" title="23">  <span class="dt">tick</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-24" title="24">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span><span class="dt">seconds</span><span class="op">:</span> <span class="kw">this</span>.<span class="va">state</span>.<span class="at">seconds</span> <span class="op">+</span> <span class="dv">1</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-25" title="25">  <span class="op">},</span></a>
<a class="sourceLine" id="cb10-26" title="26">  <span class="dt">render</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-27" title="27">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb10-28" title="28">      <span class="op">&lt;</span>p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-29" title="29">        React has been running <span class="cf">for</span> <span class="op">{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">seconds</span><span class="op">}</span> <span class="va">seconds</span>.</a>
<a class="sourceLine" id="cb10-30" title="30">      &lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-31" title="31">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb10-32" title="32">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-33" title="33"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-34" title="34"></a>
<a class="sourceLine" id="cb10-35" title="35"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb10-36" title="36">  <span class="op">&lt;</span>TickTock /<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb10-37" title="37">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;example&#39;</span>)</a>
<a class="sourceLine" id="cb10-38" title="38">)<span class="op">;</span></a></code></pre></div>
<p>If a component is using multiple mixins and several mixins define the same lifecycle method (i.e. several mixins want to do some cleanup when the component is destroyed), all of the lifecycle methods are guaranteed to be called. Methods defined on mixins run in the order mixins were listed, followed by a method call on the component.</p>
</body></html>
