<h1 id="week-5-object-oriented-programming" data-ignore="true">WEEK 5<br><em>Object-Oriented Programming</em></h1>
<hr />
<!-- code_chunk_output -->
<p><a href="#npm-learning-objectives"><strong>npm Learning Objectives</strong></a> - <a href="#free-same-day-delivery-package-managers-npm">Free Same-Day Delivery: Package Managers &amp; npm</a> - <a href="#package-management">Package management</a> - <a href="#package-management-for-javascript">Package management for JavaScript</a> - <a href="#getting-started-with-npm">Getting started with npm</a> - <a href="#return-to-sender-understanding-dependency-management-with-npm">Return To Sender: Understanding Dependency Management With npm</a> - <a href="#dependency-management">Dependency management</a> - <a href="#little-boxes-all-the-same">Little boxes, all the same.</a> - <a href="#saying-a-lot-with-three-little-numbers">Saying a lot with three little numbers</a> - <a href="#semantic-versioning-npm">Semantic versioning &amp; npm</a> - <a href="#introduction-to-npm">Introduction to npm</a> - <a href="#phase-1-using-npm-to-manage-npm">Phase 1: Using npm to manage npm</a> - <a href="#phase-2-using-npm-to-manage-a-projects-dependencies">Phase 2: Using npm to manage a project’s dependencies</a> - <a href="#going-further-with-npm">Going Further with npm</a> - <a href="#phase-1-creating-a-project-with-multiple-dependencies">Phase 1: Creating a project with multiple dependencies</a> - <a href="#phase-2-using-the-npm-registry">Phase 2: Using the npm registry</a> - <a href="#npm-and-application-security">npm and Application Security</a> - <a href="#phase-1-setting-up-the-project">Phase 1: Setting up the project</a> - <a href="#phase-2-using-npm-to-audit-and-fix-security-vulnerabilities">Phase 2: Using npm to audit and fix security vulnerabilities</a> - <a href="#project-create-your-own-file-utilities">Project: Create Your Own File Utilities!</a> - <a href="#setting-up-your-project">Setting up your project</a> - <a href="#hash-bang-files">Hash Bang files</a> - <a href="#getting-command-line-arguments-in-your-program">Getting command-line arguments in your program</a> - <a href="#specifying-an-exit-code-from-your-utility">Specifying an exit code from your utility</a> - <a href="#copy">Copy</a> - <a href="#delete">Delete</a> - <a href="#touch">Touch</a> - <a href="#head">Head</a> - <a href="#chalk-it-up-to-ls">Chalk it up to ls</a> - <a href="#word-count">Word count</a></p>
<p><a href="#classes-learning-objectives"><strong>Classes Learning Objectives</strong></a> - <a href="#constructor-function-whats-your-function">Constructor Function, What’s Your Function?</a> - <a href="#defining-a-constructor-function">Defining a constructor function</a> - <a href="#invoking-a-constructor-function">Invoking a constructor function</a> - <a href="#using-the-instanceof-operator-to-check-an-objects-type">Using the <code>instanceof</code> operator to check an object’s type</a> - <a href="#defining-sharable-methods">Defining sharable methods</a> - <a href="#putting-the-class-in-javascript-classes">Putting the Class in JavaScript Classes</a> - <a href="#defining-an-es2015-class">Defining an ES2015 class</a> - <a href="#instantiating-an-instance-of-a-class">Instantiating an instance of a class</a> - <a href="#defining-methods">Defining methods</a> - <a href="#comparing-classes-to-constructor-functions">Comparing classes to constructor functions</a> - <a href="#using-the-instanceof-operator-to-check-an-objects-type-1">Using the <code>instanceof</code> operator to check an object’s type</a> - <a href="#the-dna-of-javascript-inheritance">The DNA of JavaScript Inheritance</a> - <a href="#defining-a-parent-class">Defining a parent class</a> - <a href="#inheriting-from-a-class">Inheriting from a class</a> - <a href="#understanding-how-inheritance-works-in-javascript">Understanding how inheritance works in JavaScript</a> - <a href="#overriding-a-method-in-a-parent-class">Overriding a method in a parent class</a> - <a href="#using-modules-in-nodejs">Using Modules in Node.js</a> - <a href="#introducing-nodejs-modules">Introducing Node.js modules</a> - <a href="#adding-a-local-module-to-a-nodejs-application">Adding a local module to a Node.js application</a> - <a href="#exporting-from-a-module">Exporting from a module</a> - <a href="#importing-from-a-module">Importing from a module</a> - <a href="#using-single-item-modules">Using single item modules</a> - <a href="#understanding-module-loading">Understanding module loading</a> - <a href="#constructor-functions-and-classes-project">Constructor Functions and Classes Project</a></p>
<p><a href="#object-oriented-programming-learning-objectives"><strong>Object-Oriented Programming Learning Objectives</strong></a> - <a href="#object-oriented-programming-explained">Object-Oriented Programming Explained</a> - <a href="#encapsulation-enclose-something-in-or-as-if-in-a-capsule">Encapsulation: enclose (something) in or as if in a capsule</a> - <a href="#inheritance-derived-from-ones-ancestors">Inheritance: derived from one’s ancestors</a> - <a href="#polymorphism-a-cool-sounding-word-to-impress-your-friends">Polymorphism: a cool sounding word to impress your friends</a> - <a href="#the-solid-principles-explained">The SOLID Principles Explained</a> - <a href="#single-responsibility-principle">Single-Responsibility Principle</a> - <a href="#the-liskov-substitution-principle">The Liskov Substitution Principle</a> - <a href="#the-other-principles">The other principles</a> - <a href="#controlling-coupling-with-the-law-of-demeter">Controlling Coupling With The Law Of Demeter</a> - <a href="#coupling">Coupling</a> - <a href="#the-formal-definition">The formal definition</a> - <a href="#practical-advice">Practical advice</a> - <a href="#you-cant-cheat-the-law">You can’t cheat the Law</a> - <a href="#when-to-ignore-the-law-of-demeter">When to ignore the Law of Demeter</a> - <a href="#when-else-should-you-ignore-the-law-of-demeter">When else should you ignore the Law of Demeter?</a> - <a href="#oops-i-forgot-a-thing-project">OOPS! I Forgot A Thing Project</a> - <a href="#interacting-with-your-to-do-list">Interacting with your to-do-list</a> - <a href="#modeling-your-application">Modeling your application</a> - <a href="#stretch-goal">Stretch goal</a></p>
<!-- /code_chunk_output -->
<hr />
<h1 id="week-05-day-1-node-package-manager" data-ignore="true">WEEK-05 DAY-1<br><em>Node Package Manager</em></h1>
<hr />
<h1 id="npm-learning-objectives">npm Learning Objectives</h1>
<p>Below is a complete list of the terminal learning objectives for this lesson. When you complete this lesson, you should be able to perform each of the following objectives. These objectives capture how you may be evaluated on the assessment for this lesson.</p>
<ol type="1">
<li>Explain what “npm” stands for.</li>
<li>Explain the purpose of the <code>package.json</code> file and <code>node_modules</code> directory.</li>
<li>Given multiple choices, identify the difference between npm’s <code>package.json</code> and <code>package-lock.json</code> files.</li>
<li>Use <code>npm --version</code> to check what version is currently installed and use npm to update itself to the latest version.</li>
<li>Use <code>npm init</code> to create a new package and <code>npm install</code> to add a package as a dependency. Then use <code>require</code> to import the module and utilize it in a JavaScript file.</li>
<li>Given a package version number following the MAJOR.MINOR.PATCH semantic versioning spec that may include tilde (~) and caret (^) ranges, identify the range of versions of the package that will be compatible.</li>
<li>Explain the difference between a dependency and a development dependency.</li>
<li>Given an existing GitHub repository, clone the repo and use npm to install it’s dependencies.</li>
<li>Use <code>npm uninstall</code> to remove a dependency.</li>
<li>Use <code>npm update</code> to update an out-of-date dependency.</li>
<li>Given a problem description, use the npm registry to find a reputable package (by popularity and quality stats) that provides functionality to solve that problem.</li>
<li>Given a package with vulnerabilities due to outdated dependency versions, use <code>npm audit</code> to scan and fix any vulnerabilities.</li>
<li><p>Write and run an npm script.ing objectives for this lesson. When you complete this lesson, you should be able to perform each of the following objectives. These objectives capture how you may be evaluated on the assessment for this lesson.</p></li>
<li>Explain what “npm” stands for.</li>
<li>Explain the purpose of the <code>package.json</code> file and <code>node_modules</code> directory.</li>
<li>Given multiple choices, identify the difference between npm’s <code>package.json</code> and <code>package-lock.json</code> files.</li>
<li>Use <code>npm --version</code> to check what version is currently installed and use npm to update itself to the latest version.</li>
<li>Use <code>npm init</code> to create a new package and <code>npm install</code> to add a package as a dependency. Then use <code>require</code> to import the module and utilize it in a JavaScript file.</li>
<li>Given a package version number following the MAJOR.MINOR.PATCH semantic versioning spec that may include tilde (~) and caret (^) ranges, identify the range of versions of the package that will be compatible.</li>
<li>Explain the difference between a dependency and a development dependency.</li>
<li>Given an existing GitHub repository, clone the repo and use npm to install it’s dependencies.</li>
<li>Use <code>npm uninstall</code> to remove a dependency.</li>
<li>Use <code>npm update</code> to update an out-of-date dependency.</li>
<li>Given a problem description, use the npm registry to find a reputable package (by popularity and quality stats) that provides functionality to solve that problem.</li>
<li>Given a package with vulnerabilities due to outdated dependency versions, use <code>npm audit</code> to scan and fix any vulnerabilities.</li>
<li><p>Write and run an npm script.</p></li>
</ol>
<hr />
<h1 id="free-same-day-delivery-package-managers-npm">Free Same-Day Delivery: Package Managers &amp; npm</h1>
<p>So far, you’ve written lots of code yourself. Think of all the other developers out there writing code by themselves as well. Wouldn’t it be great if we could share that code and all work together - without needing one <strong>giant</strong> office space? Lucky for us, we don’t need to share desks: we’ve got the Internet!</p>
<p>Let’s discuss <em>packages</em> and <em>package management</em>, a simple way of sharing working code across time &amp; space.</p>
<p>We’ll cover:</p>
<ul>
<li>defining “packages” in relation to programming;</li>
<li>understanding package management;</li>
<li>and using npm to manage packages in our JavaScript projects;</li>
</ul>
<h2 id="package-management">Package management</h2>
<p>It’s rare that you’d prepare a meal by grinding grain to make flour, or that you’d hatch your own chickens just to get some scrambled eggs! Most industries have learned to bundle the work of others into off-the-shelf goods, like a loaf of bread or a dozen eggs, that everyone can benefit from.</p>
<p>Up to now, you’ve mostly written projects from scratch. This is a little like grinding your own grain: it’s a great learning experience, but you’ll quickly find that you’re writing the same code over and over to accomplish common tasks like authentication, file parsing, or accepting user input. Thankfully, we’ve got a better way: <em>packages</em>.</p>
<p>A <em>package</em> is a collection of files &amp; configuration wrapped up in an easy-to-distribute wrapper. By using packages, we can rely on the work of other developers to help move our own projects along at a rapid pace. Even better, we can create our own packages to share our code with the world!</p>
<p>Applications you write may be dependent on packages to work. We refer to these packages as <em>dependencies</em> of your code. Depending on the size of your project, you may have hundreds or even thousands of dependencies! In addition, a package may have its own dependencies on other packages. We’ll discuss dependency management in an upcoming lesson.</p>
<h3 id="special-delivery">Special delivery!</h3>
<p>The oldest and most basic way of sharing code is good old “copy &amp; paste”. One developer could write a file they’re proud of and share it directly with another person on their team. This is fast and simple, but unsustainable for quite a few reasons:</p>
<ul>
<li>Each time the file changes, the author would need to re-share the file.</li>
<li>The author would need to keep multiple versions of the same file, just in case an old project breaks unexpectedly.</li>
<li>Other developers might want to improve the file, but how? Now there are lots of different files that no one’s keeping track of.</li>
</ul>
<p>You can probably think of other reasons, too. It’s like mailing a gift: you wouldn’t throw your unwrapped gift in a mailbox and hope it ends up in the right place! You package your gift up and add important information the postal service can use to manage it appropriately.</p>
<h3 id="package-managers">Package managers</h3>
<p>Software packages work in a similar way. <em>Package managers</em> are applications that accept your code, bundled up with some important metadata, and provide services like <em>versioning</em>, <em>change-management</em>, and even tracking how many projects are using your code. This would be a ton of work for one person to handle by themselves! Package managers have been used for decades to manage server software, but are relatively new to web development.</p>
<p>When we talk about a package manager, we may be referring to a few different things. Most package managers consist of at least two parts: a <em>command line interface (CLI)</em> and a <em>registry</em>. The CLI is an application you run locally, and lets you download and install/uninstall packages as needed. The registry is a database of package information, tracking which are available at any time.</p>
<p>These parts work together to make your experience smoother. Without a CLI, you’d have to manually download and configure each dependency of your app. Without a registry, you’d have to remember exactly where each package is stored to download it. Yikes!</p>
<p>Package managers may include lots of other functionality, like <em>bundling</em>, <em>build pipelines</em>, and <em>dependency management</em>. At their core, though, the CLI &amp; registry are their primary parts. Without these, they’re likely to fall into the broader category of <em>build tools</em>, which we’ll introduce more about later on.</p>
<h2 id="package-management-for-javascript">Package management for JavaScript</h2>
<p>Like all languages, JavaScript went through a long period of unmanaged sharing. Since early JavaScript was used exclusively for the browser runtime, embedded <code>&lt;script&gt;</code> tags were the preferred way to share code. However, Node.js changed the game! Backend developers working with JavaScript brought common patterns from their own backgrounds, including package management.</p>
<p>Node.js was released in 2009. In early 2010, <em>npm</em> was released and included in Node.js. <em>npm</em>, the “Node Package Manager”, was designed to give Node.js engineers a similar experience to backend development in other languages. It was <a href="https://semver.npmjs.com/">inspired by <code>yinst</code></a>, a package manager used at “Yahoo!”, where npm’s creator had worked previously.</p>
<p>npm took off quickly as the <em>de facto</em> standard for Node.js packages. However, the JavaScript development world was still fragmented! Some frontend developers working in the browser runtime created their own package managers for frontend-oriented packages (<a href="https://bower.io/">Bower</a> was one popular manager still in use today). Ultimately, the confusion of dealing with multiple package managers for the same programming language grew too great, and frontend developers started adding their packages to npm. Today, npm is the most widely-used package manager for all JavaScript packages, regardless of whether they’re backend dependencies, frontend dependencies, or command-line tools.</p>
<blockquote>
<p>An aside on “npm”: If you’re attentive to grammar, seeing the name of this package manager written in all lowercase letters may be infuriating! It’s a <a href="https://css-tricks.com/start-sentence-npm/">hot topic</a> online, too. We’ll stick with formatting used by npm itself, but you may see it capitalized elsewhere. Just remember: we’re all referring to the same tool!</p>
</blockquote>
<h2 id="getting-started-with-npm">Getting started with npm</h2>
<p>Here’s a great thing about npm: since it’s part of Node.js, you don’t have to install it separately. Once you’ve added Node.js to your system, you’ve got npm for free. Nice!</p>
<p>We’ll walk through setting up &amp; using the <code>npm</code> CLI tool soon, but if you’d like to experiment on your own, here are a few basic terminal commands to get you started:</p>
<ul>
<li><p><code>npm</code> will show npm’s help info, including some common commands and how to access more detailed guides.</p></li>
<li><p><code>npm init</code> will set your current project directory up for npm. This requires answering a few questions to generate a <code>package.json</code> file, a critical part of npm’s dependency management functionality.</p></li>
<li><p><code>npm install</code> will download and install a package into your project. You can use the <code>-g</code> (or <code>--global</code>) flag to install a package for use everywhere on your system. To have some fun, run <code>npm install -g cowsay</code>. Once the download’s completed, try running <code>cowsay Hello, world!</code>.</p></li>
</ul>
<h3 id="just-the-basics">Just the basics</h3>
<p>Here’s a (very short) overview of how npm works its magic. Let’s imagine we’re installing a package called <code>pack-overflow</code>:</p>
<ul>
<li>You request the package with <code>npm install pack-overflow</code>.</li>
<li>The <code>npm</code> CLI tool updates your <code>package.json</code> file to include <code>pack-overflow</code> as a dependency and requests the package from the npm registry.</li>
<li><code>npm</code> downloads the package and installs it to the <code>node_modules</code> folder in your current directory (one will be created if it’s not already there). It chooses the most recent version by default.</li>
<li><code>npm</code> creates a <code>package-lock.json</code> file that includes where the installed package is located and exactly which version was used.</li>
<li>You’re all set! You can now <code>require('pack-overflow');</code> in your project.</li>
</ul>
<p>We’ll walk through this process in more detail later in this lesson.</p>
<h2 id="what-weve-learned">What we’ve learned</h2>
<p>Package management is a massive topic that we’re just scratching the surface of. You’ll get lots of practice using packages and npm as we get into more complex projects. For now, after reading this lesson, you should be comfortable with:</p>
<ul>
<li>discussing the role of packages &amp; package managers;</li>
<li>and explaining what npm stands for.</li>
</ul>
<p>Next up, we’ll learn more about what npm does can do for us.</p>
<hr />
<h1 id="return-to-sender-understanding-dependency-management-with-npm">Return To Sender: Understanding Dependency Management With npm</h1>
<p>Now that you’ve seen npm in action, let’s dig into the details. How can we read npm’s file changes ourselves?</p>
<p>We’ll cover: - dependency management; - semantic versioning; - and how npm implements these features;</p>
<h2 id="dependency-management">Dependency management</h2>
<p>To understand dependency management, let’s revisit our kitchen. Making a sandwich depends on us having bread. The type of sandwich depends on a certain type of bread: a hamburger might call for a sesame seed bun, while a falafel wrap uses pita. In each of these cases, we’d consider the bread a <em>dependency</em> of our sandwich.</p>
<p>Of course, the <em>dependency chain</em> goes further than our breadbox. The baker who made our bread has dependencies as well. Baking a gluten-free loaf? They might need almond flour. Specialty breads might require a unique oven or technique. Even though we don’t see this process in our own kitchen, we’re dependent on it too! If the baker can’t make the correct bread, we can’t create the sandwich of our dreams.</p>
<p>Software has a similar problem with dependencies. If my application depends on an authentication library that itself depends on an insecure password encryption package, then my application is now inherently insecure. Oh no!</p>
<p>Keeping all the possible dependencies of an application straight ourselves would be nearly impossible. Package managers to the rescue!</p>
<h3 id="get-the-right-package-every-time">Get the right package every time</h3>
<p>Many package managers, including npm, have the ability to <em>resolve</em> correct dependency versions. This means the manager can compare all the packages used by an application and determine which versions are most compatible. This ability makes dependencies much safer: there’s less worry that an update will break your app if your package manager is warning you of changes.</p>
<p>npm accomplishes this dependency resolution process using both the <code>package.json</code> and <code>package-lock.json</code> files. Let’s take a look at how this works.</p>
<h3 id="ask">Ask…</h3>
<p>The <code>package.json</code> file contains lots of JSON-formatted metadata for your project, including its <code>dependencies</code>. Each dependency is formatted like so:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="st">&quot;package-name&quot;</span><span class="op">:</span> <span class="st">&quot;semantic.version.number&quot;</span></a></code></pre></div>
<p>The package name tells npm which package to search for, and the <em>semantic version number</em> lets the CLI know more about exactly which version of that package to grab. npm compares the version number with all your own dependencies to resolve the correct version.</p>
<p>You should consider your <code>package.json</code>’s dependencies to be a list of requests. Adding a dependency here lets you say “I’d like at least version 1.0 of the ‘vue’ package, please”. It sets the stage for dependency resolution.</p>
<h3 id="and-you-shall-receive">…and you shall receive!</h3>
<p>The actual record of packages being used by an application is in <code>package-lock.json</code>. This file, commonly known as a <em>lockfile</em> in package manager parlance, contains every detail needed to identify the exact version of an npm package that’s being used by an application. The lockfile is the key; without it, you can’t say with any certainty whether a particular version was installed or not.</p>
<p>The lockfile for npm will be updated whenever an update is made to <code>package.json</code> and <code>npm install</code> is run. You can do this manually (for example, when you’d like to try a particular version of a package), or you can run <code>npm update &lt;package-name&gt;</code>. While you’ll frequently make manual changes to your <code>package.json</code>, you should never make manual changes to your <code>package-lock.json</code>! Let npm be responsible for generating the lockfile.</p>
<h2 id="little-boxes-all-the-same.">Little boxes, all the same.</h2>
<p>When the <code>npm</code> CLI utility installs a package, it adds it to the <code>node_modules</code> subdirectory in your project. Each package will be placed in a directory named after itself, and contain the raw code for the package along with any associated <code>package.json</code>s and documentation.</p>
<p>The <code>node_modules</code> folder is special for a couple reasons. For one, it’s a great way to keep dependencies separated for each project. Some package managers keep dependencies in a central location on your computer. While npm can do this when run with the <code>--global</code> flag, it’s not ideal, as it makes it harder to keep different versions of the same dependency. By keeping <code>node_modules</code> for each project separate, you can have as many different versions of each package as you like! Each project has the specific version it needs right on-hand.</p>
<p>This introduces a challenge, though. If you have <strong>every</strong> version of a package, imagine how much space that might take up! Your <code>node_modules</code> folders, especially on larger apps, may grow to a massive size. There are build tools you will encounter that minimize storage space being used by dependencies, but in general it’s good practice to keep <code>node_modules</code> out of git repositories or other version control. After all, future users can use your <code>package.json</code> along with <code>npm install</code> to recreate their own <code>node_modules</code> directory!</p>
<h2 id="saying-a-lot-with-three-little-numbers">Saying a lot with three little numbers</h2>
<p>Let’s talk about that <code>semantic.versioning.number</code> above. <em>Semantic versioning</em> (often abbreviated to <em>semver</em>) is a way of tracking version numbers that lets other developers know what to expect from each release of your package.</p>
<p>Semantic version numbers are made up of three parts, each numbered sequentially and with no limit on how large they can be. The leftmost digit in semver is most significant, meaning that <code>1.0.0</code> is “larger” than <code>0.8.99</code>, though both are valid.</p>
<p>Here’s a high-level overview:</p>
<figure>
<img src="https://assets.aaonline.io/Module-JavaScript/npm/assets/image-npm-semver.svg" alt="Version number with major, minor, and patch numbers labeled" /><figcaption>Version number with major, minor, and patch numbers labeled</figcaption>
</figure>
<ul>
<li><p><em>Major</em> changes should be considered <em>breaking</em>. They will be incompatible with other major versions of the same package and may require significant changes in any app that depends on them. Creating a sequel to a hit video game would be a major change.</p></li>
<li><p><em>Minor</em> changes generally represent new features. These shouldn’t totally break anything, but might require a little tweak to keep dependent apps up-to-date. Adding a new level to a video game would be a minor change.</p></li>
<li><p><em>Patch</em>-level changes are for fixing bugs or small issues. These shouldn’t break any other functionality or force dependent apps to make any changes themselves. Fixing a typo in a video game’s instructions would be a patch-level change.</p></li>
</ul>
<p>Notice that each of these versions is most-concerned with compatibility. This is semver’s greatest strength! With it, we can compare two versions of a package and know immediately whether they are compatible or not, even if we don’t know much about how the code changed between those two versions.</p>
<h3 id="creating-version-ranges">Creating version ranges</h3>
<p>Of course, part of the reason we’re using a package manager is that we may not know exactly which version we need. Don’t worry, though - semver &amp; npm have you covered! When adding a new dependency to your <code>package.json</code> file, you can designate a <em>range</em> by adding some special characters to your version number:</p>
<ul>
<li><code>*</code> indicates “whatever the latest version is”.</li>
<li><code>&gt;1.0.0</code> indicates “any version above major version 1”.</li>
<li><code>^1.0.0</code> indicates “any version in the 1.x.x range”.</li>
<li><code>~1.0.0</code> indicates “any patch version in the 1.0.x range”.</li>
<li><code>1.0.0</code> indicates “exactly version 1.0.0”.</li>
</ul>
<p>You may also omit consecutive trailing zeroes, so <code>^1.0.0</code> is the same as <code>^1.0</code> or just <code>^1</code>. <code>~1.0.2</code> (“any patch version greater than 1.0.2”) would need to written out in its entirely, though. You should consider the numbers in your semver to be a minimum value, so <code>~2.1.3</code> would include <code>2.1.4</code>, but not <code>2.1.2</code>.</p>
<p>npm’s website includes a fantastic <a href="https://semver.npmjs.com/">semver calculator</a> you can use to practice as you’re learning this new syntax. Check it out!</p>
<h2 id="semantic-versioning-npm">Semantic versioning &amp; npm</h2>
<p>Semantic versioning is npm’s secret weapon for dependency management. Using the rules of semver, npm is able to determine whether a package will be compatible with your application or not based on minimum-acceptable versions you set.</p>
<p>You might determine your minimums by trial and error, or you might just start building against the latest version and work hard to keep your code up to date as dependencies change. No matter how you do it, npm will make sure the packages you install fit within the version range you’ve set in your <code>package.json</code>.</p>
<blockquote>
<p>Beware! While npm helps manage your dependencies, it won’t automatically keep them up to date! Out-of-date dependencies may introduce serious security risks and require a substantial amount of work to fix. At the very least, you should ensure that any apps you maintain stay up-to-date with the latest patch versions of their dependencies. We’ll look at some cool tools npm provides to assist with this during lecture.</p>
</blockquote>
<h2 id="what-weve-learned-1">What we’ve learned</h2>
<p>Dependency management can be a lot of work! We’re lucky to have package managers to help sort things out for us.</p>
<p>After reading this lesson, you should feel confident:</p>
<ul>
<li>defining “dependency management” and explaining why we need it;</li>
<li>explaining npm’s <code>package.json</code> and <code>package-lock.json</code> files;</li>
<li>and evaluating semantic versions to find acceptable ranges.</li>
</ul>
<hr />
<h1 id="introduction-to-npm">Introduction to npm</h1>
<p>Now that you’ve learned about npm, it’s time to apply your knowledge!</p>
<p>In this project, you’ll:</p>
<ul>
<li>verify the version of npm you have installed;</li>
<li>use npm to update itself to the latest version;</li>
<li>initialize a project to use npm;</li>
<li>use npm to install a dependency;</li>
<li>and use a dependency in code.</li>
</ul>
<h2 id="phase-1-using-npm-to-manage-npm">Phase 1: Using npm to manage npm</h2>
<p>Before you create your project, let’s verify what version of npm you have installed. Visit <a href="https://www.npmjs.com/package/npm">the <code>npm</code> package page</a> in the npm registry to check what the current version is. If you don’t have the current version installed, use npm to update itself to the latest version.</p>
<h2 id="phase-2-using-npm-to-manage-a-projects-dependencies">Phase 2: Using npm to manage a project’s dependencies</h2>
<p>Now let’s use npm to initialize your project and install a dependency. After installing the dependency, you’ll use it in code.</p>
<h3 id="phase-2a-initializing-a-new-package">Phase 2A: Initializing a new package</h3>
<p>Create a folder for your project, open a terminal window (if you haven’t already), and browse to your project folder. Use npm to initialize your project to use npm. Ensure that you have a <code>package.json</code> file in the root of your project before continuing to the next step.</p>
<h3 id="phase-2b-installing-a-dependency">Phase 2B: Installing a dependency</h3>
<p>Use npm to install the <code>moment</code> npm package. Per <code>moment</code>’s page in the npm registry, it’s a “lightweight JavaScript date library for parsing, validating, manipulating, and formatting dates”.</p>
<h3 id="phase-2c-using-a-dependency">Phase 2C: Using a dependency</h3>
<p>Add a file named <code>index.js</code> to your project and use the <code>require</code> function to import the <code>moment</code> module. Then add the following code to the <code>index.js</code> file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="at">moment</span>().<span class="at">format</span>(<span class="st">&#39;MMMM Do YYYY, h:mm:ss a&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="at">moment</span>().<span class="at">format</span>(<span class="st">&#39;dddd&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="va">console</span>.<span class="at">log</span>(<span class="at">moment</span>().<span class="at">format</span>(<span class="st">&quot;MMM Do YY&quot;</span>))<span class="op">;</span></a></code></pre></div>
<p>Now you’re ready to test your application using Node.js by running the following command:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">node</span> index.js</a></code></pre></div>
<p>You should see in the terminal today’s date/time formatted three different ways. Congrats!</p>
<h2 id="what-weve-learned-2">What we’ve learned</h2>
<p>In this project, you</p>
<ul>
<li>verified the version of npm you have installed;</li>
<li>used npm to update itself to the latest version;</li>
<li>initialized a project to use npm;</li>
<li>used npm to install a dependency;</li>
<li>and used a dependency in code.</li>
</ul>
<hr />
<h1 id="going-further-with-npm">Going Further with npm</h1>
<p>It’s time to stretch a bit and dig a little further into npm’s capabilities.</p>
<p>In this project, you’ll:</p>
<ul>
<li>initialize a project to use npm;</li>
<li>use npm to install multiple dependencies;</li>
<li>use one of your project’s dependencies in code;</li>
<li>write an npm script;</li>
<li>initialize and configure Git for your project;</li>
<li>and use the npm registry to find a package.</li>
</ul>
<h2 id="phase-1-creating-a-project-with-multiple-dependencies">Phase 1: Creating a project with multiple dependencies</h2>
<p>Let’s create a project!</p>
<h3 id="phase-1a-setting-up-the-project">Phase 1A: Setting up the project</h3>
<p>Create a folder for your project, open a terminal window (if you haven’t already), and browse to your project folder. Use npm to initialize your project to use npm.</p>
<p>Then use npm to:</p>
<ul>
<li>install the <code>faker</code> package as a dependency;</li>
<li>and install the <code>nodemon</code> package as a <strong>development dependency</strong>.</li>
</ul>
<h3 id="phase-1b-writing-the-code">Phase 1B: Writing the code</h3>
<p>Add an <code>index.js</code> file to the root of your project. Update the <code>index.js</code> file to use the <code>faker</code> package to print 10 random names to the console. Use Node.js (i.e. <code>node index.js</code>) to run your application and check if your code is working as expected.</p>
<h3 id="phase-1c-adding-an-npm-script">Phase 1C: Adding an npm script</h3>
<p>In the <code>package.json</code> file, add an npm script named <code>watch</code> that uses the <code>nodemon</code> package to restart the application whenever changes are made to any of the project files. After adding the script, be sure to use npm to test that it functions as expected.</p>
<h3 id="phase-1d-initialize-and-configure-git">Phase 1D: Initialize and configure Git</h3>
<p>Now it’s time to initialize your project as a Git repository. After you’ve initialized Git, you’ll need to add the <code>node_modules</code> folder to a <code>.gitignore</code> file to prevent that folder from being committed to your repository. Remember that you only need to commit the <code>package.json</code> and <code>package-lock.json</code> files to your repository as that’s all that npm needs to download and install your project’s dependencies.</p>
<p>Once you’re confident that you’ve got Git configured properly, go ahead and commit your project’s files to your repository.</p>
<h2 id="phase-2-using-the-npm-registry">Phase 2: Using the npm registry</h2>
<p>For this part of the project, use the <a href="https://www.npmjs.com/">npm registry</a> to find a reputable package (by popularity and quality stats) to pluralize a given word. When comparing packages, remember to ask yourself the following questions:</p>
<ul>
<li>Does the package do what I need?</li>
<li>How popular is the package?</li>
<li>Is the package being maintained?</li>
</ul>
<p>Once you’ve found a package that you like, go ahead and add it as a dependency to your project. Optionally, you can experiment with adding code to your project that uses your new package.</p>
<h2 id="what-weve-learned-3">What we’ve learned</h2>
<p>In this project, you</p>
<ul>
<li>initialized a project to use npm;</li>
<li>used npm to install multiple dependencies;</li>
<li>used one of your project’s dependencies in code;</li>
<li>wrote an npm script;</li>
<li>initialized and configured Git for your project;</li>
<li>and used the npm registry to find a package.</li>
</ul>
<hr />
<h1 id="npm-and-application-security">npm and Application Security</h1>
<p>Sooner or later, you’ll encounter a project that has a dependency with a security vulnerability. To prepare you for that, let’s practice auditing and updating a package with security vulnerabilities.</p>
<p>In this project, you’ll:</p>
<ul>
<li>clone an existing project from a GitHub repository;</li>
<li>use npm to install the project’s dependencies;</li>
<li>and use npm to audit and fix security vulnerabilities.</li>
</ul>
<h2 id="phase-1-setting-up-the-project">Phase 1: Setting up the project</h2>
<p>To get started with this project, clone the following GitHub repository:</p>
<p><a href="https://github.com/appacademy-starters/javascript-npm-and-application-security">https://github.com/appacademy-starters/javascript-npm-and-application-security</a></p>
<p>Then use npm to install the project’s dependencies.</p>
<h2 id="phase-2-using-npm-to-audit-and-fix-security-vulnerabilities">Phase 2: Using npm to audit and fix security vulnerabilities</h2>
<p>When installing the project’s dependencies, you might have noticed that npm found security vulnerabilities. Use npm to view more information about those security vulnerabilities and to update the offending package.</p>
<p>To confirm that you’ve resolved security vulnerabilities, use npm to audit your project’s dependencies again.</p>
<h2 id="what-weve-learned-4">What we’ve learned</h2>
<p>In this project, you</p>
<ul>
<li>cloned an existing project from a GitHub repository;</li>
<li>used npm to install the project’s dependencies;</li>
<li>and used npm to audit and fix security vulnerabilities.</li>
</ul>
<hr />
<h1 id="project-create-your-own-file-utilities">Project: Create Your Own File Utilities!</h1>
<p>It’s kind of a rite of passage that developers get the chance to write their own versions of command line utilities. You’re going to get to do that, now, using Node.js!</p>
<p>This project is meant to give you an opportunity to learn how to use the <code>require</code> keyword to load CommonJS modules. Then, you get to practice reading the Node.js documentation to get a better understanding of the built-in libraries and how to use them. Finally, you’ll bring in some third-party packages to really get the party started!</p>
<h2 id="setting-up-your-project">Setting up your project</h2>
<p>Create a directory named <code>my-file-utilities</code> in which you will create your utility files. In that directory, initialize an <code>npm</code> package.</p>
<h2 id="hash-bang-files">Hash Bang files</h2>
<p>All of the utilities that you create, today, are going to be in so-called “hash bang” files. That’s because the first line of them start with the sequence “#!”. In old Unix, “#” is known as “hash” and “!” is known as “bang”. (Also, "*" is known as “splat” :-)</p>
<p>Once you have a file opened in Visual Studio Code, the first line that you write in it will be this:</p>
<pre><code>#!/usr/bin/env node</code></pre>
<p>The “hash-bang” instructs the shell (Bash or Zsh) to run the file with the command that follows it. In this case, <code>/usr/bin/env node</code> tells the shell to find the executable “node” in the user’s environment.</p>
<p>The final step is to make the file executable. To do that, you may recall that you use the “change mode” command (<code>chmod</code>). If your file is named <strong>cp.js</strong>, then to make it executable, you would type the following in your shell.</p>
<pre><code>chmod +x cp.js</code></pre>
<p>Then, to run that file, you will type <code>./cp.js</code>.</p>
<h2 id="getting-command-line-arguments-in-your-program">Getting command-line arguments in your program</h2>
<p>The first stop you need to make is to learn about the <code>process.argv</code> array that every running Node.js process has. (<a href="https://nodejs.org/api/process.html#process_process_argv">process.argv documentation</a>) That array will allow you to access any arguments that someone types on the command line.</p>
<p>For example, when writing your first utility, the copy utility, you will need to have two arguments: the file someone wants copied and the file that they want it copied to. When you run your utility (assuming you did the hash-bang thing above), you could run it like this:</p>
<pre><code>./cp.js original.txt copy.txt</code></pre>
<p>The <code>process.argv</code> array will contain the following:</p>
<pre><code>[
  &#39;/path/to/your/node&#39;,
  &#39;/path/to/your/cp.js&#39;,
  &#39;original.txt&#39;,
  &#39;copy.txt&#39;
]</code></pre>
<p>You will access the third and fourth arguments in that array, for example, to know the files that the user has specified.</p>
<h2 id="specifying-an-exit-code-from-your-utility">Specifying an exit code from your utility</h2>
<p>When a program finishes without an error, it returns an “exit code” to the shell of 0. That way, the shell knows everything went ok.</p>
<p>When a program finishes due to an error, it returns a non-zero “exit code” to the shell. That way, the shell knows something went awry.</p>
<p>Check out <a href="https://nodejs.org/api/process.html#process_process_exit_code">the documentation for <em>process.exit</em></a> to find out how you can return a non-zero “exit code” from your programs.</p>
<h2 id="copy">Copy</h2>
<p>Create your own file copying utility. Use the built-in <a href="https://nodejs.org/api/fs.html">File System</a> library. Don’t use any of the methods in the library that end with <code>Sync</code>. Those are <em>not</em> in the spirit of JavaScript.</p>
<p>For your copy utility:</p>
<ul>
<li>It should be run with the form <code>./cp.js source-file-path target-file-path</code></li>
<li>If the user does not provide exactly two arguments, write a “using” message which shows the user how to properly use your copy utility.</li>
<li>If the <code>source-file-path</code> does not exist, write an error message that describes the problem and exit with a status code of 9.</li>
<li>If the <code>source-file-path</code> is a directory, write an error message that describes the problem and exit with a status code of 10.</li>
<li>If an error occurs during the copy, throw the error provided to the callback.</li>
<li>If everything succeeds, don’t print anything.</li>
</ul>
<h2 id="delete">Delete</h2>
<p>Create your own file removal utility. Use the built-in <a href="https://nodejs.org/api/fs.html">File System</a> library. You’ll notice that there’s no method named “remove” or “delete”. Look through the options. There’s a method in there that you can use to accomplish this.</p>
<p>Don’t use any of the methods in the library that end with <code>Sync</code>. Those are <em>not</em> in the spirit of JavaScript.</p>
<p>For your delete utility:</p>
<ul>
<li>It should be run with the form <code>./rm.js file-paths</code> where the user can specify one or more files to remove from the file system. For example, they could type <code>./rm.js original.txt</code> to remove one file or <code>./rm.js 1.txt 2.txt 3.txt</code> to remove three files.</li>
<li>If the user does provides no arguments, write a “using” message which shows the user how to properly use your copy utility.</li>
<li>If an error occurs during the removal of any file, throw the error provided to the callback.</li>
<li>If everything succeeds, don’t print anything.</li>
</ul>
<h2 id="touch">Touch</h2>
<p>Create your own “touch” utility. Touch takes one parameter, a file path. If the file at the path does not exist, it will create an empty file at that path. If the file does exist, it updates the last modified time to “now”.</p>
<p>Don’t use any of the methods in the library that end with <code>Sync</code>. Those are <em>not</em> in the spirit of JavaScript.</p>
<p>For your touch utility:</p>
<ul>
<li>It should be run with the form <code>./touch.js file-path</code>.</li>
<li>If the user does not provide exactly one argument, write a “using” message which shows the user how to properly use your copy utility.</li>
<li>If the <code>file-path</code> points to a directory, write an error message and exit with a status code of 2.</li>
<li>If everything succeeds, don’t print anything.</li>
</ul>
<h2 id="head">Head</h2>
<p>Create your own “head” utility. Head takes one parameter, a file path. It then displays tp to the first 10 lines of the file.</p>
<p>Don’t use any of the methods in the library that end with <code>Sync</code>. Those are <em>not</em> in the spirit of JavaScript.</p>
<p>For your head utility:</p>
<ul>
<li>It should be run with the form <code>./head.js file-path</code>.</li>
<li>If the user does not provide exactly one argument, write a “using” message which shows the user how to properly use your copy utility.</li>
<li>If the <code>file-path</code> does not point to a file, write an error message and exit with a status code of 17.</li>
<li>If everything succeeds, it will print up to the first ten lines of the file.</li>
</ul>
<h2 id="chalk-it-up-to-ls">Chalk it up to ls</h2>
<p>Have a look at <a href="https://github.com/chalk/chalk">Chalk</a>, a commonly-used library to make colorful output in Node.js console applications. Install Chalk to your project directory.</p>
<p>Create your own “ls” utility using Chalk. Color files based on their extension. You choose the colors. For example, maybe you decide that all JavaScript files should show up as purple in the terminal. Then, when you type <code>./ls.js</code> for a directory, all of the files that are JavaScript files will appear in purple.</p>
<p>For your ls utility:</p>
<ul>
<li>It should be run with the form <code>./ls.js path</code>.</li>
<li>If the path does not exist, write an error message describing the error and exit with status code 2.</li>
<li>If the path is a file, write out the colorized name of the file.</li>
<li>If the path is a directory, write out the colorized names of all the files in the directory.</li>
</ul>
<h2 id="word-count">Word count</h2>
<p>Create your own “wc” utility. Wc takes a file path and prints out the number of characters, words, and lines in the file.</p>
<p>For your wc utility:</p>
<ul>
<li>It should be run with the form <code>./wc.js path</code>.</li>
<li>If the path does not exist, write an error message describing the error and exit with status code 2.</li>
<li>If the path is a directory, write an error message describing that it can’t count the number of words in a directory. Be a little snarky about it. Exit with status code 14.</li>
<li><p>If the path is a file, count the number of characters, the number of words (as separated by spaces, tabs, and new lines), and lines. Output the findings in the following format:</p>
<p>number of lines«tab»number of words«tab»number of characters</p></li>
</ul>
<p>Start out by reading the entire file into memory. Once you get that working, try to come up with a way to do the same thing but without reading the entire file into memory. You’ll want to read about how <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable Streams</a> work in Node.js. Then, maybe, you can use something like the <a href="https://www.npmjs.com/package/line-reader">line-reader package</a> to read the file line-by-line while you keep track of all of its stats.</p>
<hr />
<h1 id="week-05-day-2-classes-and-objects" data-ignore="true">WEEK-05 DAY-2<br><em>Classes and Objects</em></h1>
<hr />
<h1 id="classes-learning-objectives">Classes Learning Objectives</h1>
<p>Below is a complete list of the terminal learning objectives for this lesson. When you complete this lesson, you should be able to perform each of the following objectives. These objectives capture how you may be evaluated on the assessment for this lesson.</p>
<ol type="1">
<li>Define a constructor function using ES5 syntax.</li>
<li>Define a method on the prototype of a constructor function.</li>
<li>Declare a class using ES6 syntax.</li>
<li>Define an instance method on a class (ES6).</li>
<li>Define a static method on a class (ES6).</li>
<li>Instantiate an instance of a class using the <code>new</code> keyword.</li>
<li>Implement inheritance using the ES6 <code>extends</code> syntax for an ES6 class.</li>
<li>Utilize the <code>super</code> keyword in a child class to inherit from a parent class.</li>
<li><p>Utilize <code>module.exports</code> and <code>require</code> to import and export functions and class from one file to another.earning objectives for this lesson. When you complete this lesson, you should be able to perform each of the following objectives. These objectives capture how you may be evaluated on the assessment for this lesson.</p></li>
<li>Define a constructor function using ES5 syntax.</li>
<li>Define a method on the prototype of a constructor function.</li>
<li>Declare a class using ES6 syntax.</li>
<li>Define an instance method on a class (ES6).</li>
<li>Define a static method on a class (ES6).</li>
<li>Instantiate an instance of a class using the <code>new</code> keyword.</li>
<li>Implement inheritance using the ES6 <code>extends</code> syntax for an ES6 class.</li>
<li>Utilize the <code>super</code> keyword in a child class to inherit from a parent class.</li>
<li><p>Utilize <code>module.exports</code> and <code>require</code> to import and export functions and class from one file to another.</p></li>
</ol>
<hr />
<h1 id="constructor-function-whats-your-function">Constructor Function, What’s Your Function?</h1>
<p>Up until now, you’ve used object initializer or “literal notation” to create POJOs (plain old JavaScript objects). While this approach to creating objects is convenient (and not to mention easy), it’s not an ideal way to define the attributes and behaviors for an object type nor is it an efficient way to create many objects of that type.</p>
<p>In ES2015, JavaScript gained the <code>class</code> keyword, giving developers a formal way to create a class definition to specify an object type’s attributes and behavior. The class definition is also used to create objects of that specific type.</p>
<p>In this article, you’ll learn how constructor functions and prototypes were used, prior to the introduction of the ES2015 <code>class</code> keyword, to mimic or imitate classes. Understanding constructor functions and prototypes will not only prepare you for working with legacy code, it’ll prepare you to understand how ES2015’s classes are really just a syntactic layer of sugar over these language features.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Define a constructor function for an object type that initializes one or more properties;</li>
<li>Invoke a constructor function using the <code>new</code> keyword;</li>
<li>Use the <code>instanceof</code> operator to check if an object is an instance of a specific object type; and</li>
<li>Define sharable methods on the <code>prototype</code> property of a constructor function.</li>
</ul>
<h2 id="defining-a-constructor-function">Defining a constructor function</h2>
<p>To review, an object created using object initializer or literal notation syntax looks like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="dt">series</span><span class="op">:</span> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="dt">author</span><span class="op">:</span> <span class="st">&#39;J.R.R. Tolkien&#39;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="op">};</span></a></code></pre></div>
<p>While it’s not explicitly stated, the above object literal represents a “Book” object type. An object type is defined by its attributes and behaviors. This particular “Book” object type has “title”, “series”, and “author” attributes which are represented by the object literal’s <code>title</code>, <code>series</code>, and <code>author</code> properties.</p>
<blockquote>
<p>Behaviors are represented by methods, but this particular object literal doesn’t define any methods. We’ll see an example of an object type behavior later in this article.</p>
</blockquote>
<p>A constructor function in JavaScript handles the creation of an object—it’s a “factory” for creating objects of a specific type. Calling a constructor function returns an object with its properties initialized to the provided argument values along with any available methods for operating on the object’s data.</p>
<p>Here’s an example of a constructor function for the “Book” object type:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>This <code>Book</code> constructor function is responsible for creating “Book” objects. If your application had four unique object types, then you’d typically declare four constructor functions—one constructor function for each unique object type.</p>
<p>While the <code>Book</code> constructor function uses JavaScript’s standard syntax for function declarations, there are a few things specific to constructor functions worth highlighting:</p>
<ul>
<li><strong>The name of the constructor function is capitalized.</strong> Following this convention will help you (and other developers) to correctly identify this function as a constructor function.</li>
<li><strong>The function doesn’t explicitly return a value.</strong> When invoked with the <code>new</code> keyword, constructor functions implicitly return the newly created object. In just a bit, you’ll see an example of this.</li>
<li><strong>Within the constructor function’s body, the <code>this</code> keyword references the newly created object.</strong> This allows you to initialize properties on the object.</li>
</ul>
<h2 id="invoking-a-constructor-function">Invoking a constructor function</h2>
<p>Constructor functions are designed to be invoked with the <code>new</code> keyword:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb10-6" title="6"></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb10-8" title="8">  <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-9" title="9">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing)<span class="op">;</span> <span class="co">// Book { title: &#39;The Fellowship of the Ring&#39;, ... }</span></a></code></pre></div>
<p>Four things occur when invoking a constructor function with the <code>new</code> keyword:</p>
<ol type="1">
<li>A new empty object is created (i.e. <code>{}</code>);</li>
<li>The new object’s prototype is set to the object referenced by the constructor function’s <code>prototype</code> property (more about this in just a bit);</li>
<li>The constructor function is called and <code>this</code> is bound to the new object; and</li>
<li>The new object is returned after the constructor function has completed.</li>
</ol>
<blockquote>
<p><strong>Important:</strong> If you return something from a constructor function then you’ll break the behavior described in item #4 as the return value will be whatever you’re explicitly returning instead of the new object.</p>
</blockquote>
<h3 id="understanding-object-type-instances">Understanding object type instances</h3>
<p>Remember that a constructor function handles the creation of an object—it’s a “factory” for creating objects of a specific type. An object created from a constructor function is said to be an <strong>instance</strong> of the object type defined by the constructor function.</p>
<p>In the below example, the <code>Book</code> constructor function defines a <code>Book</code> object type. Calling the <code>Book</code> constructor function with the <code>new</code> keyword creates an instance of the <code>Book</code> object type:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="co">// This constructor function defines</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co">// a `Book` object type.</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb11-8" title="8"></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">// Use the `new` keyword to create</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">// three instances of the `Book` object type.</span></a>
<a class="sourceLine" id="cb11-11" title="11"></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb11-13" title="13">  <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-14" title="14">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-15" title="15">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-16" title="16"></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="kw">const</span> twoTowers <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb11-18" title="18">  <span class="st">&#39;The Two Towers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-19" title="19">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-20" title="20">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-21" title="21"></a>
<a class="sourceLine" id="cb11-22" title="22"><span class="kw">const</span> returnOfTheKing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb11-23" title="23">  <span class="st">&#39;The Return of the King&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-24" title="24">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-25" title="25">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-26" title="26"></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="co">// Logging each instance to the console</span></a>
<a class="sourceLine" id="cb11-28" title="28"><span class="co">// shows that each is a `Book` object type.</span></a>
<a class="sourceLine" id="cb11-29" title="29"></a>
<a class="sourceLine" id="cb11-30" title="30"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing)<span class="op">;</span> <span class="co">// Book { title: &#39;The Fellowship of the Ring&#39;, ... }</span></a>
<a class="sourceLine" id="cb11-31" title="31"><span class="va">console</span>.<span class="at">log</span>(twoTowers)<span class="op">;</span> <span class="co">// Book { title: &#39;The Two Towers&#39;, ... }</span></a>
<a class="sourceLine" id="cb11-32" title="32"><span class="va">console</span>.<span class="at">log</span>(returnOfTheKing)<span class="op">;</span> <span class="co">// Book { title: &#39;The Return of the King&#39;, ... }</span></a>
<a class="sourceLine" id="cb11-33" title="33"></a>
<a class="sourceLine" id="cb11-34" title="34"><span class="co">// Comparing each instance to the others</span></a>
<a class="sourceLine" id="cb11-35" title="35"><span class="co">// shows that each instance is a unique object</span></a>
<a class="sourceLine" id="cb11-36" title="36"><span class="co">// and not equal to the others even though they</span></a>
<a class="sourceLine" id="cb11-37" title="37"><span class="co">// are all `Book` object types.</span></a>
<a class="sourceLine" id="cb11-38" title="38"></a>
<a class="sourceLine" id="cb11-39" title="39"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing <span class="op">===</span> twoTowers)<span class="op">;</span> <span class="co">// false</span></a>
<a class="sourceLine" id="cb11-40" title="40"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing <span class="op">===</span> returnOfTheKing)<span class="op">;</span> <span class="co">// false</span></a>
<a class="sourceLine" id="cb11-41" title="41"><span class="va">console</span>.<span class="at">log</span>(twoTowers <span class="op">===</span> returnOfTheKing)<span class="op">;</span> <span class="co">// false</span></a></code></pre></div>
<p>In this example, the <code>new</code> keyword is used to create three instances of the <code>Book</code> object type, which are referenced by the <code>fellowshipOfTheRing</code>, <code>twoTowers</code>, and <code>returnOfTheKing</code> variables. While each instance is a <code>Book</code> object type, they are also unique objects and therefore not equal to each other.</p>
<h2 id="using-the-instanceof-operator-to-check-an-objects-type">Using the <code>instanceof</code> operator to check an object’s type</h2>
<p>Sometimes it’s helpful to know if an object is an instance of a specific type. JavaScript makes this easy to do using the <code>instanceof</code> operator:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb12-8" title="8"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-9" title="9"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-10" title="10"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-11" title="11"></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">// Use the `instanceof` operator to check if the</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">// `fellowshipOfTheRing` object is an instance of `Book`.</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing <span class="kw">instanceof</span> Book)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>The <code>instanceof</code> operator allows us to confirm that calling the <code>Book</code> constructor with the <code>new</code> keyword creates an instance of the <code>Book</code> object type.</p>
<h3 id="invoking-a-constructor-function-without-the-new-keyword">Invoking a constructor function without the <code>new</code> keyword</h3>
<p>We can use the <code>instanceof</code> operator to prevent our constructor functions from being misused.</p>
<p>Invoking a constructor function without the <code>new</code> keyword results in one of two unexpected outcomes:</p>
<ul>
<li>When running in non-strict mode, <code>this</code> will be bound to the global object <strong>not</strong> the newly created object; or</li>
<li>When running in strict mode, <code>this</code> will be <code>undefined</code>, which results in a runtime error when attempting to initialize a property on the newly created object using the <code>this</code> keyword.</li>
</ul>
<p>You can write the string below at the top of your file to enable strict mode for an entire script or inside a function body for function-level strict mode.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">Strict mode</a> can be enabled by writing the following string:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="st">&quot;use strict&quot;</span><span class="op">;</span></a></code></pre></div>
<p>Because the second outcome results in an error when calling the constructor function, it’s a bit easier to debug than the first outcome. Up until now, we’ve only seen errors generated by JavaScript. With the <code>throw</code> keyword and the <code>Error</code> constructor function, we can throw our own custom errors:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="cf">if</span> (<span class="op">!</span>(<span class="kw">this</span> <span class="kw">instanceof</span> Book)) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="co">// Throws a custom error when `Book` is called without the `new` keyword.</span></a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Book needs to be called with the `new` keyword.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-6" title="6"></a>
<a class="sourceLine" id="cb14-7" title="7">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb14-11" title="11"></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">// Calling the `Book` constructor method with the `new` keyword</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">// successfully creates a new instance.</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb14-15" title="15">  <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-16" title="16">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-17" title="17">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-18" title="18"></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">// Calling the `Book` constructor method without the `new` keyword</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">// throws an error with the message</span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">// &quot;Book needs to be called with the `new` keyword.&quot;</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb14-23" title="23">  <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-24" title="24">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-25" title="25">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>In this example, an <code>if</code> statement has been added to the <code>Book</code> constructor function that checks if <code>this</code> isn’t bound to an instance of the <code>Book</code> constructor and throws an error explaining the problem.</p>
<h2 id="defining-sharable-methods">Defining sharable methods</h2>
<p>When defining the behavior or methods for an object type, avoid the temptation to define the methods within the constructor function:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb15-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="co">// For example only!</span></a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="co">// To avoid inefficient use of computer memory</span></a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="co">// don&#39;t define methods directly on the newly created object.</span></a>
<a class="sourceLine" id="cb15-9" title="9">  <span class="kw">this</span>.<span class="at">getInformation</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-10" title="10">    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-11" title="11">  <span class="op">};</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>Remember that a method is a function that’s associated with a specific object using a property.</p>
</blockquote>
<p>Using this approach is inefficient in terms of computer memory usage as each object instance would have its own method definition. If you had a hundred object instances there’d be a hundred method definitions! A better approach is to define the method once and then share that method definition across all instances of that object type.</p>
<p>Let’s explore how prototypes can be used to define sharable methods.</p>
<h3 id="prototypes-and-delegation">Prototypes and delegation</h3>
<p>In JavaScript, a <strong>prototype</strong> is an object that is delegated to when a reference to an object property or method can’t be resolved.</p>
<p>For example, if a property or method isn’t available on an object, JavaScript will delegate to the object’s prototype to see if that object has the requested property or method. If the property or method is found on the prototype, then the action is carried out on the prototype object. The delegation to the prototype happens automatically, so from the caller’s perspective it looks as if the original object had the request property or method.</p>
<p>In JavaScript, you can make an object the prototype of another object. When an object is a prototype of another object, it’s properties and methods are made available to the other object.</p>
<p>Here’s a simple, arbitrary example involving two <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names">object literals</a>: <code>a</code> and <code>b</code>. Object <code>a</code> defines a method named <code>alpha()</code> and object <code>b</code> defines a method named <code>beta()</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> a <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2"> <span class="at">alpha</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb16-3" title="3">   <span class="cf">return</span> <span class="st">&#39;Alpha&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-4" title="4"> <span class="op">}</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="op">};</span></a>
<a class="sourceLine" id="cb16-6" title="6"></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="kw">const</span> b <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-8" title="8"> <span class="at">beta</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb16-9" title="9">   <span class="cf">return</span> <span class="st">&#39;Beta&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-10" title="10"> <span class="op">}</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>The first time that you attempt to call the <code>alpha()</code> and <code>beta()</code> methods on object <code>a</code>, only the call to the <code>alpha()</code> method succeeds as the <code>beta()</code> method is only defined on object <code>b</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">a</span>.<span class="at">alpha</span>())<span class="op">;</span> <span class="co">// Alpha</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="va">a</span>.<span class="at">beta</span>())<span class="op">;</span>  <span class="co">// Error: a.beta is not a function</span></a></code></pre></div>
<p>When you check the data type of <code>a</code> or <code>b</code>, you see that they are <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics">objects</a>. This means you can access the <code>alpha()</code> and <code>beta()</code> with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors">property accessors</a> using <code>dot notation</code> or <code>bracket notation</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">typeof</span> a)<span class="op">;</span> <span class="co">// Prints &#39;object&#39;</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">// Dot notation</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="va">a</span>.<span class="at">alpha</span>()<span class="op">;</span> <span class="co">// Alpha</span></a>
<a class="sourceLine" id="cb18-5" title="5"></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">// Bracket notation</span></a>
<a class="sourceLine" id="cb18-7" title="7">a[<span class="st">&quot;alpha&quot;</span>]()<span class="op">;</span> <span class="co">// Alpha</span></a></code></pre></div>
<p>After using the <code>Object.setPrototypeOf()</code> method to set object <code>b</code> as the prototype of <code>a</code>, the call to the <code>beta()</code> method on object <code>a</code> succeeds:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="co">// For example only!</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="co">// Calling the `Object.setPrototypeOf()` method can have</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="co">// a negative impact on the performance of your application.</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="va">Object</span>.<span class="at">setPrototypeOf</span>(a<span class="op">,</span> b)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-5" title="5"></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="va">console</span>.<span class="at">log</span>(<span class="va">a</span>.<span class="at">alpha</span>())<span class="op">;</span> <span class="co">// Alpha</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">a</span>.<span class="at">beta</span>())<span class="op">;</span> <span class="co">// Beta</span></a></code></pre></div>
<blockquote>
<p><strong>Important: The <code>Object.setPrototypeOf()</code> method is used in this example for demonstration purposes only.</strong> Calling the <code>Object.setPrototypeOf()</code> method can have a negative impact on the performance of your application, so you should generally avoid using it.</p>
</blockquote>
<p>The call to <code>beta()</code> method works now because when the method isn’t found on object <code>a</code>, the call is delegated to object <code>a</code>’s prototype which is object <code>b</code>. The <code>beta()</code> method is found on object <code>b</code> and it’s successfully called.</p>
<p>Starting with ES2015, you can use the <code>Object.getPrototypeOf()</code> method to get an object’s prototype. Calling the <code>Object.getPrototypeOf()</code> method and passing object <code>a</code> allows us to verify that object <code>a</code>’s prototype is object <code>b</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="co">// Use the `Object.getPrototypeOf()` method</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">// to get the prototype of object `a`.</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Object</span>.<span class="at">getPrototypeOf</span>(a))<span class="op">;</span> <span class="co">// { beta: [Function: beta] }</span></a></code></pre></div>
<blockquote>
<p>An object’s prototype is sometimes referred to in writing using the notation <code>[[prototype]]</code>. For example, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">MDN Web Docs’ JavaScript documentation</a> will sometimes refer to an object’s prototype as its <code>[[prototype]]</code>.</p>
</blockquote>
<h3 id="the-__proto__-property">The <code>__proto__</code> property</h3>
<p>Prior to ES2015 and the addition of the <code>Object.getPrototypeOf()</code> and <code>Object.setPrototypeOf()</code> methods, there wasn’t an official way to get or set an object’s internal <code>[[prototype]]</code> object. As a workaround, many browsers (including Google Chrome and Mozilla Firefox) made available a <code>__proto__</code> property providing an easy way to access an object’s <code>[[prototype]]</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="co">// For example only!</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co">// The `__proto__` property is deprecated in favor of</span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co">// the `Object.getPrototypeOf()` and `Object.setPrototypeOf()` methods.</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="va">console</span>.<span class="at">log</span>(<span class="va">a</span>.<span class="at">__proto__</span>)<span class="op">;</span> <span class="co">// { beta: [Function: beta] }</span></a></code></pre></div>
<p><strong>While the <code>__proto__</code> property is widely supported by browsers and handy to use when debugging, you should never use it in your code as it’s deprecated in favor of the <code>Object.getPrototypeOf()</code> and <code>Object.setPrototypeOf()</code> methods.</strong></p>
<p>Code that relies upon the deprecated <code>__proto__</code> property will unexpectedly stop working if any of the browser vendors decide to remove the property from their implementation of the JavaScript language specification. When the need arises, use the <code>Object.getPrototypeOf()</code> method to get an object’s prototype.</p>
<blockquote>
<p>Instead of having to say “underscore underscore proto underscore underscore” or “double underscore proto double underscore” when referring to the <code>__proto__</code> property, developers will sometimes say “dunder proto”.</p>
</blockquote>
<h3 id="defining-sharable-methods-on-a-constructor-functions-prototype-property">Defining sharable methods on a constructor function’s <code>prototype</code> property</h3>
<p>Let’s use what you’ve learned about prototypes and delegation in JavaScript to define methods for an object type that’ll be shared across all of its instances.</p>
<p>Every constructor function has a <code>prototype</code> property that represents the object that’ll be used as the prototype for instances created by invoking the constructor function with the <code>new</code> keyword. We can confirm this by comparing the prototype for an instance created from a constructor function to the constructor function’s <code>prototype</code> property:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb22-6" title="6"></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb22-8" title="8"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-9" title="9"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-10" title="10"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-11" title="11"></a>
<a class="sourceLine" id="cb22-12" title="12"><span class="kw">const</span> twoTowers <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb22-13" title="13"> <span class="st">&#39;The Two Towers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-14" title="14"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-15" title="15"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-16" title="16"></a>
<a class="sourceLine" id="cb22-17" title="17"><span class="co">// Get the prototypes for both `Book` instances.</span></a>
<a class="sourceLine" id="cb22-18" title="18"><span class="kw">const</span> fellowshipOfTheRingPrototype <span class="op">=</span> <span class="va">Object</span>.<span class="at">getPrototypeOf</span>(fellowshipOfTheRing)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="kw">const</span> twoTowersPrototype <span class="op">=</span> <span class="va">Object</span>.<span class="at">getPrototypeOf</span>(twoTowers)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-20" title="20"></a>
<a class="sourceLine" id="cb22-21" title="21"><span class="co">// Compare the `fellowshipOfTheRing` and `twoTowers` prototypes</span></a>
<a class="sourceLine" id="cb22-22" title="22"><span class="co">// to the `Book` constructor function&#39;s `prototype` property.</span></a>
<a class="sourceLine" id="cb22-23" title="23"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRingPrototype <span class="op">===</span> <span class="va">Book</span>.<span class="at">prototype</span>)<span class="op">;</span> <span class="co">// true</span></a>
<a class="sourceLine" id="cb22-24" title="24"><span class="va">console</span>.<span class="at">log</span>(twoTowersPrototype <span class="op">===</span> <span class="va">Book</span>.<span class="at">prototype</span>)<span class="op">;</span> <span class="co">// true</span></a>
<a class="sourceLine" id="cb22-25" title="25"></a>
<a class="sourceLine" id="cb22-26" title="26"><span class="co">// Compare the `fellowshipOfTheRing` and `twoTowers` prototypes</span></a>
<a class="sourceLine" id="cb22-27" title="27"><span class="co">// to each other.</span></a>
<a class="sourceLine" id="cb22-28" title="28"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRingPrototype <span class="op">===</span> twoTowersPrototype)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>This example shows that:</p>
<ul>
<li>Every instance created by a constructor function has its prototype (i.e. <code>[[prototype]]</code>) set to the object referenced by the constructor function’s <code>prototype</code> property; and</li>
<li>The object referenced by the constructor function’s <code>prototype</code> property isn’t copied when it’s set as an instance’s prototype—every instance’s prototype references the same object.</li>
</ul>
<p>This means that any method that we define on the constructor function’s <code>prototype</code> property will be shared across all instances of that object type:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb23-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb23-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb23-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb23-6" title="6"></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="co">// Any method defined on the `Book.prototype` property</span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="co">// will be shared across all `Book` instances.</span></a>
<a class="sourceLine" id="cb23-9" title="9"><span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">getInformation</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb23-10" title="10"> <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb23-12" title="12"></a>
<a class="sourceLine" id="cb23-13" title="13"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb23-14" title="14"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-15" title="15"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-16" title="16"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-17" title="17"></a>
<a class="sourceLine" id="cb23-18" title="18"><span class="va">console</span>.<span class="at">log</span>(<span class="va">fellowshipOfTheRing</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Fellowship of the Ring by J.R.R. Tolkien</span></a></code></pre></div>
<p>When the <code>getInformation()</code> method is called, the <code>fellowshipOfTheRing</code> object is checked first to see if the method is defined on that object. When the method isn’t found, the method call is delegated to the instance’s prototype, which is set to the <code>Book</code> constructor function’s <code>prototype</code> property. This time, the <code>getInformation()</code> method is found and called.</p>
<p>Notice that we can use the <code>this</code> keyword in our shared <code>getInformation()</code> method implementation to access properties (or methods) on the instance that we’re calling the method on.</p>
<h3 id="the-problem-with-arrow-functions">The problem with arrow functions</h3>
<p>If you’re like me, you like the concise syntax of arrow functions. Unfortunately, you can’t use arrow functions when defining methods on a constructor function’s <code>prototype</code> property:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb24-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb24-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb24-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">// For example only!</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">// Using an arrow function to define a method</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">// on a constructor function doesn&#39;t work as expected</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">// when using the `this` keyword.</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">getInformation</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb24-12" title="12"></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb24-14" title="14"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-15" title="15"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-16" title="16"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-17" title="17"></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="co">// Oops! Not what we expected.</span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="va">console</span>.<span class="at">log</span>(<span class="va">fellowshipOfTheRing</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// undefined by undefined</span></a></code></pre></div>
<p>Remember that arrow functions don’t have their own <code>this</code> binding—they use the <code>this</code> binding from the enclosing lexical scope. This is why the <code>this</code> keyword within the <code>getInformation()</code> method doesn’t work as expected in the above example as it doesn’t reference the current instance (the object instance created by the <code>Book</code> constructor function).</p>
<blockquote>
<p>For more information on arrow functions, the <code>this</code> keyword, and lexical scoping, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">this page</a> on MDN Web Docs.</p>
</blockquote>
<p>This problem is easily avoided—just stick with using the <code>function</code> keyword when defining methods on a constructor function’s <code>prototype</code> property.</p>
<h3 id="prototypes-and-the-instanceof-operator">Prototypes and the <code>instanceof</code> operator</h3>
<p>Earlier, you saw an example of how the <code>instanceof</code> operator can be used to check if an object is an instance of a specific type:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb25-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb25-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb25-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb25-6" title="6"></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb25-8" title="8">  <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-9" title="9">  <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-10" title="10">  <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-11" title="11"></a>
<a class="sourceLine" id="cb25-12" title="12"><span class="co">// Use the `instanceof` operator to check if the</span></a>
<a class="sourceLine" id="cb25-13" title="13"><span class="co">// `fellowshipOfTheRing` object is an instance of `Book`.</span></a>
<a class="sourceLine" id="cb25-14" title="14"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing <span class="kw">instanceof</span> Book)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>The <code>instanceof</code> operator uses prototypes to determine if an object is an instance of a specific constructor function. To do that, the <code>instanceof</code> operator checks if the prototype of the object on the left side of the operator is set to the <code>prototype</code> property of the constructor function on the right side of the operator.</p>
<h2 id="what-you-learned">What you learned</h2>
<p>In this article, you learned</p>
<ul>
<li>how to define a constructor function for an object type that initializes one or more properties;</li>
<li>how to invoke a constructor function using the <code>new</code> keyword;</li>
<li>how to use the <code>instanceof</code> operator to check if an object is an instance of a specific object type; and</li>
<li>how to define sharable methods on the <code>prototype</code> property of a constructor function.</li>
</ul>
<hr />
<h1 id="putting-the-class-in-javascript-classes">Putting the Class in JavaScript Classes</h1>
<p>For years, JavaScript developers used constructor functions and prototypes to mimic classes. Starting with ES2015, support for classes were added to the language, giving developers an official way to define classes.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Define an ES2015 class containing a constructor method that initializes one or more properties;</li>
<li>Instantiate an instance of a class using the <code>new</code> keyword;</li>
<li>Define instance and static class methods;</li>
<li>Understand that ES2015 classes are primarily syntactic sugar over constructor functions and prototypes; and</li>
<li>Use the <code>instanceof</code> operator to check if an object is an instance of a specific class.</li>
</ul>
<h2 id="defining-an-es2015-class">Defining an ES2015 class</h2>
<p>To review, a constructor function in JavaScript handles the creation of an object—it’s a “factory” for creating instances of a specific object type. Here’s an example of a constructor function for a <code>Book</code> object type:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb26-2" title="2">  <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb26-3" title="3">  <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb26-4" title="4">  <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>An ES2015 class defines the attributes and behavior for an object type and is used to create instances of that type—just like a constructor function. Classes are defined using the <code>class</code> keyword, followed by the name of the class, and a set of curly braces. Here’s an example of the above <code>Book</code> constructor function rewritten as an ES2015 class:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb27-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb27-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb27-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb27-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb27-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Note that you <strong>cannot</strong> use the following syntax inside of classes:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="co">// THIS IS BAD CODE. DO NOT COPY. ILLUSTRATIVE USE ONLY.</span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="kw">class</span> MyClass <span class="op">{</span></a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="kw">function</span> <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb28-4" title="4"></a>
<a class="sourceLine" id="cb28-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="co">// THIS IS BAD CODE. DO NOT COPY. ILLUSTRATIVE USE ONLY.</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="kw">class</span> MyClass <span class="op">{</span></a>
<a class="sourceLine" id="cb29-3" title="3">    <span class="kw">let</span> constructor <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Notice that class names, like constructor functions, begin with a capital letter. Following this convention will help you (and other developers) to correctly identify the name as a class.</p>
<p>While not required, the above class definition includes a <code>constructor</code> method. Class <code>constructor</code> methods are similar to constructor functions in the following ways:</p>
<ul>
<li><strong><code>constructor</code> methods don’t explicitly return a value.</strong> When instantiating class instances with the <code>new</code> keyword, <code>constructor</code> methods implicitly return the newly created object instance. In just a bit, you’ll see an example of this.</li>
<li><strong>Within a <code>constructor</code> method’s body, the <code>this</code> keyword references the newly created object instance.</strong> This allows you to initialize properties on the object instance.</li>
</ul>
<h2 id="instantiating-an-instance-of-a-class">Instantiating an instance of a class</h2>
<p>To create or instantiate an instance of a class, you use the <code>new</code> keyword:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb30-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb30-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb30-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb30-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb30-8" title="8"></a>
<a class="sourceLine" id="cb30-9" title="9"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb30-10" title="10"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-11" title="11"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-12" title="12"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-13" title="13"></a>
<a class="sourceLine" id="cb30-14" title="14"><span class="co">// Output:</span></a>
<a class="sourceLine" id="cb30-15" title="15"><span class="co">// Book {</span></a>
<a class="sourceLine" id="cb30-16" title="16"><span class="co">//  title: &#39;The Fellowship of the Ring&#39;,</span></a>
<a class="sourceLine" id="cb30-17" title="17"><span class="co">//  series: &#39;The Lord of the Rings&#39;,</span></a>
<a class="sourceLine" id="cb30-18" title="18"><span class="co">//  author: &#39;J.R.R. Tolkien&#39;</span></a>
<a class="sourceLine" id="cb30-19" title="19"><span class="co">// }</span></a>
<a class="sourceLine" id="cb30-20" title="20"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing)<span class="op">;</span></a></code></pre></div>
<p>Four things occur when instantiating an instance of a class:</p>
<ol type="1">
<li>A new empty object is created (i.e. <code>{}</code>);</li>
<li>The new object’s prototype is set to the class’ <code>prototype</code> property value (more about this in just a bit);</li>
<li>The <code>constructor</code> method is called and <code>this</code> is bound to the new object; and</li>
<li>The new object is returned after the <code>constructor</code> method has completed.</li>
</ol>
<blockquote>
<p><strong>Important:</strong> Just like with constructor functions, if you return something from a <code>constructor</code> method then you’ll break the behavior described in item #4 as the return value will be whatever you’re explicitly returning instead of the new object.</p>
</blockquote>
<h3 id="attempting-to-instantiate-a-class-instance-without-the-new-keyword">Attempting to instantiate a class instance without the <code>new</code> keyword</h3>
<p>You might recall that invoking a constructor function without the <code>new</code> keyword produced an unexpected outcome. Unlike constructor functions, attempting to instantiate a class instance without using the <code>new</code> keyword results in a runtime error:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="co">// This code throws the following runtime error:</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="co">// TypeError: Class constructor Book cannot be invoked without &#39;new&#39;</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="co">// Notice the lack of the `new` keyword.</span></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb31-5" title="5"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-6" title="6"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-7" title="7"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>This default behavior is an example of how ES2015 classes improve upon constructor functions.</p>
<h3 id="class-definitions-arent-hoisted">Class definitions aren’t hoisted</h3>
<p>In JavaScript, you can call a function before it’s declared:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="at">test</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="kw">function</span> <span class="at">test</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb32-4" title="4">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;This works!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>This behavior is known as <a href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting">hoisting</a>.</p>
<p>Unlike function declarations, class declarations aren’t hoisted. The following code will throw an error at runtime:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="co">// This code throws the following runtime error:</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="co">// ReferenceError: Cannot access &#39;Book&#39; before initialization</span></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb33-4" title="4"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb33-5" title="5"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb33-6" title="6"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-7" title="7"></a>
<a class="sourceLine" id="cb33-8" title="8"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb33-9" title="9">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb33-10" title="10">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb33-11" title="11">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb33-12" title="12">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb33-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb33-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>This error is easy to avoid: simply get into the habit of declaring your classes <strong>before</strong> you use them.</p>
<h2 id="defining-methods">Defining methods</h2>
<p>A class can contain two types of method definitions: instance methods and static methods. So far, when working with constructor functions, you’ve only seen examples of instance methods.</p>
<h3 id="defining-an-instance-method">Defining an instance method</h3>
<p>Instance methods, as the name suggests, are invoked on an instance of the class. Instance methods are useful for performing an action on a specific instance.</p>
<p>The syntax for defining a class instance method is the same as the shorthand method syntax for object literals: the method name, the method’s parameters wrapped in parentheses, followed by a set of curly braces for the method body. Here’s an example of an instance method named <code>getInformation()</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb34-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb34-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb34-6" title="6"> <span class="op">}</span></a>
<a class="sourceLine" id="cb34-7" title="7"></a>
<a class="sourceLine" id="cb34-8" title="8">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb34-9" title="9">    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb34-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb34-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb34-12" title="12"></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb34-14" title="14"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb34-15" title="15"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb34-16" title="16"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-17" title="17"></a>
<a class="sourceLine" id="cb34-18" title="18"><span class="va">console</span>.<span class="at">log</span>(<span class="va">fellowshipOfTheRing</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Fellowship of the Ring by J.R.R. Tolkien</span></a></code></pre></div>
<p>Notice that you can use the <code>this</code> keyword within the instance method body to access properties (and methods) on the instance that the method was invoked on.</p>
<h3 id="instance-methods-and-prototypes">Instance methods and prototypes</h3>
<p>While the code for a class instance method doesn’t give any indication of this, instance methods are made available to instances via a shared prototype object. Just like with constructor functions, this approach prevents method definitions from being unnecessarily duplicated across instances, saving on memory utilization.</p>
<p>Because instance methods are actually defined on a shared prototype object, they’re sometimes referred to as “prototype” methods.</p>
<h3 id="defining-a-static-method">Defining a static method</h3>
<p>Static methods are invoked directly on a class, not on an instance. Attempting to invoke a static method on an instance will result in a runtime error.</p>
<p>The syntax for defining a class static method is the same as an instance method except that static methods start with the <code>static</code> keyword. Here’s an example of a static method named <code>getTitles()</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb35-2" title="2"> <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb35-3" title="3">   <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb35-4" title="4">   <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb35-5" title="5">   <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb35-6" title="6"> <span class="op">}</span></a>
<a class="sourceLine" id="cb35-7" title="7"></a>
<a class="sourceLine" id="cb35-8" title="8"> <span class="co">// Static method that accepts a variable number</span></a>
<a class="sourceLine" id="cb35-9" title="9"> <span class="co">// of Book instances and returns an array of their titles.</span></a>
<a class="sourceLine" id="cb35-10" title="10"> <span class="co">// Notice the use of a rest parameter (...books)</span></a>
<a class="sourceLine" id="cb35-11" title="11"> <span class="co">// to capture the passed parameters as an array of values.</span></a>
<a class="sourceLine" id="cb35-12" title="12"> <span class="kw">static</span> <span class="at">getTitles</span>(...<span class="at">books</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb35-13" title="13">   <span class="cf">return</span> <span class="va">books</span>.<span class="at">map</span>((book) <span class="kw">=&gt;</span> <span class="va">book</span>.<span class="at">title</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-14" title="14"> <span class="op">}</span></a>
<a class="sourceLine" id="cb35-15" title="15"></a>
<a class="sourceLine" id="cb35-16" title="16"> <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb35-17" title="17">   <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-18" title="18"> <span class="op">}</span></a>
<a class="sourceLine" id="cb35-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb35-20" title="20"></a>
<a class="sourceLine" id="cb35-21" title="21"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb35-22" title="22"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb35-23" title="23"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb35-24" title="24"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-25" title="25"></a>
<a class="sourceLine" id="cb35-26" title="26"><span class="kw">const</span> theTwoTowers <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb35-27" title="27"> <span class="st">&#39;The Two Towers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb35-28" title="28"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb35-29" title="29"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-30" title="30"></a>
<a class="sourceLine" id="cb35-31" title="31"><span class="co">// Call the static `Book.getTitles()` method</span></a>
<a class="sourceLine" id="cb35-32" title="32"><span class="co">// to get an array of the book titles.</span></a>
<a class="sourceLine" id="cb35-33" title="33"><span class="kw">const</span> bookTitles <span class="op">=</span> <span class="va">Book</span>.<span class="at">getTitles</span>(fellowshipOfTheRing<span class="op">,</span> theTwoTowers)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-34" title="34"></a>
<a class="sourceLine" id="cb35-35" title="35"><span class="va">console</span>.<span class="at">log</span>(<span class="va">bookTitles</span>.<span class="at">join</span>(<span class="st">&#39;, &#39;</span>))<span class="op">;</span> <span class="co">// The Fellowship of the Ring, The Two Towers</span></a></code></pre></div>
<p>The <code>getTitles()</code> static method accepts a variable number of Book instances and returns an array of their titles.</p>
<blockquote>
<p>Notice that the method makes use of a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameter</a> (<code>...books</code>) to capture the passed parameters as an array of values. Using this approach is merely a convenience; the code could be rewritten to require callers to pass in an array of <code>Book</code> instances.</p>
</blockquote>
<p>Static methods aren’t invoked on an instance, so they can’t use the <code>this</code> keyword to access an instance. You can pass one or more instances into a static method via a method parameter, which is exactly what the above <code>getTitles()</code> method does. This allows static methods to perform actions across groups of instances.</p>
<p>Static methods can also be used to perform “utility” actions—actions that are independent of any specific instances but are related to the object type in some way.</p>
<h3 id="static-methods-and-constructor-functions">Static methods and constructor functions</h3>
<p>Static methods aren’t unique to ES2015 classes. It’s also possible to define static methods when working with constructor functions.</p>
<p>Here’s the above example rewritten to use a constructor function:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-2" title="2"> <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb36-3" title="3"> <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb36-4" title="4"> <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb36-6" title="6"></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co">// Static methods are defined</span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="co">// directly on the constructor function.</span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="va">Book</span>.<span class="at">getTitles</span> <span class="op">=</span> <span class="kw">function</span>(...<span class="at">books</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-10" title="10"> <span class="cf">return</span> <span class="va">books</span>.<span class="at">map</span>((book) <span class="kw">=&gt;</span> <span class="va">book</span>.<span class="at">title</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb36-12" title="12"></a>
<a class="sourceLine" id="cb36-13" title="13"><span class="co">// Instance methods are defined</span></a>
<a class="sourceLine" id="cb36-14" title="14"><span class="co">// on the constructor function&#39;s `prototype` property.</span></a>
<a class="sourceLine" id="cb36-15" title="15"><span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">getInformation</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb36-16" title="16"> <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-17" title="17"><span class="op">};</span></a>
<a class="sourceLine" id="cb36-18" title="18"></a>
<a class="sourceLine" id="cb36-19" title="19"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb36-20" title="20"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb36-21" title="21"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb36-22" title="22"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-23" title="23"></a>
<a class="sourceLine" id="cb36-24" title="24"><span class="kw">const</span> theTwoTowers <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb36-25" title="25"> <span class="st">&#39;The Two Towers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb36-26" title="26"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb36-27" title="27"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-28" title="28"></a>
<a class="sourceLine" id="cb36-29" title="29"><span class="va">console</span>.<span class="at">log</span>(<span class="va">fellowshipOfTheRing</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Fellowship of the Ring by J.R.R. Tolkien</span></a>
<a class="sourceLine" id="cb36-30" title="30"></a>
<a class="sourceLine" id="cb36-31" title="31"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theTwoTowers</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Two Towers by J.R.R. Tolkien</span></a>
<a class="sourceLine" id="cb36-32" title="32"></a>
<a class="sourceLine" id="cb36-33" title="33"><span class="co">// Call the static `Book.getTitles()` method</span></a>
<a class="sourceLine" id="cb36-34" title="34"><span class="co">// to get an array of the book titles.</span></a>
<a class="sourceLine" id="cb36-35" title="35"><span class="kw">const</span> bookTitles <span class="op">=</span> <span class="va">Book</span>.<span class="at">getTitles</span>(</a>
<a class="sourceLine" id="cb36-36" title="36"> fellowshipOfTheRing<span class="op">,</span> theTwoTowers)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-37" title="37"></a>
<a class="sourceLine" id="cb36-38" title="38"><span class="va">console</span>.<span class="at">log</span>(<span class="va">bookTitles</span>.<span class="at">join</span>(<span class="st">&#39;, &#39;</span>))<span class="op">;</span> <span class="co">// The Fellowship of the Ring, The Two Towers</span></a></code></pre></div>
<h2 id="comparing-classes-to-constructor-functions">Comparing classes to constructor functions</h2>
<p>You’ve already seen how class <code>constructor</code>, instance, and static methods behave in a similar fashion to their constructor function counterparts. This is evidence that ES2015 classes are primarily syntactic sugar over constructor functions and prototypes.</p>
<blockquote>
<p>“Syntactic sugar” refers to the addition of syntax to a programming language that provides a simpler or more concise way to leverage features that already exist as opposed to adding new features.</p>
</blockquote>
<p>We can use the <code>instanceof</code> operator to validate how the various elements of a class map to constructor functions and prototypes.</p>
<p>For reference, here’s the <code>Book</code> class definition that we’ve been working with in this article:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb37-2" title="2"> <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb37-3" title="3">   <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb37-4" title="4">   <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb37-5" title="5">   <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb37-6" title="6"> <span class="op">}</span></a>
<a class="sourceLine" id="cb37-7" title="7"></a>
<a class="sourceLine" id="cb37-8" title="8"> <span class="kw">static</span> <span class="at">getTitles</span>(...<span class="at">books</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb37-9" title="9">   <span class="cf">return</span> <span class="va">books</span>.<span class="at">map</span>((book) <span class="kw">=&gt;</span> <span class="va">book</span>.<span class="at">title</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-10" title="10"> <span class="op">}</span></a>
<a class="sourceLine" id="cb37-11" title="11"></a>
<a class="sourceLine" id="cb37-12" title="12"> <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb37-13" title="13">   <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb37-14" title="14"> <span class="op">}</span></a>
<a class="sourceLine" id="cb37-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>First, we can use the <code>instanceof</code> operator to verify that the <code>Book</code> class is actually a <code>Function</code> object, not a special “Class” object or type:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="va">console</span>.<span class="at">log</span>(Book <span class="kw">instanceof</span> Function)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>We can also use the <code>instanceof</code> operator to verify that the <code>getInformation()</code> instance method is defined on the underlying <code>Book</code> function’s <code>prototype</code> property:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">getInformation</span> <span class="kw">instanceof</span> Function)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>Similarly, we can verify that the <code>getTitles()</code> static method is defined on the <code>Book</code> function:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Book</span>.<span class="at">getTitles</span> <span class="kw">instanceof</span> Function)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>Going even further, we can use the <code>isPrototypeOf()</code> method to check if an instance of the <code>Book</code> class has its prototype set to the <code>Book.prototype</code> property:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb41-2" title="2"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb41-3" title="3"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb41-4" title="4"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-5" title="5"></a>
<a class="sourceLine" id="cb41-6" title="6"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">isPrototypeOf</span>(fellowshipOfTheRing))<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>All of this confirms that the <code>Book</code> class is simply an alternative way of writing this <code>Book</code> constructor function:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">function</span> <span class="at">Book</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb42-2" title="2"> <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb42-3" title="3"> <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb42-4" title="4"> <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb42-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb42-6" title="6"></a>
<a class="sourceLine" id="cb42-7" title="7"><span class="va">Book</span>.<span class="at">getTitles</span> <span class="op">=</span> <span class="kw">function</span>(...<span class="at">books</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb42-8" title="8"> <span class="cf">return</span> <span class="va">books</span>.<span class="at">map</span>((book) <span class="kw">=&gt;</span> <span class="va">book</span>.<span class="at">title</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb42-10" title="10"></a>
<a class="sourceLine" id="cb42-11" title="11"><span class="va">Book</span>.<span class="va">prototype</span>.<span class="at">getInformation</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb42-12" title="12"> <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">author</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb42-13" title="13"><span class="op">};</span></a></code></pre></div>
<h2 id="using-the-instanceof-operator-to-check-an-objects-type-1">Using the <code>instanceof</code> operator to check an object’s type</h2>
<p>When working with constructor functions, you saw how the <code>instanceof</code> operator could be used to check if an object is an instance of a specific type. This technique also works to check if an object is an instance of a specific class:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb43-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb43-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb43-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb43-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb43-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb43-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb43-8" title="8"></a>
<a class="sourceLine" id="cb43-9" title="9"><span class="kw">const</span> fellowshipOfTheRing <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb43-10" title="10"> <span class="st">&#39;The Fellowship of the Ring&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb43-11" title="11"> <span class="st">&#39;The Lord of the Rings&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb43-12" title="12"> <span class="st">&#39;J.R.R. Tolkien&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-13" title="13"></a>
<a class="sourceLine" id="cb43-14" title="14"><span class="co">// Use the `instanceof` operator to check if the</span></a>
<a class="sourceLine" id="cb43-15" title="15"><span class="co">// `fellowshipOfTheRing` object is an instance of the `Book` class.</span></a>
<a class="sourceLine" id="cb43-16" title="16"><span class="va">console</span>.<span class="at">log</span>(fellowshipOfTheRing <span class="kw">instanceof</span> Book)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>Knowing that ES2015 classes are a layer of syntactic sugar over constructor functions and prototypes, this use of the <code>instanceof</code> operator probably isn’t surprising to you. The <code>instanceof</code> operator checks if the prototype of the object on the left side of the operator is set to the <code>prototype</code> property of the class on the right side of the operator.</p>
<h2 id="what-you-learned-1">What you learned</h2>
<p>In this article, you learned</p>
<ul>
<li>how to define an ES2015 class containing a constructor method that initializes one or more properties;</li>
<li>how to instantiate an instance of a class using the <code>new</code> keyword;</li>
<li>how to define instance and static class methods;</li>
<li>that ES2015 classes are primarily syntactic sugar over constructor functions and prototypes; and</li>
<li>how to use the <code>instanceof</code> operator to check if an object is an instance of a specific class.</li>
</ul>
<hr />
<h1 id="the-dna-of-javascript-inheritance">The DNA of JavaScript Inheritance</h1>
<p>Classes don’t have to be defined and used in isolation from one another. It’s possible to base a class—a <em>child</em> class—upon another class—the <em>parent</em> class—so that the child class can access or inherit properties and methods defined within the parent class.</p>
<p>Basing a class upon another class is commonly known as <em>inheritance</em>. Leveraging inheritance gives you a way to share code across classes, preventing code duplication and keeping your code DRY (don’t repeat yourself).</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Define a parent class;</li>
<li>Use the <code>extends</code> keyword to define a child class that inherits from a parent class;</li>
<li>Understand that inheritance in JavaScript is implemented using prototypes; and</li>
<li>Define a method in a child class that overrides a method in the parent class.</li>
</ul>
<h2 id="defining-a-parent-class">Defining a parent class</h2>
<p>Imagine that you recently started a new project developing an application to track your local library’s catalog of books and movies. You’re excited to get started with coding, so you jump right in and define two classes: <code>Book</code> and <code>Movie</code>.</p>
<h3 id="defining-the-book-and-movie-classes">Defining the <code>Book</code> and <code>Movie</code> classes</h3>
<p>The <code>Book</code> class contains <code>title</code>, <code>series</code>, and <code>author</code> properties and a <code>getInformation()</code> method. The <code>getInformation()</code> method returns a string containing the <code>title</code> and <code>series</code> property values if the <code>series</code> property has a value. Otherwise, it simply returns the <code>title</code> property value. Here’s what your initial implementation looks like:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb44-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb44-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb44-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb44-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb44-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb44-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb44-7" title="7"></a>
<a class="sourceLine" id="cb44-8" title="8">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb44-9" title="9">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb44-10" title="10">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb44-11" title="11">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb44-12" title="12">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb44-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb44-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb44-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>The <code>Movie</code> class contains <code>title</code>, <code>series</code>, and <code>director</code> properties and a <code>getInformation()</code> method which behaves just like the <code>Book.getInformation()</code> method. Here’s your initial implementation:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">class</span> Movie <span class="op">{</span></a>
<a class="sourceLine" id="cb45-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb45-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb45-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb45-5" title="5">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb45-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb45-7" title="7"></a>
<a class="sourceLine" id="cb45-8" title="8">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb45-9" title="9">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb45-10" title="10">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb45-11" title="11">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb45-12" title="12">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb45-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb45-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb45-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>To help facilitate a quick test, you instantiate an instance of each class and log to the console a call to each instance’s <code>getInformation()</code> method:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(<span class="st">&#39;The Grapes of Wrath&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;John Steinbeck&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(<span class="st">&#39;Episode 4: A New Hope&#39;</span><span class="op">,</span> <span class="st">&#39;Star Wars&#39;</span><span class="op">,</span> <span class="st">&#39;George Lucas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb46-3" title="3"></a>
<a class="sourceLine" id="cb46-4" title="4"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb46-5" title="5"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars)</span></a></code></pre></div>
<p>To test your code, you use Node.js to execute the JavaScript file that contains your code (<code>index.js</code>) from the terminal by running the command <code>node index.js</code>. Here’s the output in the terminal window:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb47-1" title="1"><span class="ex">The</span> Grapes of Wrath</a>
<a class="sourceLine" id="cb47-2" title="2"><span class="ex">Episode</span> 4: A New Hope (Star Wars)</a></code></pre></div>
<p>Feeling good about the progress that you’ve made on the project, you decide to take a break and grab a snack and something to drink. Upon your return, you review your code for the <code>Book</code> and <code>Movie</code> classes and quickly notice that the classes both contain the following members (i.e. properties and methods):</p>
<ul>
<li>The <code>title</code> and <code>series</code> properties; and</li>
<li>The <code>getInformation()</code> method.</li>
</ul>
<p>Your code isn’t very DRY (don’t repeat yourself)!</p>
<h3 id="defining-the-catalogitem-parent-class">Defining the <code>CatalogItem</code> parent class</h3>
<p>While this is an arbitrary example, it illustrates a situation that often arises in software development projects. It can be difficult to anticipate when and where code duplication will occur.</p>
<p>While the <code>Book</code> and <code>Movie</code> classes represent two different types of items found in the library’s catalog, they’re also both catalog items. That commonality between the classes allows you to leverage inheritance to keep your code DRY.</p>
<p>Inheritance is when a class is based upon another class. When a class inherits from another class, it gets access to its properties and methods.</p>
<p>To use inheritance, you’ll create a new <code>CatalogItem</code> parent class and move the <code>title</code> and <code>series</code> properties and the <code>getInformation()</code> method into that class. Then you’ll update the <code>Book</code> and <code>Movie</code> classes to inherit from the <code>CatalogItem</code> parent class.</p>
<p>Here’s what the implementation for the <code>CatalogItem</code> parent class looks like:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb48-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb48-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb48-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb48-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb48-6" title="6"></a>
<a class="sourceLine" id="cb48-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb48-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb48-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb48-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb48-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb48-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb48-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb48-14" title="14"><span class="op">}</span></a></code></pre></div>
<h2 id="inheriting-from-a-class">Inheriting from a class</h2>
<p>Now you need to update the <code>Book</code> and <code>Movie</code> classes to inherit from the <code>CatalogItem</code> parent class. To do that, you’ll make the following changes to the <code>Book</code> class:</p>
<ul>
<li>Use the <code>extends</code> keyword to indicate that the <code>Book</code> class inherits from the <code>CatalogItem</code> class;</li>
<li>Use the <code>super</code> keyword to call the <code>CatalogItem</code> class’s <code>constructor()</code> method from within the <code>Book</code> class’s <code>constructor()</code> method; and</li>
<li>Remove the <code>getInformation()</code> method from the <code>Book</code> class.</li>
</ul>
<p>To indicate that the <code>Book</code> class inherits from the <code>CatalogItem</code> class, add the <code>extends</code> keyword after the class name followed by the name of the parent class:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb49-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb49-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb49-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb49-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb49-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb49-7" title="7"></a>
<a class="sourceLine" id="cb49-8" title="8">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb49-9" title="9">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb49-10" title="10">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb49-11" title="11">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-12" title="12">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb49-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb49-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb49-15" title="15"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>Remember that class declarations aren’t hoisted like function declarations, so you need to ensure that the <code>CatalogItem</code> class is declared <strong>before</strong> the <code>Book</code> and <code>Movie</code> classes or a runtime error will be thrown.</p>
</blockquote>
<p>Since the <code>Book</code> class defines a <code>constructor()</code> method, the <code>constructor()</code> method in the <code>CatalogItem</code> parent class must be called before attempting to use the <code>this</code> keyword to initialize properties within the <code>Book</code> class’s <code>constructor()</code> method. To call the <code>constructor()</code> method in the parent class, use the <code>super</code> keyword:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb50-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb50-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb50-4" title="4">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb50-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb50-6" title="6"></a>
<a class="sourceLine" id="cb50-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb50-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb50-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb50-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb50-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb50-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb50-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb50-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>Notice that the <code>title</code> and <code>series</code> parameters are passed to the parent class’s <code>constructor()</code> method by calling the <code>super</code> keyword as a method and passing in the <code>title</code> and <code>series</code> parameters as arguments. Failing to call the parent class’s <code>constructor()</code> method before attempting to use the <code>this</code> keyword would result in a runtime error.</p>
<p>Lastly, since the <code>getInformation()</code> is defined in the <code>CatalogItem</code> parent class, the <code>getInformation()</code> method can be safely removed from the <code>Book</code> class:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb51-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb51-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-4" title="4">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb51-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb51-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>That completes the updates to the <code>Book</code> class! Now you can turn your attention to the <code>Movie</code> class, which needs to be refactored in a similar way.</p>
<blockquote>
<p><strong>Time to practice!</strong> To help reinforce your learning, try to make the changes to the <code>Movie</code> class on your own. When you’re done, compare your code to the code shown below.</p>
</blockquote>
<p>Here’s the updated <code>Movie</code> class:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb52-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb52-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb52-4" title="4">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb52-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb52-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Go ahead and use Node to re-run your application (<code>node index.js</code>) to confirm that the output to the terminal window is unchanged. You should see the following output:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" title="1"><span class="ex">The</span> Grapes of Wrath</a>
<a class="sourceLine" id="cb53-2" title="2"><span class="ex">Episode</span> 4: A New Hope (Star Wars)</a></code></pre></div>
<p>Great job! You’ve improved your code without breaking the behavior of your application.</p>
<p>For reference, here’s the current state of your code:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb54-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb54-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb54-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb54-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-6" title="6"></a>
<a class="sourceLine" id="cb54-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb54-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb54-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb54-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb54-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb54-15" title="15"></a>
<a class="sourceLine" id="cb54-16" title="16"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb54-17" title="17">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb54-18" title="18">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-19" title="19">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb54-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-21" title="21"><span class="op">}</span></a>
<a class="sourceLine" id="cb54-22" title="22"></a>
<a class="sourceLine" id="cb54-23" title="23"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb54-24" title="24">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb54-25" title="25">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-26" title="26">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb54-27" title="27">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-28" title="28"><span class="op">}</span></a>
<a class="sourceLine" id="cb54-29" title="29"></a>
<a class="sourceLine" id="cb54-30" title="30"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(<span class="st">&#39;The Grapes of Wrath&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;John Steinbeck&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-31" title="31"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(<span class="st">&#39;Episode 4: A New Hope&#39;</span><span class="op">,</span> <span class="st">&#39;Star Wars&#39;</span><span class="op">,</span> <span class="st">&#39;George Lucas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-32" title="32"></a>
<a class="sourceLine" id="cb54-33" title="33"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb54-34" title="34"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars)</span></a></code></pre></div>
<blockquote>
<p>The <code>CatalogItem</code>, <code>Book</code>, and <code>Movie</code> classes form a simple <em>class hierarchy</em>. More complicated class hierarchies can include as many as a dozen or more classes.</p>
</blockquote>
<h3 id="understanding-how-this-works-from-within-a-parent-class">Understanding how <code>this</code> works from within a parent class</h3>
<p>Reviewing the <code>CatalogItem</code> parent class, you’ll notice that the <code>this</code> keyword is used both in the <code>constructor()</code> and <code>getInformation()</code> methods:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb55-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb55-2" title="2"> <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb55-3" title="3">   <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb55-4" title="4">   <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb55-5" title="5"> <span class="op">}</span></a>
<a class="sourceLine" id="cb55-6" title="6"></a>
<a class="sourceLine" id="cb55-7" title="7"> <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb55-8" title="8">   <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb55-9" title="9">     <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-10" title="10">   <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb55-11" title="11">     <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-12" title="12">   <span class="op">}</span></a>
<a class="sourceLine" id="cb55-13" title="13"> <span class="op">}</span></a>
<a class="sourceLine" id="cb55-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>Regardless of where the <code>this</code> keyword is used, it always references the instance object (the object created using the <code>new</code> keyword). This behavior allows the <code>constructor()</code> method in a class—child or parent—to initialize properties on the instance object. It also gives access to instance object properties from within any instance method, regardless if the method is defined in a child or parent class.</p>
<h2 id="understanding-how-inheritance-works-in-javascript">Understanding how inheritance works in JavaScript</h2>
<p>Earlier in this lesson, you saw how the <code>instanceof</code> operator and the <code>Object.getPrototypeOf()</code> method could be used to confirm that ES2015 classes are primarily <em>syntactic sugar</em> over constructor functions and prototypes. We can use similar debugging techniques to see how class inheritance in JavaScript is implemented using prototypes.</p>
<blockquote>
<p><em>Syntactic sugar</em> refers to the addition of syntax to a programming language that provides a simpler or more concise way to leverage features that already exist as opposed to adding new features.</p>
</blockquote>
<p>For reference, here are the <code>CatalogItem</code> and <code>Book</code> class definitions that we’ve been working with in this article:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb56-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb56-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb56-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb56-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb56-6" title="6"></a>
<a class="sourceLine" id="cb56-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb56-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb56-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb56-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb56-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb56-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb56-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb56-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb56-15" title="15"></a>
<a class="sourceLine" id="cb56-16" title="16"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb56-17" title="17">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb56-18" title="18">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb56-19" title="19">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb56-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb56-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>To review, we can use the <code>instanceof</code> operator to verify that the <code>CatalogItem</code> and <code>Book</code> classes are actually <code>Function</code> objects, not special “Class” objects or types:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb57-1" title="1"><span class="va">console</span>.<span class="at">log</span>(Catalogitem <span class="kw">instanceof</span> Function)<span class="op">;</span> <span class="co">// true</span></a>
<a class="sourceLine" id="cb57-2" title="2"><span class="va">console</span>.<span class="at">log</span>(Book <span class="kw">instanceof</span> Function)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>The underlying function for the <code>Book</code> class, like a constructor function, has a <code>prototype</code> property. The object referenced by the <code>Book.prototype</code> property is used to set the prototype (i.e. <code>[[prototype]]</code>) for every instance of the <code>Book</code> class.</p>
<p>We can verify this using the <code>Object.getPrototypeOf()</code> method:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb58-1" title="1"><span class="co">// Create an instance of the Book class.</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(<span class="st">&#39;The Grapes of Wrath&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;John Steinbeck&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb58-3" title="3"></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="co">// Verify that the prototype of the instance</span></a>
<a class="sourceLine" id="cb58-5" title="5"><span class="co">// references the `Book.prototype` object.</span></a>
<a class="sourceLine" id="cb58-6" title="6"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Object</span>.<span class="at">getPrototypeOf</span>(theGrapesOfWrath) <span class="op">===</span> <span class="va">Book</span>.<span class="at">prototype</span>)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>The <code>Book</code> class uses the <code>extends</code> keyword to inherit from the <code>CatalogItem</code> class. This gives instances of the <code>Book</code> class access to the <code>getInformation()</code> method defined within the <code>CatalogItem</code> class. But how is that accomplished?</p>
<h3 id="inheritance-prototype-chains-and-delegation">Inheritance, prototype chains, and delegation</h3>
<p>Just like the <code>Book</code> class, the underlying function for the <code>CatalogItem</code> class has a <code>prototype</code> property. Because the <code>Book</code> class inherits from the <code>CatalogItem</code> class, the object referenced by the <code>Book.prototype</code> property will have its <code>[[prototype]]</code> set to the <code>CatalogItem.prototype</code> property.</p>
<p>Again, we can verify this using the <code>Object.getPrototypeOf()</code> method:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb59-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Object</span>.<span class="at">getPrototypeOf</span>(<span class="va">Book</span>.<span class="at">prototype</span>) <span class="op">===</span> <span class="va">CatalogItem</span>.<span class="at">prototype</span>)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>The relationships between the <code>Book</code> instance, the <code>Book.prototype</code> property, and the <code>CatalogItem.prototype</code> property form a <em>prototype chain</em>.</p>
<p>In fact, the prototype chain doesn’t end with the <code>CatalogItem.prototype</code> property. The object referenced by the <code>CatalogItem.prototype</code> property has its <code>[[prototype]]</code> set to the <code>Object.prototype</code> property, which is the default base prototype for all objects.</p>
<p>Yet again, we can verify this using the <code>Object.getPrototypeOf()</code> method:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb60-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">Object</span>.<span class="at">getPrototypeOf</span>(<span class="va">CatalogItem</span>.<span class="at">prototype</span>) <span class="op">===</span> <span class="va">Object</span>.<span class="at">prototype</span>)<span class="op">;</span> <span class="co">// true</span></a></code></pre></div>
<p>Notice that as we move from the bottom of the prototype chain to the top, from the <code>Book.prototype</code> object to the <code>CatalogItem.prototype</code> object to the <code>Object.prototype</code> object, we move from more specialized objects to more generic objects.</p>
<blockquote>
<p>Prototype trivia: <code>Object.prototype</code> is the <code>[[prototype]]</code> for all object literals and the base <code>[[prototype]]</code> for any objects created with the <code>new</code> keyword.</p>
</blockquote>
<p>Remember that a prototype is an object that’s delegated to when a property or method can’t be found on an object. We just saw that a class hierarchy defines a prototype chain. A prototype chain in turn defines a series of prototype objects that are delegated to, one by one, when a property or method can’t be found on an instance object.</p>
<p>For example, we can call the <code>getInformation()</code> method on an instance of the <code>Book</code> class, like this:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb61-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a></code></pre></div>
<p>The following occurs when the <code>getInformation()</code> method is invoked:</p>
<ul>
<li>JavaScript looks for the <code>getInformation()</code> method on the <code>theGrapesOfWrath</code> object.</li>
<li>When the method isn’t found, the method call is delegated to the <code>theGrapesOfWrath</code> object’s <code>[[prototype]]</code> (the object referenced by the <code>Book.prototype</code> property).</li>
<li>When the method isn’t found (again), the method call is delegated to the <code>Book.prototype</code> property object’s <code>[[prototype]]</code> (the object referenced by the <code>CatalogItem.prototype</code> property).</li>
<li>This time the method is found (yes!) and the method is successfully called with <code>this</code> set to the <code>theGrapesOfWrath</code> object.</li>
</ul>
<p>Using this system of delegation, JavaScript provides a mechanism for objects to “inherit” properties and methods from other objects. Because of its use of prototypes, JavaScript’s implementation of inheritance is technically known as <em>prototypal inheritance</em>.</p>
<h2 id="overriding-a-method-in-a-parent-class">Overriding a method in a parent class</h2>
<p>Defining a method in a parent class to add behavior to all of its descendant classes is useful and helps to keep your code DRY (don’t repeat yourself). But what if a specific child class needs to modify the behavior of the parent class method?</p>
<p>For example, what if the <code>getInformation()</code> method for the <code>Movie</code> class needs to add the director’s name to the end of the string that’s returned by the method? One way to satisfy this requirement is to override the parent class’s <code>getInformation()</code> method in the child class.</p>
<blockquote>
<p><em>Method overriding</em> is when a child class provides an implementation of a method that’s already defined in a parent class.</p>
</blockquote>
<p>Taking advantage of how delegation works in JavaScript, to override a method in a parent class, you can simply define a method in a child class with the same method name:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb62-1" title="1"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb62-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb62-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb62-4" title="4">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb62-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb62-6" title="6"></a>
<a class="sourceLine" id="cb62-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb62-8" title="8">    <span class="co">// </span><span class="al">TODO</span><span class="co"> Implement this method!</span></a>
<a class="sourceLine" id="cb62-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb62-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>Now when the <code>getInformation()</code> method is called on an instance of the <code>Movie</code> class, the method will be found on the instance’s <code>[[prototype]]</code> (the object referenced by the <code>Movie.prototype</code> property). This stops JavaScript from searching any further up the prototype chain, so the <code>getInformation()</code> method that’s defined in the <code>CatalogItem</code> class isn’t even considered.</p>
<blockquote>
<p>You can think of the <code>getInformation()</code> method that’s defined in the <code>Movie</code> class as “shadowing” or “hiding” the <code>getInformation()</code> method that’s defined in the <code>CatalogItem</code> class.</p>
</blockquote>
<p>Now we need to implement the <code>getInformation()</code> method in the <code>Movie</code> class. We <strong>could</strong> copy and paste the code from the <code>getInformation()</code> method in the <code>CatalogItem</code> class as a starting point, but we want to keep our code DRY!</p>
<p>What if we could call the <code>getInformation()</code> method in the <code>CatalogItem</code> class from within the <code>getInformation()</code> method in the <code>Movie</code> class? Using the <code>super</code> keyword, we can:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb63-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb63-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-4" title="4">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb63-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb63-6" title="6"></a>
<a class="sourceLine" id="cb63-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb63-8" title="8">    <span class="kw">let</span> result <span class="op">=</span> <span class="kw">super</span>.<span class="at">getInformation</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb63-9" title="9"></a>
<a class="sourceLine" id="cb63-10" title="10">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">director</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb63-11" title="11">      result <span class="op">+=</span> <span class="vs">` [directed by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">director</span><span class="sc">}</span><span class="vs">]`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb63-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb63-13" title="13"></a>
<a class="sourceLine" id="cb63-14" title="14">    <span class="cf">return</span> result<span class="op">;</span></a>
<a class="sourceLine" id="cb63-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb63-16" title="16"><span class="op">}</span></a></code></pre></div>
<p>In the above implementation of the <code>getInformation()</code> method, the <code>super</code> keyword is used to reference the <code>getInformation()</code> method that’s defined in the parent class—the <code>CatalogItem</code> class. We then take that result of calling the <code>getInformation()</code> method in the parent class and append the <code>director</code> property in brackets (i.e. <code>[]</code>) as long as the <code>director</code> property actually has a value.</p>
<p>Now we’ve modified the behavior of a parent class method without having to duplicate code between classes!</p>
<h2 id="what-you-learned-2">What you learned</h2>
<p>In this article, you learned</p>
<ul>
<li>how to define a parent class;</li>
<li>how to use the <code>extends</code> keyword to define a child class that inherits from a parent class;</li>
<li>that inheritance in JavaScript is implemented using prototypes; and</li>
<li>how to define a method in a child class that overrides a method in the parent class.</li>
</ul>
<hr />
<h1 id="using-modules-in-node.js">Using Modules in Node.js</h1>
<p>Up until now, you’ve used Node to run a single JavaScript file that contains all of your code. For trivial Node applications, this approach works fine, but for most Node applications, a different approach is required. Instead of a single, monolithic JavaScript file that contains all of your application code, you’ll use multiple files, with each file containing a logical unit of code that defines a module.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Add a local module to a Node.js application;</li>
<li>Use the <code>module.exports</code> property to export from a module;</li>
<li>Use the <code>require()</code> function to import from a module;</li>
<li>Use modules that export a single item; and</li>
<li>Understand how module loading works in Node.js.</li>
</ul>
<blockquote>
<p><strong>This article only covers using modules in Node.js.</strong> Later on, you’ll learn how to use modules with JavaScript that runs in the browser.</p>
</blockquote>
<h2 id="introducing-node.js-modules">Introducing Node.js modules</h2>
<p>In Node.js, each JavaScript file in a project defines a module. A module’s content is private by default, preventing content from being unexpectedly accessed by other modules. Content must be explicitly exported from a module so that other modules can import it. You’ll learn how to share content between modules later in this article.</p>
<p>Modules defined within your project are known as <em>local modules</em>. Ideally, each local module has a single purpose that’s focused on implementing a single bit of functionality. Local modules, along with core and third-party modules, are combined to create your application.</p>
<h3 id="core-and-third-party-modules">Core and third-party modules</h3>
<p><em>Core modules</em> are the native modules contained within Node.js that you can use to perform tasks or to add functionality to your application. Node contains a variety of core modules, including modules for working with file paths (<code>path</code>), reading data from a stream one line at a time (<code>readline</code>), reading and writing files to the local file system (<code>fs</code>), and creating HTTP servers (<code>http</code>).</p>
<p>Developers, companies, and organizations that use Node.js also create and publish modules that you can use in your applications. These <em>third-party modules</em> are distributed and managed using <a href="https://www.npmjs.com">npm</a>, a popular package manager for Node.js. You’ll learn about npm and package managers in a future lesson.</p>
<h3 id="the-commonjs-module-system">The CommonJS module system</h3>
<p>Recent versions of Node.js actually contain two different module systems. A legacy module system known as <em>CommonJS</em> and a newer module system known as <em>ECMAScript Modules</em> or simply <em>ES Modules</em>. Conceptually, CommonJS and ES Modules are similar, but their syntax and implementation details differ.</p>
<p>ES Modules will eventually replace CommonJS, but the transition won’t happen overnight. Like older versions of JavaScript, CommonJS modules may never disappear completely due to the amount of legacy Node.js code that exists.</p>
<blockquote>
<p>You’ll start with learning about and using CommonJS modules. In a future lesson, you’ll be introduced to ES Modules.</p>
</blockquote>
<h2 id="adding-a-local-module-to-a-node.js-application">Adding a local module to a Node.js application</h2>
<p>To add a local module to a Node application, simply add a new JavaScript file (<code>.js</code>) to your project! You can locate the file in the root of the project or within a folder or a nested folder.</p>
<p>Here’s a screenshot of adding a <code>classes</code> module (<code>classes.js</code>) to the root folder of a Node application in Visual Studio Code:</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Module-JavaScript/classes/assets/js-classes-new-module.png" alt="new-module" /><figcaption>new-module</figcaption>
</figure>
<p>The <code>classes</code> module will define the classes for a simple library catalog application, which will be used to track a library’s catalog of books and movies.</p>
<p>Here’s the code for the <code>CatalogItem</code>, <code>Book</code>, and <code>Movie</code> classes:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb64-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb64-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb64-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb64-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb64-6" title="6"></a>
<a class="sourceLine" id="cb64-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb64-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb64-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb64-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb64-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb64-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb64-15" title="15"></a>
<a class="sourceLine" id="cb64-16" title="16"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb64-17" title="17">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb64-18" title="18">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb64-19" title="19">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb64-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb64-21" title="21"><span class="op">}</span></a>
<a class="sourceLine" id="cb64-22" title="22"></a>
<a class="sourceLine" id="cb64-23" title="23"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb64-24" title="24">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb64-25" title="25">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb64-26" title="26">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb64-27" title="27">  <span class="op">}</span></a>
<a class="sourceLine" id="cb64-28" title="28"></a>
<a class="sourceLine" id="cb64-29" title="29">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb64-30" title="30">    <span class="kw">let</span> result <span class="op">=</span> <span class="kw">super</span>.<span class="at">getInformation</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb64-31" title="31"></a>
<a class="sourceLine" id="cb64-32" title="32">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">director</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb64-33" title="33">      result <span class="op">+=</span> <span class="vs">` [directed by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">director</span><span class="sc">}</span><span class="vs">]`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-34" title="34">    <span class="op">}</span></a>
<a class="sourceLine" id="cb64-35" title="35"></a>
<a class="sourceLine" id="cb64-36" title="36">    <span class="cf">return</span> result<span class="op">;</span></a>
<a class="sourceLine" id="cb64-37" title="37">  <span class="op">}</span></a>
<a class="sourceLine" id="cb64-38" title="38"><span class="op">}</span></a></code></pre></div>
<p>The <code>CatalogItem</code> class represents an item in the library’s catalog. The <code>CatalogItem</code> class serves as the parent class to the <code>Book</code> and <code>Movie</code> classes, which respectively represent books and movies in the library’s catalog.</p>
<p>Code contained within a module is private by default, meaning that it’s only accessible to other code contained with that module. If you attempted to reference the <code>Book</code> or <code>Movie</code> classes in the <code>index.js</code> file, you’d get a runtime error.</p>
<blockquote>
<p>The <code>index.js</code> file is the entry point for the application. A Node application’s <em>entry point</em> is the file that’s passed to the <code>node</code> command (i.e. <code>node index.js</code>) when starting an application from the terminal.</p>
</blockquote>
<h2 id="exporting-from-a-module">Exporting from a module</h2>
<p>To make the <code>Book</code> and <code>Movie</code> classes accessible to other modules in our application, you need to export them.</p>
<p>Each module in Node has access to a <code>module</code> object that represents the current module. The <code>module</code> object contains a number of properties that provide information about the current module. One of those properties, the <code>module.exports</code> property, is used to export items from the module.</p>
<p>To export an item, simply define a property for that item on the <code>module.exports</code> object:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb65-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb65-2" title="2">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb65-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb65-4" title="4"></a>
<a class="sourceLine" id="cb65-5" title="5"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb65-6" title="6">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb65-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb65-8" title="8"></a>
<a class="sourceLine" id="cb65-9" title="9"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb65-10" title="10">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb65-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb65-12" title="12"></a>
<a class="sourceLine" id="cb65-13" title="13"><span class="va">module</span>.<span class="va">exports</span>.<span class="at">Book</span> <span class="op">=</span> Book<span class="op">;</span></a>
<a class="sourceLine" id="cb65-14" title="14"><span class="va">module</span>.<span class="va">exports</span>.<span class="at">Movie</span> <span class="op">=</span> Movie<span class="op">;</span></a></code></pre></div>
<p>Node initializes the <code>module.exports</code> property to an empty object. If you don’t declare and initialize any properties on the <code>module.exports</code> object, then nothing will be exported from the module.</p>
<p>The <code>module.exports</code> property names don’t need to match the class names, but for this specific example, it makes sense to keep the property names consistent with the class names.</p>
<blockquote>
<p>Notice that we’re intentionally not exporting the <code>CatalogItem</code> class. The <code>CatalogItem</code> class is the parent class for the <code>Book</code> and <code>Movie</code> classes and can stay private to this module.</p>
</blockquote>
<p>In this example (and the others that follow), we’re exporting an ES2015 class, but what you can export from a module isn’t restricted to just classes. You can just as easily export a function or an object.</p>
<h3 id="assigning-a-new-object-to-the-module.exports-property">Assigning a new object to the <code>module.exports</code> property</h3>
<p>Instead of defining properties on the <code>module.exports</code> property, you can assign a new object that contains a property for each item that you want to export:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb66-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb66-2" title="2">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb66-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb66-4" title="4"></a>
<a class="sourceLine" id="cb66-5" title="5"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb66-6" title="6">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb66-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb66-8" title="8"></a>
<a class="sourceLine" id="cb66-9" title="9"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb66-10" title="10">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb66-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb66-12" title="12"></a>
<a class="sourceLine" id="cb66-13" title="13"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb66-14" title="14">  Book<span class="op">,</span></a>
<a class="sourceLine" id="cb66-15" title="15">  Movie</a>
<a class="sourceLine" id="cb66-16" title="16"><span class="op">};</span></a></code></pre></div>
<p>Both approaches will look the same to the consumers of the module, so choosing which approach to use is a stylistic choice.</p>
<h3 id="the-exports-shortcut">The <code>exports</code> shortcut</h3>
<p>In addition to the <code>module.exports</code> property, Node provides an <code>exports</code> variable that’s initialized to the <code>module.exports</code> property value. Instead of defining properties on the <code>module.exports</code> property, you can use the <code>exports</code> variable as a shortcut:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb67-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb67-2" title="2">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb67-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb67-4" title="4"></a>
<a class="sourceLine" id="cb67-5" title="5"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb67-6" title="6">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb67-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb67-8" title="8"></a>
<a class="sourceLine" id="cb67-9" title="9"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb67-10" title="10">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb67-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb67-12" title="12"></a>
<a class="sourceLine" id="cb67-13" title="13"><span class="va">exports</span>.<span class="at">Book</span> <span class="op">=</span> Book<span class="op">;</span></a>
<a class="sourceLine" id="cb67-14" title="14"><span class="va">exports</span>.<span class="at">Movie</span> <span class="op">=</span> Movie<span class="op">;</span></a></code></pre></div>
<p>While this is handy, it’s important to note that you can’t use the <code>exports</code> variable if you want to assign a new object to the <code>module.exports</code> property:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb68-2" title="2">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb68-4" title="4"></a>
<a class="sourceLine" id="cb68-5" title="5"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb68-6" title="6">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb68-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb68-8" title="8"></a>
<a class="sourceLine" id="cb68-9" title="9"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb68-10" title="10">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb68-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb68-12" title="12"></a>
<a class="sourceLine" id="cb68-13" title="13"><span class="co">// Don&#39;t do this!</span></a>
<a class="sourceLine" id="cb68-14" title="14"><span class="co">// Assigning a new value to the `exports` variable</span></a>
<a class="sourceLine" id="cb68-15" title="15"><span class="co">// doesn&#39;t update the `module.exports` property.</span></a>
<a class="sourceLine" id="cb68-16" title="16">exports <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb68-17" title="17">  Book<span class="op">,</span></a>
<a class="sourceLine" id="cb68-18" title="18">  Movie</a>
<a class="sourceLine" id="cb68-19" title="19"><span class="op">};</span></a></code></pre></div>
<p>To understand why this doesn’t work, let’s imagine how Node initializes the <code>module.exports</code> property and declares and initializes the <code>exports</code> variable:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb69-1" title="1"><span class="co">// Initialize the `module.exports` property to an empty object.</span></a>
<a class="sourceLine" id="cb69-2" title="2"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb69-3" title="3"></a>
<a class="sourceLine" id="cb69-4" title="4"><span class="co">// Declare and initialize the `exports` variable.</span></a>
<a class="sourceLine" id="cb69-5" title="5"><span class="kw">let</span> exports <span class="op">=</span> <span class="va">module</span>.<span class="at">exports</span><span class="op">;</span></a></code></pre></div>
<p>Assigning a new value to the <code>exports</code> variable breaks the linkage between the variable and the <code>module.exports</code> property:</p>
<p><strong>classes.js</strong></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb70-1" title="1"><span class="co">// Class definitions removed for brevity.</span></a>
<a class="sourceLine" id="cb70-2" title="2"></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="co">// Assign a new value to the `exports` variable.</span></a>
<a class="sourceLine" id="cb70-4" title="4">exports <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb70-5" title="5">  Book<span class="op">,</span></a>
<a class="sourceLine" id="cb70-6" title="6">  Movie</a>
<a class="sourceLine" id="cb70-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb70-8" title="8"></a>
<a class="sourceLine" id="cb70-9" title="9"><span class="co">// The `module.exports` property still references an empty object.</span></a>
<a class="sourceLine" id="cb70-10" title="10"><span class="va">console</span>.<span class="at">log</span>(<span class="va">module</span>.<span class="at">exports</span>)<span class="op">;</span> <span class="co">// {}</span></a></code></pre></div>
<p>While the <code>exports</code> variable now references your new object, the <code>module.exports</code> property still references the empty object that Node assigned to it. This results in nothing being exported from your module.</p>
<p>Just remember to only define properties on the <code>exports</code> variable—never assign a new value to it!</p>
<blockquote>
<p>Because of this issue, some developers and teams prefer to use the <code>module.exports</code> property exclusively and ignore that the <code>exports</code> shortcut exists. As long as you understand how to properly use the <code>exports</code> variable, it’s safe to use in your applications.</p>
</blockquote>
<h2 id="importing-from-a-module">Importing from a module</h2>
<p>The code for the application’s entry point, <code>index.js</code>, looks like this:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb71-1" title="1"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb71-2" title="2">  <span class="st">&quot;The Grapes of Wrath&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb71-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb71-4" title="4">  <span class="st">&quot;John Steinbeck&quot;</span></a>
<a class="sourceLine" id="cb71-5" title="5">)<span class="op">;</span></a>
<a class="sourceLine" id="cb71-6" title="6"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(</a>
<a class="sourceLine" id="cb71-7" title="7">  <span class="st">&quot;Episode 4: A New Hope&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb71-8" title="8">  <span class="st">&quot;Star Wars&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb71-9" title="9">  <span class="st">&quot;George Lucas&quot;</span></a>
<a class="sourceLine" id="cb71-10" title="10">)<span class="op">;</span></a>
<a class="sourceLine" id="cb71-11" title="11"></a>
<a class="sourceLine" id="cb71-12" title="12"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb71-13" title="13"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars) [directed by George Lucas]</span></a></code></pre></div>
<p>If you attempted to run your application using the command <code>node index.js</code>, you’d receive the following error:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb72-1" title="1"><span class="ex">ReferenceError</span>: Book is not defined</a></code></pre></div>
<p>You’re attempting to instantiate an instance of the <code>Book</code> class but that class is defined in the <code>classes</code> module, not the <code>index</code> module (the module defined by the <code>index.js</code> file).</p>
<p>Each module needs to explicitly state what it needs from other modules by saying “I need this and this to run”. When a module needs something from another module, it’s said to be dependent on that module. A module’s dependencies are the modules that it needs to run.</p>
<h3 id="the-require-function">The <code>require()</code> function</h3>
<p>The <code>index</code> module is dependent upon the <code>Book</code> and <code>Movie</code> classes, so you need to import them from the <code>classes</code> module. To do that, you can use the <code>require()</code> function:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb73-1" title="1"><span class="co">// Use the `require()` function to import the `classes` module.</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="kw">const</span> classes <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./classes&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb73-3" title="3"></a>
<a class="sourceLine" id="cb73-4" title="4"><span class="co">// Declare variables for each of the properties</span></a>
<a class="sourceLine" id="cb73-5" title="5"><span class="co">// defined on the `classes` object.</span></a>
<a class="sourceLine" id="cb73-6" title="6"><span class="kw">const</span> Book <span class="op">=</span> <span class="va">classes</span>.<span class="at">Book</span><span class="op">;</span></a>
<a class="sourceLine" id="cb73-7" title="7"><span class="kw">const</span> Movie <span class="op">=</span> <span class="va">classes</span>.<span class="at">Movie</span><span class="op">;</span></a>
<a class="sourceLine" id="cb73-8" title="8"></a>
<a class="sourceLine" id="cb73-9" title="9"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb73-10" title="10">  <span class="st">&quot;The Grapes of Wrath&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb73-11" title="11">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb73-12" title="12">  <span class="st">&quot;John Steinbeck&quot;</span></a>
<a class="sourceLine" id="cb73-13" title="13">)<span class="op">;</span></a>
<a class="sourceLine" id="cb73-14" title="14"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(</a>
<a class="sourceLine" id="cb73-15" title="15">  <span class="st">&quot;Episode 4: A New Hope&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb73-16" title="16">  <span class="st">&quot;Star Wars&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb73-17" title="17">  <span class="st">&quot;George Lucas&quot;</span></a>
<a class="sourceLine" id="cb73-18" title="18">)<span class="op">;</span></a>
<a class="sourceLine" id="cb73-19" title="19"></a>
<a class="sourceLine" id="cb73-20" title="20"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb73-21" title="21"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars) [directed by George Lucas]</span></a></code></pre></div>
<p>To import from a local module, you pass to the <code>require()</code> function a path to the module: <code>./classes</code>. The dot in the path means to start in the current folder and look for a module named <code>classes</code>. The module name is the name of the file without the <code>.js</code> file extension.</p>
<blockquote>
<p>You can optionally include the <code>.js</code> file extension after the module name, but most of the time it’s omitted.</p>
</blockquote>
<p>Remember that the <code>classes</code> module exports an object (using the <code>module.exports</code> property) with two properties, <code>Book</code> and <code>Movie</code>, which reference the <code>Book</code> and <code>Movie</code> classes defined within the <code>classes</code> module. The object that the <code>classes</code> module exports is what’s returned from the <code>require()</code> function call and captured by the <code>classes</code> variable:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb74-1" title="1"><span class="kw">const</span> classes <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./classes&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>To make it a little easier to reference the <code>Book</code> and <code>Movie</code> classes, local variables are declared for each:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">const</span> Book <span class="op">=</span> <span class="va">classes</span>.<span class="at">Book</span><span class="op">;</span></a>
<a class="sourceLine" id="cb75-2" title="2"><span class="kw">const</span> Movie <span class="op">=</span> <span class="va">classes</span>.<span class="at">Movie</span><span class="op">;</span></a></code></pre></div>
<p>Now if you run your application using the command <code>node index.js</code>, you’ll see the following output:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb76-1" title="1"><span class="ex">The</span> Grapes of Wrath</a>
<a class="sourceLine" id="cb76-2" title="2"><span class="ex">Episode</span> 4: A New Hope (Star Wars) [<span class="ex">directed</span> by George Lucas]</a></code></pre></div>
<p>To review, when a module requires code from another module it becomes dependent on that module. So, in this example, the <code>index</code> module has a dependency on the <code>classes</code> module—without the <code>Book</code> and <code>Movie</code> classes this code in the <code>index</code> module wouldn’t be able to successfully run.</p>
<h3 id="using-destructuring-when-importing">Using destructuring when importing</h3>
<p>Instead of declaring a variable for the module that you’re importing and then declaring a variable for each individual item that the module exports, you can use destructuring to condense that code to a single statement:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb77-1" title="1"><span class="kw">const</span> <span class="op">{</span> Book<span class="op">,</span> Movie <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./classes&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb77-2" title="2"></a>
<a class="sourceLine" id="cb77-3" title="3"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb77-4" title="4">  <span class="st">&quot;The Grapes of Wrath&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb77-5" title="5">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb77-6" title="6">  <span class="st">&quot;John Steinbeck&quot;</span></a>
<a class="sourceLine" id="cb77-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb77-8" title="8"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(</a>
<a class="sourceLine" id="cb77-9" title="9">  <span class="st">&quot;Episode 4: A New Hope&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb77-10" title="10">  <span class="st">&quot;Star Wars&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb77-11" title="11">  <span class="st">&quot;George Lucas&quot;</span></a>
<a class="sourceLine" id="cb77-12" title="12">)<span class="op">;</span></a>
<a class="sourceLine" id="cb77-13" title="13"></a>
<a class="sourceLine" id="cb77-14" title="14"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb77-15" title="15"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars) [directed by George Lucas]</span></a></code></pre></div>
<p>Either approach works fine, so this is one of the many stylistic choices you’ll make as a developer.</p>
<h2 id="using-single-item-modules">Using single item modules</h2>
<p>Knowing how best to organize a project using modules is challenging—even for experienced developers. There’s also a variety of valid approaches for organizing projects. While there’s no single “best” way (each approach has benefits and drawbacks), some developers prefer modules that only export a single item.</p>
<blockquote>
<p>Following the convention of a single exported item per module helps to keep modules focused and less likely to become bloated with too much code. This has many advantages including improving the readability and manageability of your code.</p>
</blockquote>
<h3 id="splitting-apart-the-classes-module">Splitting apart the <code>classes</code> module</h3>
<p>Currently, the <code>classes</code> module (defined by the <code>classes.js</code> file) defines and exports three classes: <code>CatalogItem</code>, <code>Book</code>, and <code>Movie</code>. Let’s split apart the <code>classes</code> module so that each class will become its own module.</p>
<p>Start by adding a folder to your project named <code>classes</code>. Then add three files to the <code>classes</code> folder, one for each class: <code>catalog-item.js</code>, <code>book.js</code>, and <code>movie.js</code>. Here’s a screenshot of the project after these changes:</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Module-JavaScript/classes/assets/js-classes-module-refactoring.png" alt="module-refactoring" /><figcaption>module-refactoring</figcaption>
</figure>
<p>Now you’re ready to move the <code>CatalogItem</code> class from the <code>classes</code> module to the <code>catalog-item</code> module. To do that, copy and paste the code for the <code>CatalogItem</code> class from one module to the other:</p>
<p><strong>classes/catalog-item.js</strong></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb78-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb78-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series) <span class="op">{</span></a>
<a class="sourceLine" id="cb78-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb78-4" title="4">    <span class="kw">this</span>.<span class="at">series</span> <span class="op">=</span> series<span class="op">;</span></a>
<a class="sourceLine" id="cb78-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb78-6" title="6"></a>
<a class="sourceLine" id="cb78-7" title="7">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb78-8" title="8">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">series</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb78-9" title="9">      <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">series</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb78-10" title="10">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb78-11" title="11">      <span class="cf">return</span> <span class="kw">this</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb78-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb78-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb78-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>For any module that contains or exports a single item, we can simply assign that item to the <code>module.exports</code> property:</p>
<p><strong>classes/catalog-item.js</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">class</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb79-2" title="2">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb79-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb79-4" title="4"></a>
<a class="sourceLine" id="cb79-5" title="5"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> CatalogItem<span class="op">;</span></a></code></pre></div>
<p>Next, move the <code>Book</code> class from the <code>classes</code> module to the <code>book</code> module, copying and pasting the code for the <code>Book</code> class from one module to the other:</p>
<p><strong>classes/book.js</strong></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb80-1" title="1"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb80-2" title="2">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> author) <span class="op">{</span></a>
<a class="sourceLine" id="cb80-3" title="3">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb80-4" title="4">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb80-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb80-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Sharp eyes will notice that the <code>Book</code> class inherits from the <code>CatalogItem</code> class (using the <code>extends</code> keyword). This means that the <code>book</code> module has a dependency on the <code>catalog-item</code> module.</p>
<p>You can import the <code>CatalogItem</code> class using the <code>require()</code> function, declaring and initializing a variable for the single item that’s exported from the module:</p>
<p><strong>classes/book.js</strong></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb81-1" title="1"><span class="kw">const</span> CatalogItem <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./catalog-item&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb81-2" title="2"></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb81-4" title="4">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb81-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>This demonstrates that when importing from a module, you need to be aware if the module exports a single item or multiple items. For local modules, you can review the code for the module you’re importing from to determine how the <code>module.exports</code> property is being used. For core modules in Node or third-party modules, you’ll need to consult the documentation for the module if you’re unfamiliar with the module.</p>
<p>Finish up the <code>book</code> module by exporting the <code>Book</code> class from the module:</p>
<p><strong>classes/book.js</strong></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb82-1" title="1"><span class="kw">const</span> CatalogItem <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./catalog-item&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb82-2" title="2"></a>
<a class="sourceLine" id="cb82-3" title="3"><span class="kw">class</span> Book <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb82-4" title="4">  <span class="co">// Contents removed for brevity.</span></a>
<a class="sourceLine" id="cb82-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb82-6" title="6"></a>
<a class="sourceLine" id="cb82-7" title="7"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> Book<span class="op">;</span></a></code></pre></div>
<p>Now you’re ready to move the <code>Movie</code> class from the <code>classes</code> module to the <code>movie</code> module. The process and end result, will look a lot like the <code>book</code> module:</p>
<p><strong>classes/movie.js</strong></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb83-1" title="1"><span class="kw">const</span> CatalogItem <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./catalog-item&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb83-2" title="2"></a>
<a class="sourceLine" id="cb83-3" title="3"><span class="kw">class</span> Movie <span class="kw">extends</span> CatalogItem <span class="op">{</span></a>
<a class="sourceLine" id="cb83-4" title="4">  <span class="at">constructor</span>(title<span class="op">,</span> series<span class="op">,</span> director) <span class="op">{</span></a>
<a class="sourceLine" id="cb83-5" title="5">    <span class="kw">super</span>(title<span class="op">,</span> series)<span class="op">;</span></a>
<a class="sourceLine" id="cb83-6" title="6">    <span class="kw">this</span>.<span class="at">director</span> <span class="op">=</span> director<span class="op">;</span></a>
<a class="sourceLine" id="cb83-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb83-8" title="8"></a>
<a class="sourceLine" id="cb83-9" title="9">  <span class="at">getInformation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb83-10" title="10">    <span class="kw">let</span> result <span class="op">=</span> <span class="kw">super</span>.<span class="at">getInformation</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb83-11" title="11"></a>
<a class="sourceLine" id="cb83-12" title="12">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">director</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb83-13" title="13">      result <span class="op">+=</span> <span class="vs">` [directed by </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">director</span><span class="sc">}</span><span class="vs">]`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb83-14" title="14">    <span class="op">}</span></a>
<a class="sourceLine" id="cb83-15" title="15"></a>
<a class="sourceLine" id="cb83-16" title="16">    <span class="cf">return</span> result<span class="op">;</span></a>
<a class="sourceLine" id="cb83-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb83-18" title="18"><span class="op">}</span></a>
<a class="sourceLine" id="cb83-19" title="19"></a>
<a class="sourceLine" id="cb83-20" title="20"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> Movie<span class="op">;</span></a></code></pre></div>
<p>After moving the classes to their own modules, you can safely remove the <code>classes</code> module by deleting the <code>classes.js</code> file.</p>
<p>The last change that you need to make is to the <code>index</code> module. The <code>index</code> module needs to import the <code>Book</code> and <code>Movie</code> classes from the new modules:</p>
<p><strong>index.js</strong></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">const</span> Book <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./classes/book&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb84-2" title="2"><span class="kw">const</span> Movie <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;./classes/movie&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb84-3" title="3"></a>
<a class="sourceLine" id="cb84-4" title="4"><span class="kw">const</span> theGrapesOfWrath <span class="op">=</span> <span class="kw">new</span> <span class="at">Book</span>(</a>
<a class="sourceLine" id="cb84-5" title="5">  <span class="st">&quot;The Grapes of Wrath&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb84-6" title="6">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb84-7" title="7">  <span class="st">&quot;John Steinbeck&quot;</span></a>
<a class="sourceLine" id="cb84-8" title="8">)<span class="op">;</span></a>
<a class="sourceLine" id="cb84-9" title="9"><span class="kw">const</span> aNewHope <span class="op">=</span> <span class="kw">new</span> <span class="at">Movie</span>(</a>
<a class="sourceLine" id="cb84-10" title="10">  <span class="st">&quot;Episode 4: A New Hope&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb84-11" title="11">  <span class="st">&quot;Star Wars&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb84-12" title="12">  <span class="st">&quot;George Lucas&quot;</span></a>
<a class="sourceLine" id="cb84-13" title="13">)<span class="op">;</span></a>
<a class="sourceLine" id="cb84-14" title="14"></a>
<a class="sourceLine" id="cb84-15" title="15"><span class="va">console</span>.<span class="at">log</span>(<span class="va">theGrapesOfWrath</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// The Grapes of Wrath</span></a>
<a class="sourceLine" id="cb84-16" title="16"><span class="va">console</span>.<span class="at">log</span>(<span class="va">aNewHope</span>.<span class="at">getInformation</span>())<span class="op">;</span> <span class="co">// Episode 4: A New Hope (Star Wars) [directed by George Lucas]</span></a></code></pre></div>
<p>Notice that the <code>classes</code> folder name needed to be added to the path that’s passed to the <code>require()</code> function.</p>
<p>If you run your application again using the command <code>node index.js</code>, you’ll see the following output (which is unchanged from the previous version of the application):</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb85-1" title="1"><span class="ex">The</span> Grapes of Wrath</a>
<a class="sourceLine" id="cb85-2" title="2"><span class="ex">Episode</span> 4: A New Hope (Star Wars) [<span class="ex">directed</span> by George Lucas]</a></code></pre></div>
<h2 id="understanding-module-loading">Understanding module loading</h2>
<p>In this article, we’ve focused on creating and using local modules, but that’s just one of the available module types. How does Node determine if a module is a local, core, or third-party module?</p>
<h3 id="module-loading-logic">Module loading logic</h3>
<p>When attempting to load a module, Node will examine the identifier passed to the <code>require()</code> function to determine if the module is a local, core, or third-party module:</p>
<ul>
<li>Local module = identifier starts with <code>./</code>, <code>../</code>, or <code>/</code></li>
<li>Node.js core module = identifier matches a core module name</li>
<li>Third-party module = identifier matches a module in the <code>node_modules</code> folder</li>
</ul>
<p>If the identifier starts with <code>./</code>, <code>../</code>, or <code>/</code>, then Node will attempt to load a local module from the current project using the provided path.</p>
<p>If the identifier passed to the <code>require()</code> function isn’t a path, then Node will check if the module name matches a core module name.</p>
<p>If the identifier isn’t a core module, then Node will attempt to load the module from the <code>node_modules</code> folder. The <code>node_modules</code> folder is a special folder that the <code>npm</code> package manager creates. You’ll learn more about npm and the <code>node_modules</code> folder in a future lesson.</p>
<h3 id="module-loading-process">Module loading process</h3>
<p>The first time that a module is imported by another module, Node will load the module, execute the code contained with the module, and return the <code>module.exports</code> object to the consuming module. To help improve performance, Node caches modules so that they only need to be loaded and executed once.</p>
<p>An interesting side effect of the module loading process is that code contained within a module is only executed when it’s first imported by another module. If a module is never imported by another module—meaning that it’s not a dependency of another module—then the code contained within that module won’t be executed.</p>
<p>The exception to this rule is the module that’s specified as the entry point for your application. Typically that’s the <code>index.js</code> or <code>app.js</code> file located in the root of your project folder. Code in the entry point module is automatically executed by Node when the application is started.</p>
<h2 id="what-you-learned-3">What you learned</h2>
<p>In this article, you learned</p>
<ul>
<li>how to add a local module to a Node.js application;</li>
<li>how to use the <code>module.exports</code> property to export from a module;</li>
<li>how to use the <code>require()</code> function to import from a module;</li>
<li>how to use modules that export a single item; and</li>
<li>how module loading works in Node.js.</li>
</ul>
<hr />
<h1 id="constructor-functions-and-classes-project">Constructor Functions and Classes Project</h1>
<p>Time to practice creating and using constructor functions and ES2015 classes. Your objective is to implement the requirements listed in each file of the <code>/problems</code> directory. In addition to the prompts available at the top of each file, Mocha specs are provided to test your work.</p>
<p>To get started, use the following commands:</p>
<ol type="1">
<li><code>cd</code> into the project directory</li>
<li><code>npm install</code> to install any dependencies</li>
<li><code>mocha</code> to run the test cases</li>
</ol>
<hr />
<h1 id="week-05-day-3-classes-and-objects" data-ignore="true">WEEK-05 DAY-3<br><em>Classes and Objects</em></h1>
<hr />
<h1 id="object-oriented-programming-learning-objectives">Object-Oriented Programming Learning Objectives</h1>
<p>Object-Oriented Programming (OOP) is one of the most popular programming paradigms. Additionally, OOP can help beginning engineers learn how to breakdown complex problems.</p>
<p>You will be tested on this material by completing a guided project using the following principles. You will also answer questions about their definitions.</p>
<ul>
<li>The three pillars of object-oriented programming</li>
<li>How to apply the Law of Demeter ________________________________________________________________________________ # Object-Oriented Programming Explained</li>
</ul>
<p>JavaScript is an object-oriented language. You’ve already used objects in your programming. For example, when you write</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb86-1" title="1"><span class="kw">const</span> array <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb86-2" title="2"><span class="kw">const</span> squares <span class="op">=</span> <span class="va">array</span>.<span class="at">map</span>(x <span class="kw">=&gt;</span> x <span class="op">*</span> x)<span class="op">;</span></a></code></pre></div>
<p>the value stored in <code>array</code> is an object! The value stored in <code>squares</code> is <em>another</em> object! There are objects all over the place!</p>
<p>In this article, you’re going to learn the theory of object-oriented programming, the features that make it different than other kinds of programming.</p>
<ul>
<li>The property of encapsulation.</li>
<li>The property of inheritance.</li>
<li>The property of polymorphism.</li>
</ul>
<p>These features allow us to thoughts in a way that (hopefully) represents the way that we, as humans, think and reason about the world.</p>
<h2 id="encapsulation-enclose-something-in-or-as-if-in-a-capsule">Encapsulation: enclose (something) in or as if in a capsule</h2>
<p>When you write a class, you do something amazing which revolutionized the organization of computer software source code: you put behavior (the methods) and the data it works on (instance variables, also called <em>fields</em>) together. Up to that point, programmers had to deal with code that declared data structures in one file and used in multiple other files all over the code base. Understanding where data got changed became exponentially difficult as the size of software grew.</p>
<p>Knowing where data changes is the most important aspect of software. Every change in the way programmers like yourself organize your code has been about maintainability, about how and where you should put the code that runs the instructions that makes the software works. In a lot of object-oriented languages, like Java, C++, Objective-C, and C#, they tend to either enforce or encourage putting <em>one class definition per file</em>. You are not bound by that restriction or convention in JavaScript.</p>
<figure>
<img src="images/lighted-vending-machines-on-street-2338113-v2.jpg" alt="vending machines" /><figcaption>vending machines</figcaption>
</figure>
<p>Imagine, if you will, that you want to buy something from a vending machine. You tap your phone against the payment reader (or insert coins into a slot, or swipe a credit card). Once the payment is authorized in any of those forms, you can make a selection and receive your tasty treat. If you were to think about that as a series of steps, you could write them like this.</p>
<ol type="1">
<li>Authorize payment through payment vendor</li>
<li>Make selection</li>
<li>Retrieve tasty treat</li>
</ol>
<p>With respect to the concepts of object-oriented programming, the vending machine would be an object. All of the internal workings of the machine, how it communicates wirelessly with a payment vendor, how its internal mechanics thrash about to deliver a beverage or snack to you, all of that is hidden behind a plastic advertisement. All of that behavior is <em>encapsulated</em> inside the machine so that you don’t have to worry about the details. Imagine a less encapsulated world where you had to perform the following steps to get your tasty treat.</p>
<ol type="1">
<li>Call your payment provider.</li>
<li>Specify that you want to spend no more than $2 on your next purchase.</li>
<li>Write down a confirmation number for an authorization of up to a $2 payment.</li>
<li>Call the vending machine company.</li>
<li>Give them your payment authorization confirmation number.</li>
<li>Key in a 16-digit authorization number that they tell you.</li>
<li>Make selection.</li>
<li>Tell the vending company the transaction number and the total amount.</li>
<li>Retrieve tasty treat.</li>
</ol>
<p>Now, instead of hiding all the details about how payments work, the vending machines forces you to have to participate in the payment process. A system such as this relies on people acting as good agents when they report the total amount with the transaction number. A system such as this is inconvenient for the person that has a desire to sate. The vending machine <em>encapsulates the complexity of its internal mechanisms behind easy-to-use interactions</em>. The same goes with encapsulation with object-oriented programming.</p>
<p>Say that you wanted to write software that helped gyms manage their business. Something that can happen at the gym would be that you want to register a person as a member for the gym. Code that does that may look something like this.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb87-1" title="1"><span class="kw">class</span> Gym <span class="op">{</span></a>
<a class="sourceLine" id="cb87-2" title="2">  <span class="at">registerMember</span>(firstName<span class="op">,</span> lastName<span class="op">,</span> email<span class="op">,</span> creditCardInfo) <span class="op">{</span></a>
<a class="sourceLine" id="cb87-3" title="3">    <span class="kw">const</span> person <span class="op">=</span> <span class="kw">new</span> <span class="at">Person</span>(lastName<span class="op">,</span> firstName<span class="op">,</span> email)<span class="op">;</span></a>
<a class="sourceLine" id="cb87-4" title="4">    <span class="va">person</span>.<span class="at">addCardInfo</span>(creditCardInfo)<span class="op">;</span></a>
<a class="sourceLine" id="cb87-5" title="5">    <span class="kw">this</span>.<span class="va">members</span>.<span class="at">push</span>(person)<span class="op">;</span></a>
<a class="sourceLine" id="cb87-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb87-7" title="7"></a>
<a class="sourceLine" id="cb87-8" title="8">  <span class="co">// Lots of other code</span></a>
<a class="sourceLine" id="cb87-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>When other code uses this, all it knows about how the gym object works is that there’s a method named <code>registerMember</code> and if you give it some information, then a person becomes a member of the gym. Imagine that the code inside the <code>registerMember</code> function was written like this instead:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb88-1" title="1"><span class="kw">class</span> Gym <span class="op">{</span></a>
<a class="sourceLine" id="cb88-2" title="2">  <span class="at">registerMember</span>(firstName<span class="op">,</span> lastName<span class="op">,</span> email<span class="op">,</span> creditCardInfo) <span class="op">{</span></a>
<a class="sourceLine" id="cb88-3" title="3">    <span class="kw">this</span>.<span class="at">members</span>[<span class="kw">this</span>.<span class="va">members</span>.<span class="at">length</span>] <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb88-4" title="4">      <span class="dt">firstName</span><span class="op">:</span> firstName<span class="op">,</span></a>
<a class="sourceLine" id="cb88-5" title="5">      <span class="dt">lastName</span><span class="op">:</span> lastName<span class="op">,</span></a>
<a class="sourceLine" id="cb88-6" title="6">      <span class="dt">email</span><span class="op">:</span> email<span class="op">,</span></a>
<a class="sourceLine" id="cb88-7" title="7">      <span class="dt">creditCardInfo</span><span class="op">:</span> creditCardInfo<span class="op">,</span></a>
<a class="sourceLine" id="cb88-8" title="8">    <span class="op">};</span></a>
<a class="sourceLine" id="cb88-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb88-10" title="10"></a>
<a class="sourceLine" id="cb88-11" title="11">  <span class="co">// Lots of other code</span></a>
<a class="sourceLine" id="cb88-12" title="12"><span class="op">}</span></a></code></pre></div>
<p>The encapsulation of the behavior (adding a new member to the gym) is hidden behind the method name <code>registerMember</code>. Any code which uses the <code>registerMember</code> method of the <code>Gym</code> class doesn’t care what the code looks like inside of <code>Gym</code>. It still just uses it like this:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb89-1" title="1">gym <span class="op">=</span> <span class="kw">new</span> <span class="at">Gym</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb89-2" title="2"><span class="va">gym</span>.<span class="at">registerMember</span>(<span class="st">&#39;Margaret&#39;</span><span class="op">,</span> <span class="st">&#39;Hamilton&#39;</span><span class="op">,</span> <span class="st">&#39;mh@mit.edu&#39;</span><span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a></code></pre></div>
<p>Encapsulation puts the behavior and data together behind methods that hide the specific implementation so that code that uses it doesn’t need to worry about the details of it.</p>
<h2 id="inheritance-derived-from-ones-ancestors">Inheritance: derived from one’s ancestors</h2>
<figure>
<img src="images/man-and-woman-sitting-on-bench-in-grayscale-photography-1049557-v2.jpg" alt="grandchild and grandmother" /><figcaption>grandchild and grandmother</figcaption>
</figure>
<p>In the same way that biology passes traits of a parent organism to its descendants, so does object-oriented programming through its support of <strong>inheritance</strong>. There are a lot of different kinds of inheritance because there are a bunch of different “type systems” that programming languages support. JavaScript, in particular, supports a type of inheritance known as <strong>implementation inheritance</strong> through a mechanism known as <strong>prototypal inheritance</strong>. <em>Implementation inheritance</em> means that the data and methods defined on a parent class are available on objects created from classes that inherit from those parent classes. <em>Prototypal inheritance</em> means that JavaScript uses prototype objects to make its <em>implementation inheritance</em> actually work.</p>
<p>Notes: Here is some terminology for you. * For the sake of brevity, you should understand that whenever you read the phrase “parent class”, that also means “prototype”. * “Super class” is another name for “parent class”. * “Base class” is another name for “parent class”. * Sometimes, you will see “inheritance” referred to as “subtyping”.</p>
<h3 id="a-built-in-example-of-inheritance">A built-in example of inheritance</h3>
<p>All object in JavaScript share a common parent class, the <code>Object</code> parent class. The <code>Object</code> class has a method named <code>toString()</code> on it. Since all objects in JavaScript are child classes (or grandchild classes or great grandchild classes or great great…), that means that every object in JavaScript has a <code>toString()</code> method! If a class doesn’t create its own, then it will fall back to its parent class’ implementation of <code>toString()</code>. If the parent class doesn’t have an implementation, and the parent’s parent class doesn’t have an implementation, it will keep going until it gets to the <code>Object</code> class and use that one. (That’s some recursion in there. Did you sense that?) Open a terminal, start node, and type the following.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb90-1" title="1"><span class="op">&gt;</span> [<span class="ex">1</span>, 2, 3].toString();</a>
<a class="sourceLine" id="cb90-2" title="2"><span class="st">&#39;1,2,3&#39;</span></a>
<a class="sourceLine" id="cb90-3" title="3"><span class="op">&gt;</span> <span class="st">&quot;some text&quot;</span><span class="ex">.toString</span>();</a>
<a class="sourceLine" id="cb90-4" title="4"><span class="st">&#39;some text&#39;</span></a>
<a class="sourceLine" id="cb90-5" title="5"><span class="op">&gt;</span> <span class="ex">new</span> Date()<span class="ex">.toString</span>();</a>
<a class="sourceLine" id="cb90-6" title="6"><span class="st">&#39;«the current date and time»&#39;</span></a>
<a class="sourceLine" id="cb90-7" title="7"><span class="op">&gt;</span> <span class="ex">new</span> Object()<span class="ex">.toString</span>();</a>
<a class="sourceLine" id="cb90-8" title="8">[<span class="ex">object</span> Object]</a></code></pre></div>
<p>You’ll note the following:</p>
<ul>
<li>The <code>toString()</code> method of an array takes the values in the array and turns them into a comma-delimited string, that is, it puts commas between each of the items.</li>
<li>The <code>toString()</code> method of a string does nothing and just returns the string object. (You might remember that strings are primitive types, but strings are special and you can also call methods on them like they are objects.)</li>
<li>The <code>toString()</code> method of a <code>Date</code> object returns a long textual representation of the date and time that the <code>Date</code> object represents.</li>
<li>The <code>toString()</code> method of <code>Object</code> returns the not so helpful “[object Object]”.</li>
</ul>
<p>When you declare a class with no explicit parent class, then JavaScript will make it a child of <code>Object</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">class</span> MyClass <span class="op">{}</span></a>
<a class="sourceLine" id="cb91-2" title="2"></a>
<a class="sourceLine" id="cb91-3" title="3"><span class="co">// is the same as</span></a>
<a class="sourceLine" id="cb91-4" title="4"><span class="kw">class</span> MyClass <span class="kw">extends</span> Object <span class="op">{}</span></a></code></pre></div>
<h3 id="a-custom-example-of-implementation-inheritance">A custom example of implementation inheritance</h3>
<p>Imagine that you have created the following code in a JavaScript file and loaded it into a browser (through a <code>&lt;script&gt;</code> tag) or run it with the node command.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb92-1" title="1"><span class="kw">class</span> Charity <span class="op">{}</span></a>
<a class="sourceLine" id="cb92-2" title="2"></a>
<a class="sourceLine" id="cb92-3" title="3"><span class="kw">class</span> Business <span class="op">{</span></a>
<a class="sourceLine" id="cb92-4" title="4">  <span class="at">toString</span>() <span class="op">{</span> <span class="cf">return</span> <span class="st">&#39;Give us your money.&#39;</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb92-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb92-6" title="6"></a>
<a class="sourceLine" id="cb92-7" title="7"><span class="kw">class</span> Restaurant <span class="kw">extends</span> Business <span class="op">{</span></a>
<a class="sourceLine" id="cb92-8" title="8">  <span class="at">toString</span>() <span class="op">{</span> <span class="cf">return</span> <span class="st">&#39;Eat at Joe</span><span class="sc">\&#39;</span><span class="st">s!&#39;</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb92-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb92-10" title="10"></a>
<a class="sourceLine" id="cb92-11" title="11"><span class="kw">class</span> AutoRepairShop <span class="kw">extends</span> Business <span class="op">{}</span></a>
<a class="sourceLine" id="cb92-12" title="12"></a>
<a class="sourceLine" id="cb92-13" title="13"><span class="kw">class</span> Retail <span class="kw">extends</span> Business <span class="op">{</span></a>
<a class="sourceLine" id="cb92-14" title="14">  <span class="at">toString</span>() <span class="op">{</span> <span class="cf">return</span> <span class="st">&#39;Buy some stuff!&#39;</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb92-15" title="15"><span class="op">}</span></a>
<a class="sourceLine" id="cb92-16" title="16"></a>
<a class="sourceLine" id="cb92-17" title="17"><span class="kw">class</span> ClothingStore <span class="kw">extends</span> Retail <span class="op">{}</span></a>
<a class="sourceLine" id="cb92-18" title="18"></a>
<a class="sourceLine" id="cb92-19" title="19"><span class="kw">class</span> PhoneStore <span class="kw">extends</span> Retail <span class="op">{</span></a>
<a class="sourceLine" id="cb92-20" title="20">  <span class="at">toString</span>() <span class="op">{</span> <span class="cf">return</span> <span class="st">&#39;Upgrade your perfectly good phone, now!&#39;</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb92-21" title="21"><span class="op">}</span></a>
<a class="sourceLine" id="cb92-22" title="22"></a>
<a class="sourceLine" id="cb92-23" title="23"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">new</span> <span class="at">PhoneStore</span>().<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb92-24" title="24"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">new</span> <span class="at">ClothingStore</span>().<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb92-25" title="25"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">new</span> <span class="at">Restaurant</span>().<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb92-26" title="26"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">new</span> <span class="at">AutoRepairShop</span>().<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb92-27" title="27"><span class="va">console</span>.<span class="at">log</span>(<span class="kw">new</span> <span class="at">Charity</span>().<span class="at">toString</span>())<span class="op">;</span></a></code></pre></div>
<p>What do you think those last four lines will print out? Try running that code to confirm your suspicions. (<strong>Important</strong>: When given the opportunity to try out short snippets of code like the above example, <em>do not</em> copy and paste it. This is an opportunity for you to type it into an editor or command line to become familiar with the syntax.)</p>
<p>The three classes <code>AutoRepairShop</code>, <code>Charity</code>, and <code>ClothingStore</code> in the example above do not have their own <code>toString()</code> methods. That means that an object of one of those three types can’t respond to that method invocation. The JavaScript runtime at that point starts inspecting prototype objects to find a <code>toString()</code> method.</p>
<ul>
<li>For <code>AutoRepairShop</code>, it finds a <code>toString()</code> method on its parent class <code>Business</code>, and prints “Give us your money.”.</li>
<li>For <code>ClothingStore</code>, it finds a <code>toString()</code> method on its parent class <code>Retail</code>, and prints “Buy some stuff!”.</li>
<li>For <code>Charity</code>, it finds a <code>toString()</code> method on its implicit parent class <code>Object</code>, and prints “[object Object]”.</li>
</ul>
<h3 id="the-nuts-and-bolts-of-prototypal-inheritance">The nuts and bolts of prototypal inheritance</h3>
<p>JavaScript is almost singularly unique in its concept of prototype-based inheritance. No other commonly used language in the modern world has this kind of inheritance. (Examples of languages that <em>do</em> have prototypal inheritance are <a href="http://common-lisp.net/">Common Lisp</a>, <a href="http://www.selflanguage.org/">Self</a>, and <a href="http://iolanguage.com/">Io</a>. These languages have niche markets that some people adore. However, you would be hard-pressed to find them in use in most software development shops.)</p>
<p>As you saw in the example from the last section, when you write code that accesses a method (or property) on an object, if JavaScript doesn’t find it, it will “delegate” it to its prototype, that is, it will determine if the prototype has that method (or property). If it doesn’t find it there, it will delegate it to the object’s prototype’s prototype until it reaches <code>Object</code>. If it doesn’t find it on <code>Object</code>, then you’ll get an error or <code>undefined</code>, depending on the mechanism that you’re using.</p>
<p>Consider the following diagrams which show an object with <code>name</code> and <code>getAge</code> properties. It has a parent object (prototype) that has <code>name</code> and <code>lastName</code> properties. That parent object has another parent object that has a <code>toString</code> property.</p>
<p>If you write code to get the <code>name</code> property of the object, it will look on that object, determine that a <code>name</code> property exists, and return the value of that property, “Djimon”.</p>
<figure>
<img src="images/find-name-v2.png" alt="resolve the name property" /><figcaption>resolve the name property</figcaption>
</figure>
<p>If you write code to get the <code>lastName</code> property of the object, it will look at that object, see that there’s no <code>lastName</code> property on it, and go to its parent object, its prototype object. There, it sees a <code>lastName</code> property defined and returns the value of that property, “Hounsou”.</p>
<figure>
<img src="images/find-last-name-v2.png" alt="resolve the lastName property" /><figcaption>resolve the lastName property</figcaption>
</figure>
<p>If you write code to invoke the <code>toString()</code> method of the object, it will look at that object, see that there’s no <code>toString</code> property on it, and go to its parent object, which also doesn’t have a <code>toString</code> property. Finally, it will look at the grandparent object (the one in green) and see that it has that <code>toString()</code> method on it and invoke it. But, the story doesn’t end there.</p>
<figure>
<img src="images/find-tostring-v3.png" alt="resolve the lastName property" /><figcaption>resolve the lastName property</figcaption>
</figure>
<p>When the <code>toString()</code> method runs, it accesses the <code>this</code> property to get <code>this.name</code> and <code>this.lastName</code>. The <code>this</code> property <em>references the object that the call originally came from</em>. That’s really important.</p>
<blockquote>
<p>When JavaScript uses a property (or method) from a prototype that it found through prototypal inheritance, then the <code>this</code> property points to the original object on which the first call was made.</p>
</blockquote>
<p>In this case, the call to <code>this.name</code> in the <code>toString()</code> method of the original object’s grandparent class acts just like the call to <code>o.name</code> from two examples back. The call to <code>this.lastName</code> acts the same way.</p>
<p>Try the following code in your JavaScript environment to get a feel for it. Change the assignments in the constructor. Remove assignments in the constructor. See how changes affect the messages printed to the console.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb93-1" title="1"><span class="kw">class</span> Parent <span class="op">{</span></a>
<a class="sourceLine" id="cb93-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb93-3" title="3">    <span class="kw">this</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&#39;PARENT&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb93-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb93-5" title="5">  <span class="at">toString</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb93-6" title="6">    <span class="cf">return</span> <span class="vs">`My name is </span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb93-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb93-8" title="8"><span class="op">}</span></a>
<a class="sourceLine" id="cb93-9" title="9"></a>
<a class="sourceLine" id="cb93-10" title="10"><span class="kw">class</span> Child <span class="kw">extends</span> Parent <span class="op">{</span></a>
<a class="sourceLine" id="cb93-11" title="11">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb93-12" title="12">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb93-13" title="13">    <span class="kw">this</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&#39;CHILD&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb93-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb93-15" title="15"><span class="op">}</span></a>
<a class="sourceLine" id="cb93-16" title="16"></a>
<a class="sourceLine" id="cb93-17" title="17"><span class="kw">const</span> parent <span class="op">=</span> <span class="kw">new</span> <span class="at">Parent</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb93-18" title="18"><span class="va">console</span>.<span class="at">log</span>(<span class="va">parent</span>.<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb93-19" title="19"></a>
<a class="sourceLine" id="cb93-20" title="20"><span class="kw">const</span> child <span class="op">=</span> <span class="kw">new</span> <span class="at">Child</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb93-21" title="21"><span class="va">console</span>.<span class="at">log</span>(<span class="va">child</span>.<span class="at">toString</span>())<span class="op">;</span></a></code></pre></div>
<h2 id="polymorphism-a-cool-sounding-word-to-impress-your-friends">Polymorphism: a cool sounding word to impress your friends</h2>
<p>In object-oriented programming, polymorphism means that you can treat a variable as if it were one of its parent types. You’ve already been doing this in JavaScript through its prototypal inheritance. So, just remember its definition for this course. It’s a perennial favored question in interviews:</p>
<p><em>Polymorphism is the ability to treat an object as if it were an instance of one of its parent classes.</em></p>
<h2 id="what-youve-learned">What you’ve learned</h2>
<p>In this reading, you learned about the three pillars of object-oriented programming (encapsulation, inheritance, and polymorphism) and how they relate to JavaScript.</p>
<p>You learned that encapsulation is just all of the details behind an object’s methods.</p>
<p>You learned that inheritance is the ability to gain behavior and data from parent classes.</p>
<p>You learned that polymorphism is just a fancy work for being able to use the methods of a parent class on an object of a child class.</p>
<hr />
<h1 id="the-solid-principles-explained">The SOLID Principles Explained</h1>
<p>The three pillars of object-oriented programming describe <em>how</em> classes and objects work. What they don’t describe are good practices for <em>what</em> should go into a class. That’s the difference between object-oriented programming (pillars) and <em>object-oriented design</em> (SOLID)! That’s where the SOLID Principles come in. “SOLID” is an anagram that stands for</p>
<ul>
<li>The Single-Responsibility Principle</li>
<li>The Open-Close Principle</li>
<li>The Liskov Substitution Principle</li>
<li>The Interface Segregation Principle</li>
<li>The Dependency Inversion Principle</li>
</ul>
<p>Of these five principles, only two are directly applicable to your use of JavaScript (and Python) in this course. Moreover, two are only truly applicable in languages like Java, C++, and C#. This article spends many words explaining the applicable ones and provides a definition for those that are not so applicable in JavaScript (and Python).</p>
<p>It’s really important that you don’t stress out over being able to expertly apply these principles any time in the next three years. Being able to apply them takes practice and experience. You’re getting introduced to them, now, so that you can have the ideas in your brain. With them in your brain, they can influence how you go about writing classes.</p>
<p>But, don’t sit around thinking about the best way to apply these object-oriented design principles. That is <strong>analysis paralysis</strong>! You’ll get stuck and not be able to get out of it. Working code is usually better than no code at all. You can write code and, then, think about it, look at it, and start asking yourself whether it follows these principles. That’s the best way to start out. Don’t worry about applying them to your design <em>before</em> you write any code. That will come with practice.</p>
<h2 id="single-responsibility-principle">Single-Responsibility Principle</h2>
<p><em>A class should do one thing and do it well.</em></p>
<p>Robert C. Martin, otherwise known as “Uncle Bob”, created the SOLID principles. He explains the Single-Responsibility Principle as, “A class should have only one reason to change.” He has also described the way to do it as “Gather together the things that change for the same reasons. Separate those things that change for different reasons.”</p>
<p>This principle is about limiting the impact of change.</p>
<p>A class should have the responsibility to have the data and behavior over a single part of the functionality provided by your software, and that responsibility should be entirely encapsulated by the class.</p>
<p>For example, consider the following class.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb94-1" title="1"><span class="co">// THIS IS BADLY DESIGNED CODE</span></a>
<a class="sourceLine" id="cb94-2" title="2"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb94-3" title="3">  <span class="at">constructor</span> (title<span class="op">,</span> author<span class="op">,</span> pages) <span class="op">{</span></a>
<a class="sourceLine" id="cb94-4" title="4">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb94-5" title="5">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb94-6" title="6">    <span class="kw">this</span>.<span class="at">pages</span> <span class="op">=</span> pages<span class="op">;</span></a>
<a class="sourceLine" id="cb94-7" title="7">    <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb94-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-9" title="9"></a>
<a class="sourceLine" id="cb94-10" title="10">  <span class="at">addPage</span>(page) <span class="op">{</span></a>
<a class="sourceLine" id="cb94-11" title="11">    <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">push</span>(page)<span class="op">;</span></a>
<a class="sourceLine" id="cb94-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-13" title="13"></a>
<a class="sourceLine" id="cb94-14" title="14">  <span class="at">getCurrentPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb94-15" title="15">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">pages</span>[<span class="kw">this</span>.<span class="at">currentPage</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb94-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-17" title="17"></a>
<a class="sourceLine" id="cb94-18" title="18">  <span class="at">turnPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb94-19" title="19">    <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb94-20" title="20">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">&gt;=</span> <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">length</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb94-21" title="21">      <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb94-22" title="22">    <span class="op">}</span></a>
<a class="sourceLine" id="cb94-23" title="23">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-24" title="24"></a>
<a class="sourceLine" id="cb94-25" title="25">  <span class="at">printText</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb94-26" title="26">    <span class="kw">const</span> firstPage <span class="op">=</span> [<span class="kw">this</span>.<span class="at">title</span> <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">author</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb94-27" title="27">    <span class="cf">return</span> <span class="va">firstPage</span>.<span class="at">concat</span>(<span class="kw">this</span>.<span class="at">pages</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb94-28" title="28">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-29" title="29"></a>
<a class="sourceLine" id="cb94-30" title="30">  <span class="at">printHTML</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb94-31" title="31">    <span class="kw">const</span> firstPage <span class="op">=</span> [<span class="vs">`&lt;h1&gt;</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">title</span><span class="sc">}</span><span class="vs">&lt;/h1&gt;`</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb94-32" title="32">    <span class="kw">const</span> htmlPages <span class="op">=</span> <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">map</span>(x <span class="kw">=&gt;</span> <span class="vs">`&lt;section&gt;</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">&lt;/section&gt;`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb94-33" title="33">    <span class="cf">return</span> htmlPages<span class="op">;</span></a>
<a class="sourceLine" id="cb94-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb94-35" title="35"><span class="op">}</span></a></code></pre></div>
<p>What does the book class know about?</p>
<ul>
<li>How to manage the information about a book.</li>
<li>How to print that book to different formats.</li>
</ul>
<p>Think about a book that you would hold in your hand. Which of those two “concerns” does the physical book know <em>nothing</em> about?</p>
<p>If you answered “printing to different formats”, yeah, that’s the one. Printing is a different “concern”, a different set of responsibilities. Instead of having a single <code>Book</code> class that can print itself, following the Single-Responsibility Principle would have you create two classes.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">class</span> Book <span class="op">{</span></a>
<a class="sourceLine" id="cb95-2" title="2">  <span class="at">constructor</span> (title<span class="op">,</span> author<span class="op">,</span> pages) <span class="op">{</span></a>
<a class="sourceLine" id="cb95-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb95-4" title="4">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb95-5" title="5">    <span class="kw">this</span>.<span class="at">pages</span> <span class="op">=</span> pages<span class="op">;</span></a>
<a class="sourceLine" id="cb95-6" title="6">    <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb95-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-8" title="8"></a>
<a class="sourceLine" id="cb95-9" title="9">  <span class="at">addPage</span>(page) <span class="op">{</span></a>
<a class="sourceLine" id="cb95-10" title="10">    <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">push</span>(page)<span class="op">;</span></a>
<a class="sourceLine" id="cb95-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-12" title="12"></a>
<a class="sourceLine" id="cb95-13" title="13">  <span class="at">getCurrentPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb95-14" title="14">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">pages</span>[<span class="kw">this</span>.<span class="at">currentPage</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb95-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-16" title="16"></a>
<a class="sourceLine" id="cb95-17" title="17">  <span class="at">getPrintableUnits</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb95-18" title="18">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">pages</span><span class="op">;</span></a>
<a class="sourceLine" id="cb95-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-20" title="20"></a>
<a class="sourceLine" id="cb95-21" title="21">  <span class="at">turnPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb95-22" title="22">    <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb95-23" title="23">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">&gt;=</span> <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">length</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb95-24" title="24">      <span class="kw">this</span>.<span class="at">currentPage</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">pages</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb95-25" title="25">    <span class="op">}</span></a>
<a class="sourceLine" id="cb95-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-27" title="27"><span class="op">}</span></a>
<a class="sourceLine" id="cb95-28" title="28"></a>
<a class="sourceLine" id="cb95-29" title="29"><span class="kw">class</span> SimplePrinter <span class="op">{</span></a>
<a class="sourceLine" id="cb95-30" title="30">  <span class="at">constructor</span>(printable) <span class="op">{</span></a>
<a class="sourceLine" id="cb95-31" title="31">    <span class="kw">this</span>.<span class="at">printable</span> <span class="op">=</span> printable<span class="op">;</span></a>
<a class="sourceLine" id="cb95-32" title="32">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-33" title="33"></a>
<a class="sourceLine" id="cb95-34" title="34">  <span class="at">printText</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb95-35" title="35">    <span class="kw">const</span> firstPage <span class="op">=</span> [<span class="kw">this</span>.<span class="va">printable</span>.<span class="at">title</span> <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span> <span class="op">+</span> <span class="kw">this</span>.<span class="va">printable</span>.<span class="at">author</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb95-36" title="36">    <span class="cf">return</span> <span class="va">firstPage</span>.<span class="at">concat</span>(<span class="kw">this</span>.<span class="va">printable</span>.<span class="at">pages</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb95-37" title="37">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-38" title="38"></a>
<a class="sourceLine" id="cb95-39" title="39">  <span class="at">printHTML</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb95-40" title="40">    <span class="kw">const</span> firstPage <span class="op">=</span> [<span class="vs">`&lt;h1&gt;</span><span class="sc">${</span><span class="kw">this</span>.<span class="va">printable</span>.<span class="at">title</span><span class="sc">}</span><span class="vs">&lt;/h1&gt;`</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb95-41" title="41">    <span class="kw">const</span> units <span class="op">=</span> <span class="kw">this</span>.<span class="va">printable</span>.<span class="at">getPrintableUnits</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb95-42" title="42">    <span class="kw">const</span> htmlPages <span class="op">=</span> <span class="va">units</span>.<span class="at">map</span>(x <span class="kw">=&gt;</span> <span class="vs">`&lt;section&gt;</span><span class="sc">${</span>x<span class="sc">}</span><span class="vs">&lt;/section&gt;`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb95-43" title="43">    <span class="cf">return</span> <span class="va">firstPage</span>.<span class="at">concat</span>(htmlPages)<span class="op">;</span></a>
<a class="sourceLine" id="cb95-44" title="44">  <span class="op">}</span></a>
<a class="sourceLine" id="cb95-45" title="45"><span class="op">}</span></a></code></pre></div>
<p>Now, you have two things, a <code>Book</code> and a <code>SimplePrinter</code>. The <code>Book</code> now knows all about being a book. The <code>Printer</code> is interested in things that are “printable”. In this case, “printable” means having <code>title</code> and <code>author</code> properties, and a method called <code>getPrintableUnits()</code>, that it can use to turn something into text.</p>
<p>What’s neat about this is that you can now create any other kind of thing that might get printed and, as long as it has a <code>title</code> property, <code>author</code> property, and a method called <code>getPrintableUnits()</code>, the <code>SimplePrinter</code> can handle it! If you now add this <code>Poem</code> class to your program, then the <code>SimplePrinter</code> can print it, too!</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb96-1" title="1"><span class="kw">class</span> Poem <span class="op">{</span></a>
<a class="sourceLine" id="cb96-2" title="2">  <span class="at">constructor</span> (title<span class="op">,</span> author<span class="op">,</span> lines) <span class="op">{</span></a>
<a class="sourceLine" id="cb96-3" title="3">    <span class="kw">this</span>.<span class="at">title</span> <span class="op">=</span> title<span class="op">;</span></a>
<a class="sourceLine" id="cb96-4" title="4">    <span class="kw">this</span>.<span class="at">author</span> <span class="op">=</span> author<span class="op">;</span></a>
<a class="sourceLine" id="cb96-5" title="5">    <span class="kw">this</span>.<span class="at">lines</span> <span class="op">=</span> lines<span class="op">;</span></a>
<a class="sourceLine" id="cb96-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb96-7" title="7"></a>
<a class="sourceLine" id="cb96-8" title="8">  <span class="at">addLine</span>(line) <span class="op">{</span></a>
<a class="sourceLine" id="cb96-9" title="9">    <span class="kw">this</span>.<span class="va">lines</span>.<span class="at">push</span>(line)<span class="op">;</span></a>
<a class="sourceLine" id="cb96-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb96-11" title="11"></a>
<a class="sourceLine" id="cb96-12" title="12">  <span class="at">getPrintableUnits</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb96-13" title="13">    <span class="cf">return</span> [<span class="kw">this</span>.<span class="va">lines</span>.<span class="at">join</span>(<span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>)]<span class="op">;</span></a>
<a class="sourceLine" id="cb96-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb96-15" title="15"><span class="op">}</span></a></code></pre></div>
<h2 id="the-liskov-substitution-principle">The Liskov Substitution Principle</h2>
<p>This principle is named after Barbara Liskov, a computer scientist of some renown from MIT. It has a very mathematical definition that you can now read. However, if it doesn’t make any sense, don’t worry. You’ll get an easy-to-understand definition after this one.</p>
<blockquote>
<p><strong>Subtype Requirement</strong>: Let <em>ϕ(x)</em> be a property provable about objects <em>x</em> of type <strong>T</strong>. Then <em>ϕ(y)</em> should be true for objects <em>y</em> of type <strong>S</strong> where <strong>S</strong> is a subtype of <strong>T</strong>.</p>
</blockquote>
<p>Boy, if you’re ever asked about the Liskov Substitution Principle in an interview (or a party) and you can rattle off that definition followed by an explanation, you’re going to impress the heck out of the interviewer (or your party mates)! What that means is this.</p>
<blockquote>
<p><em>You can substitute child class objects for parent class objects and not cause errors.</em></p>
</blockquote>
<p>All this means is that if you have a class with a method on it, any child class that overrides that method must not do something unexpected. For example, let’s say you have the following class in JavaScript.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb97-1" title="1"><span class="kw">class</span> Dog <span class="op">{</span></a>
<a class="sourceLine" id="cb97-2" title="2">  <span class="at">speak</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb97-3" title="3">    <span class="cf">return</span> <span class="st">&quot;woof!&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb97-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb97-5" title="5"></a>
<a class="sourceLine" id="cb97-6" title="6">  <span class="co">/* other code about dogs */</span></a>
<a class="sourceLine" id="cb97-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Any instance of <code>Dog</code> will be able to say “woof!” Now, chihuahuas have a different vocabulary.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb98-1" title="1"><span class="kw">class</span> Chihuahua <span class="kw">extends</span> Dog <span class="op">{</span></a>
<a class="sourceLine" id="cb98-2" title="2">  <span class="at">speak</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb98-3" title="3">    <span class="cf">return</span> <span class="st">&quot;yip!&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb98-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb98-5" title="5"></a>
<a class="sourceLine" id="cb98-6" title="6">  <span class="co">/* other code about chihuahuas */</span></a>
<a class="sourceLine" id="cb98-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>What you can’t do is create something like the following.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">class</span> Shitzu <span class="kw">extends</span> Dog <span class="op">{</span></a>
<a class="sourceLine" id="cb99-2" title="2">  <span class="at">speak</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb99-3" title="3">    <span class="kw">const</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb99-4" title="4">    <span class="va">fs</span>.<span class="at">unlink</span>(<span class="st">&#39;~/.bash_profile&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb99-5" title="5">    <span class="cf">return</span> <span class="st">&quot;YOU&#39;RE PWNED!&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb99-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb99-7" title="7"></a>
<a class="sourceLine" id="cb99-8" title="8">  <span class="co">/* other code about shitzus */</span></a>
<a class="sourceLine" id="cb99-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>That would delete the profile for the Bash shell of the person who is running your program! The speak method should have no side effects as defined by the <code>Dog</code> class. The fact that a child class, <code>Shitzu</code>, will delete files when the <code>speak</code> method is called is ludicrous.</p>
<p>The methods that you override in child classes <em>must</em> match the intent of the methods found on the parent classes.</p>
<h2 id="the-other-principles">The other principles</h2>
<p>These other three principles, as mentioned, are important for languages that have <em>static typing</em>. That means a variable can have only one kind of thing in it. In JavaScript, you have no such restriction. In JavaScript, you can declare a variable, assign a string to it, then a number, then a date. That’s amazing!</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb100-1" title="1"><span class="kw">let</span> value <span class="op">=</span> <span class="st">&quot;Hello, Programmer!&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb100-2" title="2">value <span class="op">=</span> <span class="fl">6.28</span><span class="op">;</span></a>
<a class="sourceLine" id="cb100-3" title="3">value <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">;</span></a></code></pre></div>
<p>In languages like Java, C++, and C#, you have to specify the kind of data type you want to store in the variable. Then, only that kind (or instances of child classes through polymorphism) can be stored in those variables. The following code in C++ does not compile and reports errors.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb101-1" title="1"><span class="co">// THIS IS ERROR-FILLED CODE</span></a>
<a class="sourceLine" id="cb101-2" title="2"><span class="bu">std::</span>string value = <span class="st">&quot;Hello, Programmer!&quot;</span>;</a>
<a class="sourceLine" id="cb101-3" title="3">value = <span class="fl">6.28</span>; <span class="co">// ERROR: Cannot assign a float to</span></a>
<a class="sourceLine" id="cb101-4" title="4">              <span class="co">// a variable of type std::string.</span></a></code></pre></div>
<p>In those worlds, these other principles have much more applicability. Again, just memorize their names and definitions.</p>
<ul>
<li><strong>Open-Close Principle</strong> means that a class is <em>open for extension and closed for modification</em>. It means that creating new functionality can happen in child classes and not the original class.</li>
<li><strong>Interface Segregation Principle</strong> means that method names should be grouped together into granular collections called “interfaces”.</li>
<li><strong>Dependency Inversion Principle</strong> means that functionality that your class depends on should be provided as parameters to methods rather than using <code>new</code> in the class to create a new instance.</li>
</ul>
<h2 id="what-you-learned-4">What you learned</h2>
<p>In this article, you learned a lot about the Single-Responsibility Principle (SRP) and the Liskov Substitution Principle (LSP). You then learned some definitions for the other three SOLID principles. You can start applying the SRP and LSP in all of your code!</p>
<hr />
<h1 id="controlling-coupling-with-the-law-of-demeter">Controlling Coupling With The Law Of Demeter</h1>
<p>To reduce the complexity of the software that you write, you should try to reduce what is known as the “coupling” of the classes in your source code. In this section, you will learn about the Law of Demeter, a way to help reduce coupling in your software. Then, you will learn about when you can ignore the Law of Demeter altogether.</p>
<h2 id="coupling">Coupling</h2>
<p>For the purposes of this article, coupling is defined as “the degree of interdependence between two or more classes,” not the award-winning British TV show.</p>
<p>To reduce coupling, you must reduce how many other classes must know about to do their job. A caller method is not coupled with all of the inner dependencies. It is only coupled with one object. Using this principle you can also change a class without affecting others. This is an improvement to the way that encapsulation helps you.</p>
<p>The fewer the connections between classes, the less chance there is for the <em>ripple effect</em>. Ideally, changing the implementation of a class should not require a change in another class. If it does, that means a class must understand the details of a class on which it doesn’t directly depend. This is known as the <em>principle of locality</em>.</p>
<h2 id="the-formal-definition">The formal definition</h2>
<p>The definition of the Law of Demeter is as follows.</p>
<p>A method of an object can only invoke the methods (or use the properties) of the following kinds of objects:</p>
<ul>
<li>Methods on the object itself</li>
<li>Any of the objects passed in as parameters to the method</li>
<li>And object created in the method</li>
<li>Any values stored in the instance variables of the object</li>
<li>Any values stored in global variables</li>
</ul>
<h2 id="practical-advice">Practical advice</h2>
<p>The Law of Demeter is more of a guideline than a principle to help reduce coupling between components. The easiest way to comply with the Law of Demeter is <em>don’t use more than one dot (not counting the one after “this”)</em>. For example, the following code breaks the Law of Demeter.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb102-1" title="1"><span class="co">// THIS CODE BREAKS THE LAW OF DEMETER</span></a>
<a class="sourceLine" id="cb102-2" title="2"><span class="kw">class</span> Airplane <span class="op">{</span></a>
<a class="sourceLine" id="cb102-3" title="3">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb102-4" title="4">    <span class="kw">this</span>.<span class="at">engine</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">PropEngine</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb102-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb102-6" title="6"></a>
<a class="sourceLine" id="cb102-7" title="7">  <span class="at">takeOff</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb102-8" title="8">    <span class="co">// this.engine is a value stored in an instance variable</span></a>
<a class="sourceLine" id="cb102-9" title="9">    <span class="kw">this</span>.<span class="va">engine</span>.<span class="at">getThrottle</span>().<span class="at">open</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb102-10" title="10">    <span class="co">// two dots^     and     ^</span></a>
<a class="sourceLine" id="cb102-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb102-12" title="12"><span class="op">}</span></a>
<a class="sourceLine" id="cb102-13" title="13"></a>
<a class="sourceLine" id="cb102-14" title="14"><span class="kw">class</span> PropEngine <span class="op">{</span></a>
<a class="sourceLine" id="cb102-15" title="15">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb102-16" title="16">    <span class="kw">this</span>.<span class="at">throttle</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">Throttle</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb102-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb102-18" title="18"></a>
<a class="sourceLine" id="cb102-19" title="19">  <span class="at">getThrottle</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb102-20" title="20">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">throttle</span><span class="op">;</span></a>
<a class="sourceLine" id="cb102-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb102-22" title="22"><span class="op">}</span></a>
<a class="sourceLine" id="cb102-23" title="23"></a>
<a class="sourceLine" id="cb102-24" title="24"><span class="kw">class</span> Throttle <span class="op">{</span></a>
<a class="sourceLine" id="cb102-25" title="25">  <span class="at">open</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb102-26" title="26">    <span class="cf">return</span> <span class="st">&quot;VROOOOM&quot;</span><span class="op">!;</span></a>
<a class="sourceLine" id="cb102-27" title="27">  <span class="op">}</span></a>
<a class="sourceLine" id="cb102-28" title="28"><span class="op">}</span></a></code></pre></div>
<p>That code breaks the Law of Demeter because it uses two dots to get its work done, the first between <code>engine</code> and <code>getThrottle()</code> and the second between <code>getThrottle()</code> and <code>open()</code>.</p>
<p>The <code>Airplane</code> class is now coupled to the <code>PropEngine</code> class. Assume that the <code>getThrottle()</code> method of the <code>PropEngine</code> class returns a <code>Throttle</code> object that has the <code>open</code> method on it. Now, the <code>Airplane</code> class need to know about <strong>two classes</strong>, that is, the <code>PropEngine</code> class and the <code>Throttle</code> class. It should only know about the one that it created, the <code>PropEngine</code> class.</p>
<p>Instead, you should change the way the engine works.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">class</span> Airplane <span class="op">{</span></a>
<a class="sourceLine" id="cb103-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb103-3" title="3">    <span class="kw">this</span>.<span class="at">engine</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">PropEngine</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb103-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb103-5" title="5"></a>
<a class="sourceLine" id="cb103-6" title="6">  <span class="at">takeOff</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb103-7" title="7">    <span class="kw">this</span>.<span class="va">engine</span>.<span class="at">openThrottle</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb103-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb103-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb103-10" title="10"></a>
<a class="sourceLine" id="cb103-11" title="11"><span class="kw">class</span> PropEngine <span class="op">{</span></a>
<a class="sourceLine" id="cb103-12" title="12">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb103-13" title="13">    <span class="kw">this</span>.<span class="at">throttle</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">Throttle</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb103-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb103-15" title="15"></a>
<a class="sourceLine" id="cb103-16" title="16">  <span class="at">openThrottle</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb103-17" title="17">    <span class="cf">return</span> <span class="kw">this</span>.<span class="va">throttle</span>.<span class="at">open</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb103-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb103-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb103-20" title="20"></a>
<a class="sourceLine" id="cb103-21" title="21"><span class="kw">class</span> Throttle <span class="op">{</span></a>
<a class="sourceLine" id="cb103-22" title="22">  <span class="at">open</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb103-23" title="23">    <span class="cf">return</span> <span class="st">&quot;VROOOOM&quot;</span><span class="op">!;</span></a>
<a class="sourceLine" id="cb103-24" title="24">  <span class="op">}</span></a>
<a class="sourceLine" id="cb103-25" title="25"><span class="op">}</span></a></code></pre></div>
<p>This reduces the <em>coupling</em> of <code>Airplane</code>. It now only depends on the <code>PropEngine</code> class, now.</p>
<p>An important thing to notice here is that the <code>Airplane</code> is now “telling” and not “asking”. You’ll often hear that in object-oriented programming, “tell, don’t ask”.</p>
<p>In the previous version, the <code>takeOff</code> method <em>asked</em> for the engine’s <code>Throttle</code> object using the <code>getThrottle()</code> method. Then, it told the <code>Throttle</code> object to open. In the better version, the <code>takeOff</code> method simple <em>tells</em> the engine to <code>openThrottle</code> and let’s the engine figure out how to do that.</p>
<h2 id="you-cant-cheat-the-law">You can’t cheat the Law</h2>
<p>Separating calls onto different lines <em>DOES NOT</em> get around the Law of Demeter. You can’t cheat. Here’s the earlier code but with a different body for the <code>takeOff</code> method.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb104-1" title="1"><span class="co">// THIS CODE BREAKS THE LAW OF DEMETER</span></a>
<a class="sourceLine" id="cb104-2" title="2"><span class="kw">class</span> Airplane <span class="op">{</span></a>
<a class="sourceLine" id="cb104-3" title="3">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb104-4" title="4">    <span class="kw">this</span>.<span class="at">engine</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">PropEngine</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb104-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb104-6" title="6"></a>
<a class="sourceLine" id="cb104-7" title="7">  <span class="at">takeOff</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb104-8" title="8">    <span class="kw">const</span> engine <span class="op">=</span> <span class="kw">this</span>.<span class="at">engine</span><span class="op">;</span> <span class="co">// This is the PropEngine</span></a>
<a class="sourceLine" id="cb104-9" title="9">    <span class="kw">const</span> throttle <span class="op">=</span> <span class="va">engine</span>.<span class="at">getThrottle</span>()<span class="op">;</span> <span class="co">// This is a Throttle</span></a>
<a class="sourceLine" id="cb104-10" title="10">    <span class="va">throttle</span>.<span class="at">open</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb104-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb104-12" title="12"><span class="op">}</span></a></code></pre></div>
<p>Sure, it <em>looks</em> like there’s only one dot per line. But, the Law of Demeter is really about a class knowing about other classes. It still has to know that there is an <code>open</code> method on the <code>Throttle</code> class to do it’s work. So, even though it doesn’t break the “one dot” rule, it breaks the stricter definition of the Law of Demeter which is that it is calling a method (<code>open</code>) on an object <code>throttle</code> that doesn’t match any of the five conditions of the definition.</p>
<h2 id="when-to-ignore-the-law-of-demeter">When to ignore the Law of Demeter</h2>
<p>When you’re working with objects that come from code that you didn’t create, you often have to break the Law of Demeter. Hopefully, the other code doesn’t change often (or ever)!</p>
<p>For example, here’s some code that you might see in a Web application.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb105-1" title="1">document</a>
<a class="sourceLine" id="cb105-2" title="2">  .<span class="at">getElementById</span>(<span class="st">&#39;that-link&#39;</span>)</a>
<a class="sourceLine" id="cb105-3" title="3">  .<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> e <span class="kw">=&gt;</span> <span class="va">e</span>.<span class="at">preventDefault</span>())<span class="op">;</span></a></code></pre></div>
<p>That’s an obvious violation of the Law of Demeter. Your code must know the details of the HTMLDocumentElement and HTMLLinkElement objects. But, there’s no way around it because you <em>have</em> to use the API provided by the DOM from the browser.</p>
<p>So, if you don’t own the code, and there’s no way for you to get the job done without more than one dot, just dot it up!</p>
<h2 id="when-else-should-you-ignore-the-law-of-demeter">When else should you ignore the Law of Demeter?</h2>
<p>We try very hard to decouple things. The things that are nearly impossible to prevent tight coupling with are the visualizations of our program. The user interface (UI) that people see <em>has</em> to know about the structure of the data. Because of that, it is normal to have UIs that break the Law of Demeter all over the place.</p>
<p>UIs are a special thing. They break all kinds of rules because UIs are <em>not object-oriented concepts</em>. Their components may be objects, like the <em>HTMLDivElement</em> object in the DOM that lets you interact with a <code>div</code> element in JavaScript. Using that <em>thing</em> is object-oriented. However, the way that you go about bridging between the state of your application to the visualiation is <em>not</em> object-oriented.</p>
<p>Go ahead and couple those views to your models. This is just the normal price of software development.</p>
<p>(Lots of very smart people have tried to come up with ways to decouple views and the objects that make up software. No one has really created a satisfactory solution.)</p>
<h2 id="what-youve-learned-1">What you’ve learned</h2>
<p>You learned that the Law of Demeter is a way to reduce coupling by following the “one dot” rule, otherwise known as the “don’t talk to strangers” rule. You also know, now, that it’s practical to break that law when you have to rely on other people’s code.</p>
<hr />
<h1 id="oops-i-forgot-a-thing-project">OOPS! I Forgot A Thing Project</h1>
<p>“You’d forget your head if it weren’t attached!” You don’t need to worry anymore! This to-do item manager will keep track of the stuff you just can’t forget.</p>
<p>In this project, you will work to put your object-oriented knowledge to work by creating a To-Do application list. This is harder than it sounds because you’re going to support more than one kind of to-do item! As a friend of mine is fond of saying, “just kindly do the needful” to reinforce these OO ideas.</p>
<p>There’s a starter repository available for you at <a href="https://github.com/appacademy-starters/oop-task-manager-cli">To-Do Item Command Line Utility</a> if you want to only do the modeling of the to-do items and application state.</p>
<p>You can also decide to do it all on your own and make each screen its own class. That’s the funnest, but it will take a long while. You could always start on this path and, if it gets to be too much, use the starter repository.</p>
<h2 id="interacting-with-your-to-do-list">Interacting with your to-do-list</h2>
<p>In this, please write a command-line application that uses the built-in <code>readline</code> (or similar <a href="https://www.npmjs.com">npm</a>-based package) to support the following application flow. Use the built-in <code>fs</code> (or similar <a href="https://www.npmjs.com">npm</a>-based package) to support the saving of to-do items to disk. Use <a href="https://github.com/chalk/chalk">chalk</a> if you want to have fancy colors.</p>
<p>Between each screen, you should clear the console.</p>
<p>In each of the screen mockups below, the underscore indicates the place where the person will start typing their answer.</p>
<figure>
<img src="images/oops-i-forgot-solution.gif" alt="example solution" /><figcaption>example solution</figcaption>
</figure>
<h3 id="main-menu">Main menu</h3>
<p>This is the screen that appears when you first run the program. When someone types a “1” and hits enter, it will take them to the <strong>to-do items list</strong>. When someone types “2” and hits enter, it takes them to the <strong>search screen</strong>. When someone types “3” and hits enter, it takes them to the <strong>category management</strong> screen. When someone types “X” and hits enter, it cleanly exits your program. If the user types something that doesn’t match the options, have it reprint this same screen.</p>
<pre><code>********************************************
* TO-DO FOR YOU!!!!!            (c) 1987   *
********************************************

Please choose one of the following options:
1. Review my to-do items
2. Search for a to-do item
3. Manage categories

X. Exit

Type a number to go to another screen. Type
an X to return to the main menu.

&gt; _</code></pre>
<h3 id="category-management">Category management</h3>
<p>Support the ability to categorize your to-do items. When someone chooses “3” from the main screen, they should get this page. Support up to five categories and no more.If the user types something that doesn’t match the options, have it reprint this same screen.</p>
<pre><code>********************************************
* CATEGORIES                    (c) 1987   *
********************************************

1. Category 1
2. Category 2
3. Category 3
4. Category 4
5. Category 5

X. Go to main screen

Type a number to edit a category. Type an X
to return to the main menu.

&gt; _</code></pre>
<h3 id="editing-a-category">Editing a category</h3>
<p>When someone selects a category on the last screen, it will bring them to this screen that will allow someone to rename a category. Limit the category name to 30 characters. If someone types more than 30 characters, it’s up to you to determine how to handle that. After someone successfully submits a new category name, have it return the <strong>Category management</strong> screen.</p>
<pre><code>********************************************
* EDIT CATEGORY                 (c) 1987   *
********************************************

You are editing &quot;Category 2&quot;.

What would you like to rename it? Hit
&quot;Enter&quot; when you are done.

&gt; _
</code></pre>
<h3 id="to-do-item-search-screen">To-do item search screen</h3>
<p>When someone is here, they can type a search term to search the to-do items’ text values. If a to-do item has more than one text field, then search by any of them. Category names should not be text fields. When someone types a value and hits enter, it goes to the <strong>search results screen</strong>.</p>
<pre><code>********************************************
* SEARCH ITEMS                  (c) 1987   *
********************************************

Please type your search term and hit Enter.

&gt; _
</code></pre>
<h3 id="to-do-item-search-results">To-do item search results</h3>
<p>Here you can see the to-do items that matched your search result. Determine how many rows are in the console (you can use <code>process.stdout.rows</code> to get the number), subtract eight for the non-item text, and print up to that many tasks. When the person hits the “Enter” key, it will return to the <strong>main screen</strong>.</p>
<pre><code>********************************************
* SEARCH RESULTS                (c) 1987   *
********************************************

Your search matches:

1. Item 1
2. Item 2
3. Item 3

Press Enter to return to the main screen. _</code></pre>
<h3 id="to-do-items-list">To-do items list</h3>
<p>Here you can see a number of to-do items that will fit in the console (you can use <code>process.stdout.rows</code> to get the number). If a person types “X” and hits “Enter”, it will take them to the <strong>main screen</strong>. If a person types a number of a task and hits “Enter”, it will take them to the <strong>to-do item detail screen</strong>. If as person types an “A”, it will take them to the <strong>to-do item create screen</strong>.</p>
<p><strong>This screen should only show tasks that are not completed!</strong></p>
<p>If it’s a <em>Note</em>, show only the first 70 characters of the value. If it’s a <em>Task</em>, show the first 70 characters of the title.</p>
<pre><code>********************************************
* TO-DO ITEMS                   (c) 1987   *
********************************************

1. Item 1
2. Item 2
3. Item 3

A. Add a new item
X. Return to main menu

&gt; _</code></pre>
<h3 id="to-do-item-detail-screen">To-do item detail screen</h3>
<p>Depending on the type of to-do item (see below for the two different types), you will see one of the following screens.</p>
<pre><code>********************************************
* TO-DO ITEM (NOTE)             (c) 1987   *
********************************************

This is a note to myself to do a thing.

Type &quot;C&quot; and hit &quot;Enter&quot; to complete this
task and return to the list screen. Just
hit &quot;Enter&quot; to return to the list screen.

&gt; _</code></pre>
<pre><code>********************************************
* TO-DO ITEM (TASK)             (c) 1987   *
********************************************

TITLE: Do that thing
CATEGORY: Category 1
DESCRIPTION
You know that thing you want to do? You
really should do it, you know? Before time
runs out on you.

Type &quot;C&quot; and hit &quot;Enter&quot; to complete this
task and return to the list screen. Just
hit &quot;Enter&quot; to return to the list screen.

&gt; _</code></pre>
<h3 id="to-do-item-create-screen">To-do item create screen</h3>
<p>When someone comes to this screen, they have a choice to create a <em>Note</em> or a <em>Task</em>. After they choose that, the appropriate prompts are given to them.</p>
<pre><code>********************************************
* CREATE AN ITEM                (c) 1987   *
********************************************

What kind of to-do item do you want to
create?

1. Note
2. Task

Type the number and hit &quot;Enter&quot;.

&gt; _</code></pre>
<h4 id="create-a-note">Create a note</h4>
<pre><code>********************************************
* CREATE A NOTE                 (c) 1987   *
********************************************

(Type your text and hit &quot;Enter&quot; to return to
the to-do list screen, 300 characters max.)

What is the note?

&gt; _</code></pre>
<h4 id="create-a-task---step-1">Create a task - step 1</h4>
<pre><code>********************************************
* CREATE A TASK                 (c) 1987   *
********************************************

What is the title?

&gt; _</code></pre>
<h4 id="create-a-task---step-2">Create a task - step 2</h4>
<pre><code>********************************************
* CREATE A TASK                 (c) 1987   *
********************************************

TITLE: This is the title

What is the category?

1. Category 1
2. Category 2
3. Category 3
4. Category 4
5. Category 5

&gt; _</code></pre>
<h4 id="create-a-task---step-3">Create a task - step 3</h4>
<pre><code>********************************************
* CREATE A TASK                 (c) 1987   *
********************************************

TITLE: This is the title
CATEGORY: Category 3

(Type your text and hit &quot;Enter&quot; to return to
the to-do list screen, 300 characters max.)

What is the description?

&gt; _</code></pre>
<p>And, this will complete creating the task.</p>
<h2 id="modeling-your-application">Modeling your application</h2>
<p>Use object-oriented design principles to model the following:</p>
<ul>
<li>Each screen should be an object that has a method that allows it to print to the console and handle input.</li>
<li>Each kind of to-do item should be its own thing:
<ul>
<li><em>Note</em>: Just a simple text-based item</li>
<li><em>Task</em>: An item that has a name, description, and category</li>
</ul></li>
<li>All to-do items have a “completed” property on them</li>
<li>Searches should search the text of the <em>Note</em> objects, and the name and description of the <em>Task</em> objects. Think about implementing a <code>matches(text)</code> method that returns <code>true</code> if the to-do item contains the provided text.</li>
<li>When the application loads, it should restore the state of the application, that is, the to-do items and categories that are saved on the filesystem.</li>
<li>Whenever a person makes a change to the data (creating a new item, renaming a category, finishing a to-do item, etc.), the application should save the data to the filesystem.</li>
<li>The default category names are:
<ul>
<li>Category 1</li>
<li>Category 2</li>
<li>Category 3</li>
<li>Category 4</li>
<li>Category 5</li>
</ul></li>
</ul>
<h2 id="stretch-goal">Stretch goal</h2>
<p>On your items list, constrain the number of tasks show to fit in the screen and add a “Continue” option.</p>
<pre><code>********************************************
* TO-DO ITEMS                   (c) 1987   *
********************************************

1. Item 1
2. Item 2
3. Item 3

A. Add a new item
X. Return to main menu
C. Continue

&gt; _</code></pre>
<p>Subtract ten for the non-item text, and print up to that many tasks. If a person types “C” and hits “Enter”, it will show the next number of to-do items that will fit in the console (assuming there are any).</p>
<p>For example, if someone has 19 unfinished tasks in their application and this screen can show 10 at a time, then when they come to this list, it will show the first 10. If the person types “C” and hits “Enter”, then they will see the next nine items (numbered 1 - 9, 11 - 19, however you want to number them, you decide).</p>
