<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" href="./prism.css">
<script async defer src="./prism.js"></script>
</head>
<body>;
<h1 id="tutorial-make-a-google-powered-shopping-search-website">Tutorial: Make a Google Powered Shopping Search Website</h1>
<blockquote>
<p>In this tutorial, we will be making a simple product search engine using jQuery, PHP and Google’s Shopping Search API.</p>
</blockquote>
<p>In this tutorial, we will be making a simple product search engine. Using jQuery and PHP, we will tap into <a href="https://developers.google.com/shopping-search/">Google’s Shopping Search API</a> and return a list of items available for purchase, along with prices, photos and other useful information. The Shopping Search API gives us direct access to Google’s large database of products and prices, obtained from partnering online stores. Another benefit to using this service, is that products are automatically ranked and filtered for us behind the scenes to better match with the user’s search query.</p>
<blockquote>
<p><strong>Important update:</strong> Google have revoked API access for this application, citing that it doesn’t comply with their TOS. This means that the demo won’t work any longer and that, unfortunately, there is nothing we can do about it. However, the tutorial will be left online, as it shows techniques and code that a lot of you would find useful. Only keep in mind that you should integrate the shopping API as a part of your services, and not make it central, as this case, otherwise it could get banned.</p>
</blockquote>
<p>Let’s start coding!</p>
<h2 id="the-html">The HTML</h2>
<p>The first step, as usual, is to lay down the HTML layout of the page. We will be making use of a simple HTML5 document, which you can see below:</p>
<h3 id="index.html">index.html</h3>
<p>&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=“utf-8" /&gt; &lt;title&gt;Google Product Search |
  Tutorialzine Demo&lt;/title&gt;</p>
<pre><code>    &lt;link rel\=&quot;stylesheet&quot; href\=&quot;http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700&quot; /&gt;
    &lt;link rel\=&quot;stylesheet&quot; href\=&quot;assets/css/styles.css&quot; /&gt;


&lt;/head\&gt;

&lt;body\&gt;

    &lt;header\&gt;
        &lt;h1\&gt;Product Search&lt;/h1\&gt;

        &lt;form action\=&quot;&quot; method\=&quot;get&quot;\&gt;
            &lt;input type\=&quot;text&quot; id\=&quot;q&quot; name\=&quot;q&quot; placeholder\=&quot;what do you want to buy?&quot; /&gt;
            &lt;img id\=&quot;preload&quot; alt\=&quot;preload&quot; src\=&quot;assets/img/325.gif&quot;/&gt;
        &lt;/form\&gt;

        &lt;h2\&gt;Powered by &lt;b\&gt;Google&lt;/b\&gt;&lt;/h2\&gt;
    &lt;/header\&gt;

    &lt;section id\=&quot;products&quot;\&gt;
        
    &lt;/section\&gt;

    &lt;p id\=&quot;message&quot;\&gt;
        
    &lt;/p\&gt;


    &lt;script src\=&quot;http://code.jquery.com/jquery-1.8.2.min.js&quot;\&gt;&lt;/script\&gt;
    &lt;script src\=&quot;assets/js/script.js&quot;\&gt;&lt;/script\&gt;

&lt;/body\&gt;</code></pre>
<p>&lt;/html&gt;</p>
<p>Nothing too exciting is going on here. We have a form containing of single text field, the <strong>products</strong> section, which will hold the shopping items, and a <strong>message</strong> that is shown when nothing is found. And here is the markup of a shopping list item (it will be generated by jQuery depending on the result of the api call):</p>
<p>&lt;a class=“product" data-price=“$73.99" href=“http://ebay.com/…" target=“_blank"&gt; &lt;img alt=“eBay" src=“http://i.ebayimg.com/.." /&gt; &lt;span&gt;eBay&lt;/span&gt; &lt;/a&gt;</p>
<p>Once we have this in place, we can now continue with generating our Google API key.</p>
<h2 id="obtaining-a-google-api-key">Obtaining a Google API Key</h2>
<p>Google offers its API for free, but we have to generate a unique key for our app in order to use it. This helps them track usage and authenticate each request. We have done this before, when we were building a <a href="https://tutorialzine.com/2012/08/build-a-one-click-registration-form-powered-by-google/">one-click registration form with Google</a>, and it isn’t much different this time. What you need to do is visit Google’s API Console and set up a new project, next activate the Search API for Shopping; this will give you an API key that we will use in the next section (<a href="https://developers.google.com/shopping-search/v1/getting_started#getting-started">read here for more details on the steps</a>).</p>
<p>Note that Google imposes limits on the number of API requests per key. The shopping search api allows only 2.5k requests per day for free, so if you are planning to do something serious with it, you will probably have to pay.</p>
<p><a href="https://demo.tutorialzine.com/2012/11/google-product-search/"><img src="https://tutorialzine.com/media/2012/11/product-search.jpg" alt="product-search.jpg" /></a></p>
<h2 id="writing-the-proxy">Writing the Proxy</h2>
<p>In order to communicate securely, and to keep your API key private, we will have to route our requests through a PHP script on the server. Although the API returns JSON formatted data, we can not use it directly from JavaScript without exposing our key (and without violating the same origin policy for that matter).</p>
<p>This PHP script, or proxy, is pretty straightforward:</p>
<h3 id="proxy.php">proxy.php</h3>
<p>$key = ‘YOUR API KEY GOES HERE’;</p>
<p>if (<span class="math inline">$\_SERVER\['REQUEST\_METHOD'\] === 'POST' &amp;&amp; isset($</span>_POST[‘search’])) {</p>
<pre><code>$search = urlencode($\_POST\[&#39;search&#39;\]);
$url = &#39;https://www.googleapis.com/shopping/search/v1/public/products?key=&#39; . $key . &#39;&amp;country=US&amp;q=&#39; . $search . &#39;&amp;maxResults=24&#39;;

echo file\_get\_contents($url);</code></pre>
<p>}</p>
<p>The script takes its input from $_POST, encodes it, and sends it to Google, printing the result.</p>
<h2 id="the-jquery-code">The jQuery Code</h2>
<p>Now that we have everything in place, we can proceed with writing the jQuery code that will drive our shopping search engine:</p>
<h3 id="assetsjsscript.js">assets/js/script.js</h3>
<p>$(document).ready(function(){</p>
<pre><code>var saveTimer,
    searchBox = $(&#39;#q&#39;),
    products =  $(&#39;#products&#39;),
    message = $(&#39;#message&#39;),
    preloader = $(&#39;#preload&#39;);

preloader.css(&#39;visibility&#39;,&#39;hidden&#39;);

searchBox.on(&#39;input&#39;,function(e){



    clearTimeout(saveTimer);


    if($.trim(searchBox.val()).length &gt; 0) {
        saveTimer = setTimeout(ajaxProductsSearch, 2000);
    }
});

$(&#39;form&#39;).submit(function(e){
    e.preventDefault();

    if($.trim(searchBox.val()).length &gt; 0) {
        clearTimeout(saveTimer);
        ajaxProductsSearch();
    }
});

function ajaxProductsSearch(){

    products.empty();
    preloader.css(&#39;visibility&#39;,&#39;visible&#39;)


    $.post(&#39;proxy.php&#39;, {
        &#39;search&#39; : searchBox.val()
    },
    function(data) {

        if(data.totalItems == 0){

            preloader.css(&#39;visibility&#39;,&#39;hidden&#39;);
            message.html(&quot;We couldn&#39;t find anything!&quot;).show();
            return false;
        }

        $.each(data.items, function(i, item){

            var html = &#39; &lt;a class=&quot;product&quot; data-price=&quot;$ &#39;+item.product.inventories\[0\]\[&#39;price&#39;\]+&#39;&quot; href=&quot;&#39;+item.product\[&#39;link&#39;\]+&#39;&quot; target=&quot;\_blank&quot;&gt;&#39;;


            if(item.product.images &amp;&amp; item.product.images.length &gt; 0){
                html += &#39;&lt;img alt=&quot;&#39;+item.product.author\[&#39;name&#39;\]+&#39;&quot; src=&quot;&#39;\+ item.product.images\[0\]\[&#39;link&#39;\]+&#39;&quot;/&gt;&#39;;
            }

            html+=&#39;&lt;span&gt;&#39;+item.product.author\[&#39;name&#39;\].substr(0, 20)+&#39;&lt;/span&gt;&lt;/a&gt; &#39;;

            products.append(html);
        });

        preloader.css(&#39;visibility&#39;,&#39;hidden&#39;);

    },&#39;json&#39;);
}</code></pre>
<p>});</p>
<p>I am using the same timeout trick that we used in the <a href="https://tutorialzine.com/2012/09/simple-note-taking-app-ajax/" title="Let’s Make A Simple AJAX Note Taking App">AJAX notes tutorial</a> a few weeks ago. By setting a timeout two seconds in the future and clearing it on every key press, we are able to run the search only when the user has stopped typing.</p>
<p><strong>With this our product search website is complete!</strong></p>
<h2 id="its-a-wrap">It’s a wrap!</h2>
<p>You can use the product search API to enhance your existing web app with relevant products that will be of interest to your visitors. The API gives you much more functionality than what is shown here - you can filter, sort and group results, apply spell checking and display statistics. You can even take part in google’s affiliate network and earn real money from your application.</p>
<h6 id="bootstrap-studio"><strong>Bootstrap Studio</strong></h6>
<p>The revolutionary web design tool for creating responsive websites and apps.</p>
<p><a href="#">Learn more</a></p>
<p><a href="https://tutorialzine.com/2012/11/google-product-search">Source</a></p>
</body></html>
