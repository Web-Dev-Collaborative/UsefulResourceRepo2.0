<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/java-package.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:22 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Deploy Java Lambda functions with .zip or JAR file archives - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="java-package" />
      <meta name="default_state" content="java-package" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="java-package.html" />
      <meta name="description" content="This page describes how to create your deployment package as a .zip file or Jar file, and then use the deployment package to deploy your function code to AWS Lambda using the AWS Command Line Interface (AWS CLI)." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Deploy Java Lambda functions with .zip or JAR file archives - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#java-package" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/java-package.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/java-package.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/java-package.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/java-package.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#java-package" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/java-package.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#java-package-prereqs">Prerequisites</a><a href="#java-package-libraries">Tools and libraries</a><a href="#java-package-gradle">Building a deployment package with Gradle</a><a href="#java-package-maven">Building a deployment package with Maven</a><a href="#java-package-cli">Uploading a deployment package with the Lambda API</a><a href="#java-package-cloudformation">Uploading a deployment package with AWS SAM</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="java-package">Deploy Java Lambda functions with .zip or JAR file archives</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Your AWS Lambda function's code consists of scripts or compiled programs and their
                                    dependencies. 
                                    You use a <em>deployment package</em> to deploy your function code to Lambda. Lambda supports two types of deployment packages:
                                    container images and .zip files.
                                 </p>
                                 <p>This page describes how to create your deployment package as a .zip file or Jar file,
                                    and then use the
                                    deployment package to deploy your function code to AWS Lambda using the AWS Command
                                    Line Interface (AWS CLI).
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Sections</strong></p>
                                    <ul>
                                       <li><a href="#java-package-prereqs">Prerequisites</a></li>
                                       <li><a href="#java-package-libraries">Tools and libraries</a></li>
                                       <li><a href="#java-package-gradle">Building a deployment package with Gradle</a></li>
                                       <li><a href="#java-package-maven">Building a deployment package with Maven</a></li>
                                       <li><a href="#java-package-cli">Uploading a deployment package with the Lambda API</a></li>
                                       <li><a href="#java-package-cloudformation">Uploading a deployment package with AWS SAM</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="java-package-prereqs">Prerequisites</h2>
                                  
                                 
                                 
                                 <p>The AWS Command Line Interface (AWS CLI) is an open source tool that enables you to
                                    interact with AWS services using commands in your command-line shell. To complete
                                    the steps in this section, you need the following:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html">AWS CLI – Install version 2</a></p>
                                       </li>
                                       <li class="listitem">
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">AWS CLI – Quick configuration with <code class="code">aws configure</code></a></p>
                                       </li>
                                    </ul>
                                 </div>
                                 
                                  
                                 
                                 <h2 id="java-package-libraries">Tools and libraries</h2>
                                 
                                 
                                 <p>Lambda provides the following libraries for Java functions:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/aws/aws-lambda-java-libs/tree/master/aws-lambda-java-core" rel="noopener noreferrer" target="_blank"><span>com.amazonaws:aws-lambda-java-core</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                                             (required) – Defines handler method interfaces and the context object that the runtime
                                             passes to the
                                             handler. If you define your own input types, this is the only library that you need.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/aws/aws-lambda-java-libs/tree/master/aws-lambda-java-events" rel="noopener noreferrer" target="_blank"><span>com.amazonaws:aws-lambda-java-events</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Input types for events from services that invoke Lambda
                                             functions.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/aws/aws-lambda-java-libs/tree/master/aws-lambda-java-log4j2" rel="noopener noreferrer" target="_blank"><span>com.amazonaws:aws-lambda-java-log4j2</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – An appender library for Apache Log4j 2 that you can use
                                             to add the request ID for the current invocation to your <a href="java-logging.html">function
                                                logs</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>These libraries are available through <a href="https://search.maven.org/search?q=g:com.amazonaws" rel="noopener noreferrer" target="_blank"><span>Maven
                                          Central Repository</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Add them to your build definition as follows:
                                 </p>
                                 
                                 <awsdocs-tabs>
                                    <dl style="display: none">
                                       
                                       <dt>Gradle</dt>
                                       <dd tab-id="gradle">
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="groovy ">dependencies <span>{</span>
    <code class="userinput">implementation 'com.amazonaws:aws-lambda-java-core:1.2.1'
    implementation 'com.amazonaws:aws-lambda-java-events:3.1.0'
    runtimeOnly 'com.amazonaws:aws-lambda-java-log4j2:1.2.0'</code>
}</code></pre>
                                          </dd>
                                       
                                       <dt>Maven</dt>
                                       <dd tab-id="maven">
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="xml ">  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;
      &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;
      &lt;version&gt;1.2.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;
      &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;
      &lt;version&gt;3.1.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;
      &lt;artifactId&gt;aws-lambda-java-log4j2&lt;/artifactId&gt;
      &lt;version&gt;1.2.0&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;</code></pre>
                                          </dd>
                                       
                                    </dl>
                                 </awsdocs-tabs>
                                 
                                 
                                 <p>To create a deployment package, compile your function code and dependencies into a
                                    single .zip file or Java
                                    Archive (JAR) file. For Gradle, <a href="#java-package-gradle">use the Zip build type</a>. For
                                    Apache Maven, <a href="#java-package-maven">use the Maven Shade plugin</a>.
                                 </p>
                                  
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>To keep your deployment package size small, package your function's dependencies in
                                          layers.
                                          Layers enable you to manage your dependencies independently, can be used by multiple
                                          functions, and can be shared with other accounts.
                                          For more information, see <a href="configuration-layers.html">Lambda layers</a>.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="java-package-gradle">Building a deployment package with Gradle</h2>
                                 
                                 <p>To create a deployment package with your function's code and dependencies, use the
                                    <code class="code">Zip</code> build
                                    type.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example build.gradle – Build task</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">task buildZip(type: Zip) <span>{</span>
    from compileJava
    from processResources
    into('lib') <span>{</span>
        from configurations.runtimeClasspath
    }
}</code></pre></div>
                                 </div>
                                 
                                 <p>This build configuration produces a deployment package in the <code class="code">build/distributions</code> directory. The
                                    <code class="code">compileJava</code> task compiles your function's classes. The <code class="code">processResources</code> task copies the Java project resources into their target directory, potentially processing
                                    then. The statement <code class="code">into('lib')</code> then copies dependency libraries from the build's classpath into a folder named <code class="code">lib</code>.
                                 </p>	  
                                 
                                 <div class="example">
                                    <p class="title"><b>Example build.gradle – Dependencies</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dependencies <span>{</span>
    implementation platform('software.amazon.awssdk:bom:2.10.73')
    implementation 'software.amazon.awssdk:lambda'
    <code class="userinput">implementation 'com.amazonaws:aws-lambda-java-core:1.2.1'
    implementation 'com.amazonaws:aws-lambda-java-events:3.1.0'</code>
    implementation 'com.google.code.gson:gson:2.8.6'
    implementation 'org.apache.logging.log4j:log4j-api:2.13.0'
    implementation 'org.apache.logging.log4j:log4j-core:2.13.0'
    runtimeOnly 'org.apache.logging.log4j:log4j-slf4j18-impl:2.13.0'
    <code class="userinput">runtimeOnly 'com.amazonaws:aws-lambda-java-log4j2:1.2.0'</code>
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.0'
}</code></pre></div>
                                 </div>
                                 
                                 <p>Lambda loads JAR files in Unicode alphabetical order. If multiple JAR files in the
                                    <code class="code">lib</code> directory
                                    contain the same class, the first one is used. You can use the following shell script
                                    to identify duplicate
                                    classes:
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example test-zip.sh</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">mkdir -p expanded
unzip path/to/my/function.zip -d expanded
find ./expanded/lib -name '*.jar' | xargs -n1 zipinfo -1 | grep '.*.class' | sort | uniq -c | sort</code></pre></div>
                                 </div>
                                  
                                 
                                 <h2 id="java-package-maven">Building a deployment package with Maven</h2>
                                 
                                 <p>To build a deployment package with Maven, use the <a href="https://maven.apache.org/plugins/maven-shade-plugin/" rel="noopener noreferrer" target="_blank"><span>Maven Shade plugin</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. The plugin creates a JAR
                                    file that contains the compiled function code and all of its dependencies.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example pom.xml – Plugin configuration</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="xml ">      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.2.2&lt;/version&gt;
        &lt;configuration&gt;
          &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;</code></pre></div>
                                 </div>
                                 
                                 
                                 <p>To build the deployment package, use the <code class="code">mvn package</code> command.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">[INFO] Scanning for projects...
[INFO] -----------------------&lt; com.example:java-maven &gt;-----------------------
[INFO] Building java-maven-function 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
...
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ java-maven ---
[INFO] Building jar: target/java-maven-1.0-SNAPSHOT.jar
[INFO]
[INFO] --- maven-shade-plugin:3.2.2:shade (default) @ java-maven ---
[INFO] Including com.amazonaws:aws-lambda-java-core:jar:1.2.1 in the shaded jar.
[INFO] Including com.amazonaws:aws-lambda-java-events:jar:3.1.0 in the shaded jar.
[INFO] Including joda-time:joda-time:jar:2.6 in the shaded jar.
[INFO] Including com.google.code.gson:gson:jar:2.8.6 in the shaded jar.
[INFO] Replacing original artifact with shaded artifact.
[INFO] Replacing target/java-maven-1.0-SNAPSHOT.jar with target/java-maven-1.0-SNAPSHOT-shaded.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  8.321 s
[INFO] Finished at: 2020-03-03T09:07:19Z
[INFO] ------------------------------------------------------------------------</code></pre>
                                 <p>This command generates a JAR file in the <code class="code">target</code> directory.
                                 </p>
                                 
                                 
                                 <p>If you use the appender library (<code class="code">aws-lambda-java-log4j2</code>), you must also configure a transformer
                                    for the Maven Shade plugin. The transformer library combines versions of a cache file
                                    that appear in both the
                                    appender library and in Log4j.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example pom.xml – Plugin configuration with Log4j 2 appender</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="xml ">      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.2.2&lt;/version&gt;
        &lt;configuration&gt;
          &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;shade&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;transformers&gt;
                &lt;transformer implementation="com.github.edwgiz.maven_shade_plugin.log4j2_cache_transformer.PluginsCacheFileTransformer"&gt;
                &lt;/transformer&gt;
              &lt;/transformers&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;dependencies&gt;
          &lt;dependency&gt;
            &lt;groupId&gt;com.github.edwgiz&lt;/groupId&gt;
            &lt;artifactId&gt;maven-shade-plugin.log4j2-cachefile-transformer&lt;/artifactId&gt;
            &lt;version&gt;2.13.0&lt;/version&gt;
          &lt;/dependency&gt;
        &lt;/dependencies&gt;
      &lt;/plugin&gt;</code></pre></div>
                                 </div>
                                  
                                 
                                 <h2 id="java-package-cli">Uploading a deployment package with the Lambda API</h2>
                                 
                                 
                                 <p>To update a function's code with the AWS Command Line Interface (AWS CLI) or AWS SDK,
                                    use the <a href="API_UpdateFunctionCode.html">UpdateFunctionCode</a> API
                                    operation. For the AWS CLI, use the <code class="code">update-function-code</code> command. The following command uploads a
                                    deployment package named <code class="code">my-function.zip</code> in the current directory:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda update-function-code --function-name my-function --zip-file fileb://my-function.zip</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "FunctionName": "my-function",
    "FunctionArn": "arn:aws:lambda:us-east-2:123456789012:function:my-function",
    "Runtime": "java8",
    "Role": "arn:aws:iam::123456789012:role/lambda-role",
    "Handler": "example.Handler",
    "CodeSha256": "Qf0hMc1I2di6YFMi9aXm3JtGTmcDbjniEuiYonYptAk=",
    "Version": "$LATEST",
    "TracingConfig": <span>{</span>
        "Mode": "Active"
    },
    "RevisionId": "983ed1e3-ca8e-434b-8dc1-7d72ebadd83d",
    ...
}</code></pre>
                                 
                                 <p>If your deployment package is larger than 50 MB, you can't upload it directly. Upload
                                    it to an
                                    Amazon Simple Storage Service (Amazon S3) bucket and point Lambda to the object. The
                                    following example commands upload a deployment package
                                    to an S3 bucket named <code class="code">my-bucket</code> and use it to update a function's code:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws s3 cp my-function.zip s3://my-bucket</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">upload: my-function.zip to s3://my-bucket/my-function</code></pre>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda update-function-code --function-name my-function \
 --s3-bucket my-bucket --s3-key my-function.zip</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "FunctionName": "my-function",
    "FunctionArn": "arn:aws:lambda:us-east-2:123456789012:function:my-function",
    "Runtime": "java8",
    "Role": "arn:aws:iam::123456789012:role/lambda-role",
    "Handler": "example.Handler",
    "CodeSha256": "Qf0hMc1I2di6YFMi9aXm3JtGTmcDbjniEuiYonYptAk=",
    "Version": "$LATEST",
    "TracingConfig": <span>{</span>
        "Mode": "Active"
    },
    "RevisionId": "983ed1e3-ca8e-434b-8dc1-7d72ebadd83d",
    ...
}</code></pre>
                                 <p>You can use this method to upload function packages up to 250 MB (decompressed).</p>
                                  
                                 
                                 <h2 id="java-package-cloudformation">Uploading a deployment package with AWS SAM</h2>
                                 
                                 
                                 <p>You can use AWS SAM to automate deployments of your function code, configuration,
                                    and dependencies. AWS SAM is an
                                    extension of AWS CloudFormation that provides a simplified syntax for defining serverless
                                    applications. The following example
                                    template defines a function with a deployment package in the <code class="code">build/distributions</code> directory that
                                    Gradle uses:
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example template.yml</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">AWSTemplateFormatVersion: '2010-09-09'
Transform: 'AWS::Serverless-2016-10-31'
Description: An AWS Lambda application that calls the Lambda API.
Resources:
  function:
    Type: <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-function.html">AWS::Serverless::Function</a>
    Properties:
      <code class="userinput">CodeUri: build/distributions/java-basic.zip</code>
      Handler: example.Handler
      Runtime: java8
      Description: Java function
      MemorySize: 512
      Timeout: 10
      # Function's execution role
      Policies:
        - AWSLambdaBasicExecutionRole
        - AWSLambdaReadOnlyAccess
        - AWSXrayWriteOnlyAccess
        - AWSLambdaVPCAccessExecutionRole
      Tracing: Active</code></pre></div>
                                 </div>
                                 
                                 <p>To create the function, use the <code class="code">package</code> and <code class="code">deploy</code> commands. These commands are
                                    customizations to the AWS CLI. They wrap other commands to upload the deployment package
                                    to Amazon S3, rewrite the
                                    template with the object URI, and update the function's code.
                                 </p>
                                 
                                 <p>The following example script runs a Gradle build and uploads the deployment package
                                    that it creates. It
                                    creates an AWS CloudFormation stack the first time you run it. If the stack already
                                    exists, the script updates it.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example deploy.sh</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">#!/bin/bash
set -eo pipefail
aws cloudformation package --template-file template.yml --s3-bucket MY_BUCKET --output-template-file out.yml
aws cloudformation deploy --template-file out.yml --stack-name java-basic --capabilities CAPABILITY_NAMED_IAM</code></pre></div>
                                 </div>
                                 
                                 <p>For a complete working example, see the following sample applications:</p>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Sample Lambda applications in Java</b></p>
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-java" rel="noopener noreferrer" target="_blank"><span>blank-java</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A Java function that shows the use of
                                             Lambda's Java libraries, logging, environment variables, layers, AWS X-Ray tracing,
                                             unit tests, and the AWS
                                             SDK.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/java-basic" rel="noopener noreferrer" target="_blank"><span>java-basic</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A minimal Java function
                                             with unit tests and variable logging configuration.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/java-events" rel="noopener noreferrer" target="_blank"><span>java-events</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A minimal Java function that uses the
                                             <a href="java-package.html">aws-lambda-java-events</a> library with event types that don't require the AWS
                                             SDK as a dependency, such as Amazon API Gateway.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/java-events-v1sdk" rel="noopener noreferrer" target="_blank"><span>java-events-v1sdk</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A Java function that uses the
                                             <a href="java-package.html">aws-lambda-java-events</a> library with event types that require the AWS SDK
                                             as a dependency (Amazon Simple Storage Service (Amazon S3), Amazon DynamoDB, and Amazon
                                             Kinesis).
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/s3-java" rel="noopener noreferrer" target="_blank"><span>s3-java</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A Java function that processes
                                             notification events from Amazon S3 and uses the Java Class Library (JCL) to create
                                             thumbnails from uploaded image
                                             files.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="java-handler.html">Handler</div>
                                    <div id="next" class="next-link" accesskey="n" href="java-image.html">Deploy container images</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/java-package.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/java-package.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/java-package.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:22 GMT -->
</html>