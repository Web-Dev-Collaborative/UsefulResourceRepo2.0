<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/images-create.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 14:59:51 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Creating Lambda container images - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="images-create" />
      <meta name="default_state" content="images-create" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="images-create.html" />
      <meta name="description" content="Create a container image for a Lambda function by using an AWS provided base image or an alternative base image." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Creating Lambda container images - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#images-create" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/images-create.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/images-create.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/images-create.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/images-create.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#images-create" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/images-create.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#images-types">Image types</a><a href="#images-tools">Container tools</a><a href="#images-reqs">Lambda requirements for container images</a><a href="#images-parms">Container image settings</a><a href="#images-create-1">Create an image from an AWS base image for Lambda</a><a href="#images-create-2">Create an image from an alternative base image</a><a href="#images-create-sam">Create an image using the AWS SAM toolkit</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="images-create">Creating Lambda container images</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>You can package your Lambda function code and dependencies as a container image, using
                                    tools such as the Docker
                                    CLI. You can then upload the image to your container registry hosted on Amazon Elastic
                                    Container Registry (Amazon ECR). Note that you must create
                                    the Lambda function from the same account as the container registry in Amazon ECR.
                                 </p>
                                 <p>AWS provides a set of open-source <a href="runtimes-images.html#runtimes-images-lp">base images</a> that you can use to
                                    create your container image. These base images include a <a href="runtimes-images.html#runtimes-api-client">runtime interface
                                       client</a> to manage the interaction between Lambda and your function code.
                                 </p>
                                 <p>You can also use an alternative base image from another container registry. Lambda
                                    provides open-source runtime
                                    interface clients that you add to an alternative base image to make it compatible
                                    with Lambda.
                                 </p>
                                 <p>For example applications, including a Node.js example and a Python example, see
                                    <a href="http://aws.amazon.com/blogs/aws/new-for-aws-lambda-container-image-support/" rel="noopener noreferrer" target="_blank"><span>Container image support for Lambda</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the AWS Blog.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#images-types">Image types</a></li>
                                       <li><a href="#images-tools">Container tools</a></li>
                                       <li><a href="#images-reqs">Lambda requirements for container images</a></li>
                                       <li><a href="#images-parms">Container image settings</a></li>
                                       <li><a href="#images-create-1">Create an image from an AWS base image for Lambda</a></li>
                                       <li><a href="#images-create-2">Create an image from an alternative base image</a></li>
                                       <li><a href="#images-create-sam">Create an image using the AWS SAM toolkit</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="images-types">Image types</h2>
                                 
                                 <p>You can use an AWS provided base image or an alternative base image, such as Alpine
                                    or Debian. Lambda
                                    supports any image that conforms to one of the following image manifest formats:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p>Docker image manifest V2, schema 2 (used with Docker version 1.10 and newer)</p>
                                       </li>
                                       <li class="listitem">
                                          <p>Open Container Initiative (OCI) Specifications (v1.0.0 and up)</p>
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Lambda supports images up to 10 GB in size.</p>
                                  
                                 
                                 <h2 id="images-tools">Container tools</h2>
                                 
                                 <p>To create your container image, you can use any development tool that supports one
                                    of the following container
                                    image manifest formats:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p>Docker image manifest V2, schema 2 (used with Docker version 1.10 and newer)</p>
                                       </li>
                                       <li class="listitem">
                                          <p>OCI Specifications (v1.0.0 and up)</p>
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>For example, you can use the Docker CLI to build, test, and deploy your container
                                    images.
                                 </p>
                                  
                                 
                                 <h2 id="images-reqs">Lambda requirements for container images</h2>
                                 
                                 <p>To deploy a container image to Lambda, note the following requirements:</p>
                                 
                                 <div class="orderedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ol>
                                       <li>
                                          
                                          <p>The container image must implement the Lambda <a href="runtimes-api.html">Runtime API</a>. The AWS
                                             open-source <a href="runtimes-images.html#runtimes-api-client">runtime interface clients</a> implement the API. You can
                                             add a runtime interface client to your preferred base image to make it compatible
                                             with Lambda.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>The container image must be able to run on a read-only file system. Your function
                                             code can access a
                                             writable <code class="code">/tmp</code> directory with 512 MB of storage. If you are using an image that requires a
                                             writable directory outside of <code class="code">/tmp</code>, configure it to write to a directory under the
                                             <code class="code">/tmp</code> directory.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>The default Lambda user must be able to read all the files required to run your function
                                             code. Lambda
                                             follows security best practices by defining a default Linux user with least-privileged
                                             permissions. Verify
                                             that your application code does not rely on files that other Linux users are restricted
                                             from running.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Lambda supports only Linux-based container images.</p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="images-parms">Container image settings</h2>
                                 
                                 <p>Lambda supports the following container image settings in the Dockerfile:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>ENTRYPOINT – Specifies the absolute path to the entry point of the application.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>CMD – Specifies parameters that you want to pass in with ENTRYPOINT.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>WORKDIR – Specifies the absolute path to the working directory.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>ENV – Specifies an environment variable for the Lambda function.</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Lambda ignores the values of any unsupported container image settings in the Dockerfile.</p>
                                    </div>
                                 </div>
                                 
                                 <p>For more information about how Docker uses the container image settings, see <a href="https://docs.docker.com/engine/reference/builder/#entrypoint" rel="noopener noreferrer" target="_blank"><span>ENTRYPOINT</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the Dockerfile
                                    reference on the Docker Docs website. For more information about using ENTRYPOINT
                                    and CMD, see <a href="http://aws.amazon.com/blogs/opensource/demystifying-entrypoint-cmd-docker/" rel="noopener noreferrer" target="_blank"><span>Demystifying ENTRYPOINT and CMD in Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the
                                    AWS Open Source Blog.
                                 </p>
                                 
                                 <p>You can specify the container image settings in the Dockerfile when you build your
                                    image. You can also
                                    override these configurations using the Lambda console or Lambda API. This allows
                                    you to deploy multiple functions
                                    that deploy the same container image but with different runtime configurations.
                                 </p>
                                 
                                 <div class="awsdocs-note awsdocs-warning">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Warning</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>When you specify ENTRYPOINT or CMD in the Dockerfile or as an override, make sure
                                          that you enter the
                                          absolute path. Also, do not use symlinks as the entry point to the container.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="images-create-1">Create an image from an AWS base image for Lambda</h2>
                                 
                                 <p>To build a container image for a new Lambda function, you can start with an AWS base
                                    image for Lambda.
                                 </p>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>AWS periodically provides updates to the AWS base images for Lambda. If your Dockerfile
                                          includes the
                                          image name in the FROM property, your Docker client pulls the latest version of the
                                          image from Docker Hub. To
                                          use the updated base image, you must rebuild your container image and <a href="configuration-images.html#configuration-images-update">update the function code</a>.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <p><b>Prerequisites</b></p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The AWS Command Line Interface (AWS CLI)</p>
                                          
                                          <p>The following instructions use the AWS CLI to call AWS service API operations. To
                                             install the AWS CLI, see
                                             <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html">Installing, updating, and
                                                uninstalling the AWS CLI</a> in the <em>AWS Command Line Interface User Guide</em>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Docker Desktop</p>
                                          
                                          <p>The following instructions use Docker CLI commands to create the container image.
                                             To install the Docker
                                             CLI, see <a href="https://docs.docker.com/get-docker" rel="noopener noreferrer" target="_blank"><span>Get Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Docker Docs website.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Your function code</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an image from an AWS base image for Lambda</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>On your local machine, create a project directory for your new function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create an app directory in the project directory, and then add your function handler
                                             code to the app
                                             directory.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use a text editor to create a new Dockerfile.</p>
                                          
                                          <p>The AWS base images provide the following environment variables:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>LAMBDA_TASK_ROOT=/var/task</p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>LAMBDA_RUNTIME_DIR=/var/runtime</p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>The following shows an example Dockerfile for Node.js version 12. :</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">FROM public.ecr.aws/lambda/nodejs:12
# Alternatively, you can pull the base image from Docker Hub: amazon/aws-lambda-nodejs:12

COPY app.js package.json /var/task/

# Install NPM dependencies for function
RUN npm install

# Set the CMD to your handler (could also be done as a parameter override outside of the Dockerfile)
CMD [ "app.handler" ]  </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Build your Docker image with the <code class="code">docker build</code> command. Enter a name for the image. The
                                             following example names the image <code class="code">hello-world</code>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">docker build -t <code class="replaceable">hello-world</code> .   </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>(Optional) Test your application locally using the <a href="images-test.html">runtime interface
                                                emulator</a>. 
                                             From a new terminal window, post an event to the following endpoint using a <code class="code">curl</code>
                                             command:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">curl -XPOST "http://localhost:9000/2015-03-31/functions/function/invocations" -d '<span>{</span>}'</code></pre>
                                          <p>This command invokes the function running in the container image and returns a response.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Authenticate the Docker CLI to your Amazon ECR registry.</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws ecr get-login-password --region <code class="replaceable">us-east-1</code> | docker login --username AWS --password-stdin <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com    </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Tag your image to match your repository name, and deploy the image to Amazon ECR using
                                             the <code class="code">docker
                                                push</code> command. 
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">docker tag  <code class="replaceable">hello-world</code>:latest <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/<code class="replaceable">hello-world</code>:latest
docker push <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/<code class="replaceable">hello-world</code>:latest        </code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="images-create-2">Create an image from an alternative base image</h2>
                                 
                                 <p><b>Prerequisites</b></p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The AWS CLI</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Docker Desktop</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Your function code</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an image using an alternative base image</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Choose a base image. Lambda supports all Linux distributions, such as Alpine, Debian,
                                             and Ubuntu.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>On your local machine, create a project directory for your new function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create an app directory in the project directory, and then add your function handler
                                             code to the app
                                             directory.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use a text editor to create a new Dockerfile with the following configuration:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   <p>Set the <code class="code">FROM</code> property to the URI of the base image.
                                                   </p>
                                                </li>
                                                <li class="listitem">
                                                   <p>Add instructions to install the runtime interface client.</p>
                                                </li>
                                                <li class="listitem">
                                                   <p>Set the <code class="code">ENTRYPOINT</code> property to invoke the runtime interface client.
                                                   </p>
                                                </li>
                                                <li class="listitem">
                                                   <p>Set the <code class="code">CMD</code> argument to specify the Lambda function handler.
                                                   </p>
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>The following example shows a Dockerfile for Python:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""># Define function directory
ARG FUNCTION_DIR="/function"

FROM python:buster as build-image

# Install aws-lambda-cpp build dependencies
RUN apt-get update &amp;&amp; \
  apt-get install -y \
  g++ \
  make \
  cmake \
  unzip \
  libcurl4-openssl-dev

# Include global arg in this stage of the build
ARG FUNCTION_DIR
# Create function directory
RUN mkdir -p $<span>{</span>FUNCTION_DIR}

# Copy function code
COPY app/* $<span>{</span>FUNCTION_DIR}

# Install the runtime interface client
RUN pip install \
        --target $<span>{</span>FUNCTION_DIR} \
        awslambdaric

# Multi-stage build: grab a fresh copy of the base image
FROM python:buster

# Include global arg in this stage of the build
ARG FUNCTION_DIR
# Set working directory to function root directory
WORKDIR $<span>{</span>FUNCTION_DIR}

# Copy in the build image dependencies
COPY --from=build-image $<span>{</span>FUNCTION_DIR} $<span>{</span>FUNCTION_DIR}

ENTRYPOINT [ "/usr/local/bin/python", "-m", "awslambdaric" ]
CMD [ "app.handler" ]
        </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Build your Docker image with the <code class="code">docker build</code> command. Enter a name for the image. The
                                             following example names the image <code class="code">hello-world</code>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">docker build -t <code class="replaceable">hello-world</code> .    </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>(Optional) Test your application locally using the <a href="images-test.html">Runtime interface
                                                emulator</a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Authenticate the Docker CLI to your Amazon ECR registry.</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws ecr get-login-password --region <code class="replaceable">us-east-1</code> | docker login --username AWS --password-stdin <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com    </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Tag your image to match your repository name, and deploy the image to Amazon ECR using
                                             the <code class="code">docker
                                                push</code> command. 
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">docker tag  <code class="replaceable">hello-world</code>:latest <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/<code class="replaceable">hello-world</code>:latest
docker push <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/<code class="replaceable">hello-world</code>:latest     </code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="images-create-sam">Create an image using the AWS SAM toolkit</h2>
                                 
                                 <p>You can use the AWS Serverless Application Model (AWS SAM) toolkit to create and deploy
                                    a function defined as a container image. For a
                                    new project, you can use the AWS SAM CLI <code class="code">init</code> command to set up the scaffolding for your project in
                                    your preferred runtime.
                                 </p>
                                 
                                 <p>In your AWS SAM template, you set the <code class="code">Runtime</code> type to <code class="code">Image</code> and provide the URI of the
                                    base image.
                                 </p>
                                 
                                 <p>For more information, see <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-using-build.html">Building
                                       applications</a> in the <em>AWS Serverless Application Model Developer Guide</em>.
                                 </p>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="lambda-images.html">Container images</div>
                                    <div id="next" class="next-link" accesskey="n" href="images-test.html">Testing images</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/images-create.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/images-create.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/images-create.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 14:59:52 GMT -->
</html>