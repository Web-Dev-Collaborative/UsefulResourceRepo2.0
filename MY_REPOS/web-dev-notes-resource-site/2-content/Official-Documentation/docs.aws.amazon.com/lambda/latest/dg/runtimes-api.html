<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/runtimes-api.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:00:15 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>AWS Lambda runtime API - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="runtimes-api" />
      <meta name="default_state" content="runtimes-api" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="runtimes-api.html" />
      <meta name="description" content="AWS Lambda provides an HTTP API for custom runtimes to receive invocation events from Lambda and send response data back within the Lambda execution environment ." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>AWS Lambda runtime API - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#runtimes-api" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/runtimes-api.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/runtimes-api.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/runtimes-api.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/runtimes-api.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#runtimes-api" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/runtimes-api.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#runtimes-api-next">Next invocation</a><a href="#runtimes-api-response">Invocation response</a><a href="#runtimes-api-invokeerror">Invocation error</a><a href="#runtimes-api-initerror">Initialization error</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="runtimes-api">AWS Lambda runtime API</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>AWS Lambda provides an HTTP API for <a href="runtimes-custom.html">custom runtimes</a> to receive invocation
                                    events from Lambda and send response data back within the Lambda <a href="lambda-runtimes.html">execution
                                       environment</a>.
                                 </p>
                                 <p>The OpenAPI specification for the runtime API version <b>2018-06-01</b> is available
                                    here: <a href="samples/runtime-api.zip" rel="noopener noreferrer" target="_blank">runtime-api.zip</a></p>
                                 <p>Runtimes get an endpoint from the <code class="code">AWS_LAMBDA_RUNTIME_API</code> environment variable, add the API version,
                                    and use the following resource paths to interact with the API.
                                 </p>
                                 <div class="example">
                                    <p class="title"><b>Example Request</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl "http://$<span>{</span>AWS_LAMBDA_RUNTIME_API}/2018-06-01/runtime/invocation/next"</code></pre></div>
                                 </div>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Resources</strong></p>
                                    <ul>
                                       <li><a href="#runtimes-api-next">Next invocation</a></li>
                                       <li><a href="#runtimes-api-response">Invocation response</a></li>
                                       <li><a href="#runtimes-api-invokeerror">Invocation error</a></li>
                                       <li><a href="#runtimes-api-initerror">Initialization error</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="runtimes-api-next">Next invocation</h2>
                                 
                                 <p><b>Path</b> – <code class="code">/runtime/invocation/next</code></p>
                                 
                                 <p><b>Method</b> – <b>GET</b></p>
                                 
                                 <p>Retrieves an invocation event. The response body contains the payload from the invocation,
                                    which is a JSON
                                    document that contains event data from the function trigger. The response headers
                                    contain additional data about
                                    the invocation.
                                 </p>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Response headers</b></p>
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Aws-Request-Id</code> – The request ID, which identifies the request that
                                             triggered the function invocation.
                                          </p>
                                          
                                          <p>For example, <code class="code">8476a536-e9f4-11e8-9739-2dfe598c3fcd</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Deadline-Ms</code> – The date that the function times out in Unix time
                                             milliseconds. 
                                          </p>
                                          
                                          <p>For example, <code class="code">1542409706888</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Invoked-Function-Arn</code> – The ARN of the Lambda function, version, or alias
                                             that's specified in the invocation. 
                                          </p>
                                          
                                          <p>For example, <code class="code">arn:aws:lambda:us-east-2:123456789012:function:custom-runtime</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Trace-Id</code> – The <a href="https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-tracingheader">AWS X-Ray tracing header</a>. 
                                          </p>
                                          
                                          <p>For example,
                                             <code class="code">Root=1-5bef4de7-ad49b0e87f6ef6c87fc2e700;Parent=9a9197af755a6419;Sampled=1</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Client-Context</code> – For invocations from the AWS Mobile SDK, data about
                                             the client application and device.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">Lambda-Runtime-Cognito-Identity</code> – For invocations from the AWS Mobile SDK, data about
                                             the Amazon Cognito identity provider.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>Call <code class="code">/runtime/invocation/next</code> to get the invocation event, and pass it to the function handler
                                    for processing. Do not set a timeout on the <code class="code">GET</code> call. Between when Lambda bootstraps the runtime and
                                    when the runtime has an event to return, the runtime process may be frozen for several
                                    seconds.
                                 </p>
                                 
                                 
                                 <p>The request ID tracks the invocation within Lambda. Use it to specify the invocation
                                    when you send the
                                    response.
                                 </p>
                                 
                                 
                                 <p>The tracing header contains the trace ID, parent ID, and sampling decision. If the
                                    request is sampled, the
                                    request was sampled by Lambda or an upstream service. The runtime should set the <code class="code">_X_AMZN_TRACE_ID</code> with
                                    the value of the header. The X-Ray SDK reads this to get the IDs and determine whether
                                    to trace the
                                    request.
                                 </p>
                                  
                                 
                                 <h2 id="runtimes-api-response">Invocation response</h2>
                                 
                                 <p><b>Path</b> –
                                    <code class="code">/runtime/invocation/<code class="replaceable">AwsRequestId</code>/response</code></p>
                                 
                                 <p><b>Method</b> – <b>POST</b></p>
                                 
                                 <p>Sends an invocation response to Lambda. After the runtime invokes the function handler,
                                    it posts the response
                                    from the function to the invocation response path. For synchronous invocations, Lambda
                                    then sends the response back
                                    to the client.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example success request</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">REQUEST_ID=156cb537-e2d4-11e8-9b34-d36013741fb9
curl -X POST  "http://$<span>{</span>AWS_LAMBDA_RUNTIME_API}/2018-06-01/runtime/invocation/$REQUEST_ID/response"  -d "SUCCESS"</code></pre></div>
                                 </div>
                                  
                                 
                                 <h2 id="runtimes-api-invokeerror">Invocation error</h2>
                                 
                                 <p><b>Path</b> –
                                    <code class="code">/runtime/invocation/<code class="replaceable">AwsRequestId</code>/error</code></p>
                                 
                                 <p><b>Method</b> – <b>POST</b></p>
                                 
                                 <p>If the function returns an error, the runtime formats the error into a JSON document,
                                    and posts it to the
                                    invocation error path.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example request body</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "errorMessage" : "Error parsing event data.",
    "errorType" : "InvalidEventDataException"
}</code></pre></div>
                                 </div>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example error request</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">REQUEST_ID=156cb537-e2d4-11e8-9b34-d36013741fb9
ERROR="<span>{</span>\"errorMessage\" : \"Error parsing event data.\", \"errorType\" : \"InvalidEventDataException\"}"
curl -X POST "http://$<span>{</span>AWS_LAMBDA_RUNTIME_API}/2018-06-01/runtime/invocation/$REQUEST_ID/error" -d "$ERROR" --header "Lambda-Runtime-Function-Error-Type: Unhandled"</code></pre></div>
                                 </div>
                                  
                                 
                                 <h2 id="runtimes-api-initerror">Initialization error</h2>
                                 
                                 <p><b>Path</b> – <code class="code">/runtime/init/error</code></p>
                                 
                                 <p><b>Method</b> – <b>POST</b></p>
                                 
                                 <p>If the runtime encounters an error during initialization, it posts an error message
                                    to the initialization
                                    error path.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example initialization error request</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">ERROR="<span>{</span>\"errorMessage\" : \"Failed to load function.\", \"errorType\" : \"InvalidFunctionException\"}"
curl -X POST "http://$<span>{</span>AWS_LAMBDA_RUNTIME_API}/2018-06-01/runtime/init/error" -d "$ERROR" --header "Lambda-Runtime-Function-Error-Type: Unhandled"</code></pre></div>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="runtimes-images.html">Container images</div>
                                    <div id="next" class="next-link" accesskey="n" href="runtimes-extensions-api.html">Extensions API</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/runtimes-api.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/runtimes-api.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/runtimes-api.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:00:16 GMT -->
</html>