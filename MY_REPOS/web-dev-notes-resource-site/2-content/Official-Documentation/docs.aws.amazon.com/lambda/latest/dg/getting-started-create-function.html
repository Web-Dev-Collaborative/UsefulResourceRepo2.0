<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/getting-started-create-function.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 14:59:00 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Create a Lambda function with the console - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="getting-started-create-function" />
      <meta name="default_state" content="getting-started-create-function" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="getting-started-create-function.html" />
      <meta name="description" content="In the following getting started exercises, you create Lambda functions using the console." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Create a Lambda function with the console - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#getting-started-create-function" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/getting-started-create-function.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/getting-started-create-function.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/getting-started-create-function.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/getting-started-create-function.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#getting-started-create-function" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/getting-started-create-function.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#gettingstarted-zip-function">Create a Lambda function with default function code</a><a href="#gettingstarted-images">Create a function defined as a container image</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="getting-started-create-function">Create a Lambda function with the console</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>In the following getting started exercises, you create Lambda functions using the
                                    console.
                                 </p>
                                 <p>In the first exercise, you create a function and use the default code that Lambda
                                    creates. The Lambda console
                                    provides a <a href="code-editor.html">code editor</a> for non-compiled languages that lets you modify and test
                                    code quickly.
                                 </p>
                                 <p>In the next exercise, you create a function defined as a container image. First, create
                                    a container image for
                                    your function code, and then use the Lambda console to create a function from the
                                    container image.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#gettingstarted-zip-function">Create a Lambda function with default function code</a></li>
                                       <li><a href="#gettingstarted-images">Create a function defined as a container image</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="gettingstarted-zip-function">Create a Lambda function with default function code</h2>
                                 
                                 <p>In this getting started exercise, you create a Node.js Lambda function using the Lambda
                                    console. Lambda
                                    automatically creates default code for the function. Next, you manually invoke the
                                    Lambda function using sample
                                    event data. Lambda runs the function and returns results. You then verify the results,
                                    including the logs that your
                                    Lambda function created and various Amazon CloudWatch metrics.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create a Lambda function with the console</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Basic information</b>, do the following:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>For <b>Function name</b>, enter <code class="userinput">my-function</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>For <b>Runtime</b>, confirm that <b>Node.js 14.x</b> is selected.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <p>Lambda creates a Node.js function and an <a href="lambda-intro-execution-role.html">execution role</a> that
                                    grants the function permission to upload logs. The  Lambda function assumes the execution
                                    role when you invoke your
                                    function, and uses the execution role to create credentials for the AWS SDK and to
                                    read data from event
                                    sources.
                                 </p>
                                  
                                 
                                 <h3 id="get-started-designer">Use the designer</h3>
                                 
                                 
                                 <p>The <b>Designer</b> shows an overview of your function and its upstream and downstream
                                    resources. You can use it to configure triggers, layers, and destinations.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/console-designer.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          A Lambda function with an Amazon S3 trigger and an Amazon EventBridge destination.&#xA;        " />
                                     
                                     
                                    
                                 </div>
                                 
                                 
                                 <p>Choose <b>my-function</b> in the designer to return to the function's code and configuration.
                                    For scripting languages, Lambda includes sample code that returns a success response.
                                    You can edit your function
                                    code with the embedded <a href="https://docs.aws.amazon.com/cloud9/latest/user-guide/welcome.html">AWS Cloud9</a> editor as long as your source code doesn't
                                    exceed the 3 MB limit.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="get-started-invoke-manually">Invoke the Lambda function</h3>
                                 
                                 <p>Invoke your Lambda function using the sample event data provided in the console.</p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To invoke a function</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>In the upper right corner, choose <b>Test</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Configure test event</b> dialog box, choose <b>Create new test
                                                event</b>. In <b>Event template</b>, leave the default <b>Hello
                                                World</b> option. Enter an <b>Event name</b> and note the following sample event
                                             template:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "key1": "value1",
    "key2": "value2",
    "key3": "value3"
  }</code></pre>
                                          <p>You can change keys and values in the sample JSON, but don't change the event structure.
                                             If you do
                                             change any keys and values, you must update the sample code accordingly.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create</b>, and then choose <b>Test</b>. Each user can create up
                                             to 10 test events per function. Those test events are not available to other users.
                                          </p>
                                          
                                          <p>Lambda runs your function on your behalf. The function handler receives and then processes
                                             the sample
                                             event.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Upon successful completion, view the results in the console.</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Execution result</b> section (below the <b>Test</b> button) shows
                                                      the execution status as <b>succeeded</b>. To view the function execution results, expand
                                                      <b>Details</b>. Note that the <b>logs</b> link opens the <b>Log
                                                         groups</b> page in the CloudWatch console.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Summary</b> section shows the key information reported in the <b>Log
                                                         output</b> section (the <em>REPORT</em> line in the execution log).
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Log output</b> section shows the log that Lambda generates for each invocation.
                                                      The function writes these logs to CloudWatch. The Lambda console shows these logs
                                                      for your convenience. Choose
                                                      <b>Click here</b> to add logs to the CloudWatch log group and open the <b>Log
                                                         groups</b> page in the CloudWatch console.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Run the function (choose <b>Test</b>) a few more times to gather some metrics that you can
                                             view in the next step.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Near the top of the page, choose the <b>Monitoring</b> tab. This page shows graphs for the
                                             metrics that Lambda sends to CloudWatch.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/metrics-functions-list.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                          <p>For more information on these graphs, see <a href="monitoring-functions-access-metrics.html">Monitoring functions in the AWS Lambda console</a>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="gettingstarted-cleanup">Clean up</h3>
                                 
                                 
                                 <p>If you are done working with the example function, delete it. You can also delete
                                    the log group that stores
                                    the function's logs, and the execution role that the console created.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete a Lambda function</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Actions</b>, <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete function</b> dialog box, choose <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete the log group</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/cloudwatch/home#logs:" rel="noopener noreferrer" target="_blank"><span>Log groups page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the CloudWatch
                                             console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Select the function's log group (<code class="code">/aws/lambda/my-function</code>).
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Actions</b>, <b>Delete log group(s)</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete log group(s)</b> dialog box, choose <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete the execution role</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/iam/home?#/roles" rel="noopener noreferrer" target="_blank"><span>Roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the AWS Identity and Access Management (IAM)
                                             console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Select the function's role (<code class="code">my-function-role-<code class="replaceable">31exxmpl</code></code>).
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Delete role</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete role</b> dialog box, choose <b>Yes, delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>You can automate the creation and cleanup of functions, log groups, and roles with
                                    AWS CloudFormation and the AWS Command Line Interface
                                    (AWS CLI). For fully functional sample applications, see <a href="lambda-samples.html">Lambda sample applications</a>.
                                 </p>
                                  
                                  
                                 
                                 <h2 id="gettingstarted-images">Create a function defined as a container image</h2>
                                 
                                 <p>In this getting started exercise, you use the Docker CLI to create a container image
                                    and then use the Lambda
                                    console to create a function from the container image.
                                 </p>
                                 
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#gettingstarted-images-prereq">Prerequisites</a></li>
                                       <li><a href="#gettingstarted-images-package">Create the container image</a></li>
                                       <li><a href="#gettingstarted-create-upload">Upload the image to the Amazon ECR repository</a></li>
                                       <li><a href="#gettingstarted-images-permissions">Update the user permissions</a></li>
                                       <li><a href="#gettingstarted-images-function">Create a Lambda function defined as a container image</a></li>
                                       <li><a href="#get-started-invoke-function">Invoke the Lambda function</a></li>
                                       <li><a href="#gettingstarted-image-cleanup">Clean up</a></li>
                                    </ul>
                                 </div>
                                 
                                  
                                 
                                 <h3 id="gettingstarted-images-prereq">Prerequisites</h3>
                                 
                                 
                                 <p>To complete the following steps, you need a command line terminal or shell to run
                                    commands. Commands and the expected output are listed in separate blocks:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight"><code class="userinput">this is a command</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"></div><code class="">this is output</code></pre>
                                 <p>For long commands, an escape character (<code class="code">\</code>) is used to split a command over multiple lines.
                                 </p>
                                 
                                 <p>On Linux and macOS, use your preferred shell and package manager. On Windows 10, you
                                    can <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer" target="_blank"><span>install the Windows Subsystem for Linux</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to get a Windows-integrated version of
                                    Ubuntu and Bash.
                                 </p>
                                 
                                 
                                 <p>This exercise uses Docker CLI commands to create the container image. To install the
                                    Docker CLI, see <a href="https://docs.docker.com/get-docker" rel="noopener noreferrer" target="_blank"><span>Get Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Docker Docs website.
                                 </p>
                                  
                                 
                                  
                                 
                                 <h3 id="gettingstarted-images-package">Create the container image</h3>
                                 
                                 <p>AWS provides a set of base images in the Amazon Elastic Container Registry (Amazon
                                    ECR). In this getting started exercise, we use the
                                    Node.js base image to create a container image. For more information about base images,
                                    see <a href="runtimes-images.html#runtimes-images-lp"> AWS base images for Lambda</a>.
                                 </p>
                                 
                                 <p>In the following commands, replace <code class="code">123456789012</code> with your AWS account ID.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an image using the AWS Node.js 12 base image  </b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>On your local machine, create a project directory for your new function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create a file named <code class="code">app.js</code> in your project directory. Add the following code to
                                             <code class="code">app.js</code>:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="js ">exports.handler = async (event) =&gt; <span>{</span>
    // TODO implement
    const response = <span>{</span>
        statusCode: 200,
        body: JSON.stringify('Hello from Lambda!'),
    };
    return response;
};                 </code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use a text editor to create a new file named <code class="code">Dockerfile</code> in your project directory. Add the
                                             following content to <code class="code">Dockerfile</code>:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">FROM public.ecr.aws/lambda/nodejs:12

# Copy function code and package.json
COPY app.js package.json /var/task/

# Install NPM dependencies for function
RUN npm install

# Set the CMD to your handler
CMD [ "app.handler" ]</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Create the <code class="code">package.json</code> file. From your project directory, run the <code class="code">npm init</code>
                                             command. Accept all of the default values:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">npm init</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Build your Docker image. From your project directory, run the following command:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">docker build -t hello-world .</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>(Optional) AWS base images include the Lambda runtime interface emulator, so you can
                                             test your function
                                             locally. 
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                <p>Run your Docker image. From your project directory, run the <code class="code">docker run</code> command:
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">docker run -p 9000:8080 hello-world:latest</code></code></pre></li>
                                             <li>
                                                <p>Test your Lambda function. In a new terminal window, run a <code class="code">curl</code> command to invoke your
                                                   function:
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">curl -XPOST "http://localhost:9000/2015-03-31/functions/function/invocations" -d '<span>{</span>}'</code></code></pre></li>
                                          </ol>       
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                  
                                 
                                 <h3 id="gettingstarted-create-upload">Upload the image to the Amazon ECR repository</h3>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>Authenticate the Docker CLI to your Amazon ECR registry.</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws ecr get-login-password --region <code class="replaceable">us-east-1</code> | docker login --username AWS --password-stdin <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Create a repository in Amazon ECR using the <code class="code">create-repository</code> command.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws ecr create-repository --repository-name hello-world --image-scanning-configuration scanOnPush=true --image-tag-mutability MUTABLE</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Tag your image to match your repository name using the <code class="code">docker
                                                tag</code> command. 
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">docker tag  hello-world:latest <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/hello-world:latest</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Deploy the image to Amazon ECR using the <code class="code">docker push</code> command. 
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">docker push <code class="replaceable">123456789012</code>.dkr.ecr.<code class="replaceable">us-east-1</code>.amazonaws.com/hello-world:latest</code></code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                  
                                 
                                  
                                 
                                 <h3 id="gettingstarted-images-permissions">Update the user permissions</h3>
                                 
                                 <p>Make sure that the permissions for the IAM user or role that creates the function
                                    contain the AWS
                                    managed policies <code class="code">GetRepositoryPolicy</code> and <code class="code">SetRepositoryPolicy</code>.  For information about
                                    access policies, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access.html"> Access
                                       Management</a> in the <em>IAM User Guide</em></p>
                                 
                                 <p>For example, use the IAM console to create a role with the following policy:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
    "Sid": "VisualEditor0",
    "Effect": "Allow",
    "Action": ["ecr:SetRepositoryPolicy","ecr:GetRepositoryPolicy"],
    "Resource": "arn:aws:ecr:&lt;region&gt;:&lt;account&gt;:repository/&lt;repo name&gt;/"
    }
  ]
}     </code></pre>
                                  
                                 
                                  
                                 <h3 id="gettingstarted-images-function">Create a Lambda function defined as a container image</h3>
                                 
                                 <p>Use the Lambda console to create a function defined as a container image.</p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create the function with the console</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose the <b>Container image</b> option.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Basic information</b>, do the following:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>For <b>Function name</b>, enter <code class="userinput">my-function</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>For <b>Container image URI</b>, enter the URI of the Amazon ECR image that you created
                                                   previously.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>Lambda creates your function and an <a href="lambda-intro-execution-role.html">execution role</a> that
                                    grants the function permission to upload logs. Lambda assumes the execution role when
                                    you invoke your function,
                                    and uses the execution role to create credentials for the AWS SDK and to read data
                                    from event sources.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="get-started-invoke-function">Invoke the Lambda function</h3>
                                 
                                 <p>Invoke your Lambda function using the sample event data provided in the console.</p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To invoke a function</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>In the upper right corner, choose <b>Test</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Configure test event</b> dialog box, choose <b>Create new test
                                                event</b>. In <b>Event template</b>, leave the default <b>Hello
                                                World</b> option. Enter an <b>Event name</b> and note the following sample event
                                             template:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "key1": "value1",
    "key2": "value2",
    "key3": "value3"
  }</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Choose <b>Create</b>, and then choose <b>Test</b>. Each user can create up
                                             to 10 test events per function. Those test events are not available to other users.
                                          </p>
                                          
                                          <p>Lambda runs your function on your behalf. The function handler receives and then processes
                                             the sample
                                             event.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Upon successful completion, view the results in the console.</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Execution result</b> section (below the <b>Test</b> button) shows
                                                      the execution status as <b>succeeded</b>. To view the function execution results, expand
                                                      <b>Details</b>. Note that the <b>logs</b> link opens the <b>Log
                                                         groups</b> page in the CloudWatch console.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Summary</b> section shows the key information reported in the <b>Log
                                                         output</b> section (the <em>REPORT</em> line in the execution log).
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The <b>Log output</b> section shows the log that Lambda generates for each invocation.
                                                      The function writes these logs to CloudWatch. The Lambda console shows these logs
                                                      for your convenience. Choose
                                                      <b>Click here</b> to add logs to the CloudWatch log group and open the <b>Log
                                                         groups</b> page in the CloudWatch console.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Run the function (choose <b>Test</b>) a few more times to gather some metrics that you can
                                             view in the next step.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Near the top of the page, choose the <b>Monitoring</b> tab. This page shows graphs for the
                                             metrics that Lambda sends to CloudWatch.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/metrics-functions-list.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                          <p>For more information on these graphs, see <a href="monitoring-functions-access-metrics.html">Monitoring functions in the AWS Lambda console</a>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="gettingstarted-image-cleanup">Clean up</h3>
                                    
                                 
                                 <p>If you are finished with the container image, see <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/delete_image.html">Deleting an image</a> in the
                                    <em>Amazon Elastic Container Registry User Guide</em></p>
                                 
                                 <p>If you are done working with your function, delete it. You can also delete the log
                                    group that stores the
                                    function's logs and the execution role that the console created.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete a Lambda function</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Actions</b>, <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete function</b> dialog box, choose <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete the log group</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/cloudwatch/home#logs:" rel="noopener noreferrer" target="_blank"><span>Log groups page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the CloudWatch
                                             console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Select the function's log group (<code class="code">/aws/lambda/my-function</code>).
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Actions</b>, <b>Delete log group(s)</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete log group(s)</b> dialog box, choose <b>Delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To delete the execution role</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/iam/home?#/roles" rel="noopener noreferrer" target="_blank"><span>Roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the IAM
                                             console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Select the function's role (<code class="code">my-function-role-31exxmpl</code>).
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Delete role</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the <b>Delete role</b> dialog box, choose <b>Yes, delete</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>You can automate the creation and cleanup of functions, log groups, and roles with
                                    AWS CloudFormation and the AWS CLI. For
                                    fully functional sample applications, see <a href="lambda-samples.html">Lambda sample applications</a>.
                                 </p>
                                  
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="getting-started.html">Getting started</div>
                                    <div id="next" class="next-link" accesskey="n" href="code-editor.html">Code editor</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/getting-started-create-function.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/getting-started-create-function.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/getting-started-create-function.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 14:59:05 GMT -->
</html>