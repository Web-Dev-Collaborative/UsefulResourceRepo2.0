<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:02:15 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Using resource-based policies for AWS Lambda - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="access-control-resource-based" />
      <meta name="default_state" content="access-control-resource-based" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="access-control-resource-based.html" />
      <meta name="description" content="AWS Lambda supports resource-based permissions policies for Lambda functions and layers. Resource-based policies let you grant usage permission to other AWS accounts on a per-resource basis. You also use a resource-based policy to allow an AWS service to invoke your function on your behalf." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Using resource-based policies for AWS Lambda - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#access-control-resource-based" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/access-control-resource-based.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/access-control-resource-based.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/access-control-resource-based.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/access-control-resource-based.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#access-control-resource-based" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/access-control-resource-based.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#permissions-resource-serviceinvoke">Granting function access to AWS services</a><a href="#permissions-resource-xaccountinvoke">Granting function access to other accounts</a><a href="#permissions-resource-xaccountlayer">Granting layer access to other accounts</a><a href="#permissions-resource-cleanup">Cleaning up resource-based policies</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="access-control-resource-based">Using resource-based policies for AWS Lambda</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>AWS Lambda supports resource-based permissions policies for Lambda functions and layers.
                                    Resource-based policies
                                    let you grant usage permission to other AWS accounts on a per-resource basis. You
                                    also use a resource-based policy
                                    to allow an AWS service to invoke your function on your behalf.
                                 </p>
                                 <p>For Lambda functions, you can <a href="#permissions-resource-xaccountinvoke">grant an account
                                       permission</a> to invoke or manage a function. You can add multiple statements to grant access to
                                    several
                                    accounts, or let any account invoke your function. You can also use the policy to
                                    <a href="#permissions-resource-serviceinvoke">grant invoke permission to an AWS service</a> that invokes a
                                    function in response to activity in your account. 
                                 </p>
                                 <div class="procedure">
                                    <p class="title"><b>To view a function's resource-based policy</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Permissions</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>The resource-based policy shows the permissions that are applied when another account
                                             or AWS service
                                             attempts to access the function. The following example shows a statement that allows
                                             Amazon S3 to invoke a function
                                             named <code class="code">my-function</code> for a bucket named <code class="code">my-bucket</code> in account
                                             <code class="code">123456789012</code>.
                                          </p>
                                          
                                          <div class="example">
                                             <p class="title"><b>Example Resource-based policy</b></p>
                                             <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Id": "default",
    "Statement": [
        <span>{</span>
            "Sid": "lambda-allow-s3-my-function",
            "Effect": "Allow",  
            "Principal": <span>{</span>
              "Service": "s3.amazonaws.com"
            },
            "Action": "lambda:InvokeFunction",
            "Resource":  "arn:aws:lambda:us-east-2:123456789012:function:my-function”
            "Condition": <span>{</span>
              "StringEquals": <span>{</span>
                "AWS:SourceAccount": "123456789012"
              },  
              "ArnLike": <span>{</span>
                "AWS:SourceArn": "arn:aws:s3:::my-bucket"   
              }
            } 
        } 
     ]
}</code></pre></div>
                                          </div>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 <p>For Lambda layers, you can only use a resource-based policy on a specific layer version,
                                    instead of the entire
                                    layer. In addition to policies that grant permission to a single account or multiple
                                    accounts, for layers, you can
                                    also grant permission to all accounts in an organization.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can only update resource-based policies for Lambda resources within the scope
                                          of the <a href="API_AddPermission.html">AddPermission</a>
                                          and <a href="API_AddLayerVersionPermission.html">AddLayerVersionPermission</a> API actions. Currently, you can't author policies for your Lambda resources in
                                          JSON, or use conditions that don't map to parameters for those actions.
                                       </p>
                                    </div>
                                 </div>
                                 <p>Resource-based policies apply to a single function, version, alias, or layer version.
                                    They grant permission to
                                    one or more services and accounts. For trusted accounts that you want to have access
                                    to multiple resources, or to
                                    use API actions that resource-based policies don't support, you can use <a href="access-control-identity-based.html">cross-account roles</a>.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#permissions-resource-serviceinvoke">Granting function access to AWS services</a></li>
                                       <li><a href="#permissions-resource-xaccountinvoke">Granting function access to other accounts</a></li>
                                       <li><a href="#permissions-resource-xaccountlayer">Granting layer access to other accounts</a></li>
                                       <li><a href="#permissions-resource-cleanup">Cleaning up resource-based policies</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="permissions-resource-serviceinvoke">Granting function access to AWS services</h2>
                                 
                                 
                                 <p>When you <a href="lambda-services.html">use an AWS service to invoke your function</a>, you grant
                                    permission in a statement on a resource-based policy. You can apply the statement
                                    to the entire function to be
                                    invoked or managed, or limit the statement to a single version or alias.
                                 </p>
                                 
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>When you add a trigger to your function with the Lambda console, the console updates
                                          the function's
                                          resource-based policy to allow the service to invoke it. To grant permissions to other
                                          accounts or services that
                                          aren't available in the Lambda console, you can use the AWS CLI.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 
                                 <p>Add a statement with the <code class="code">add-permission</code> command. The simplest resource-based policy statement
                                    allows a service to invoke a function. The following command grants Amazon SNS permission
                                    to invoke a function named
                                    <code class="code">my-function</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-permission --function-name my-function --action lambda:InvokeFunction --statement-id sns \
--principal sns.amazonaws.com --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>"Sid":"sns","Effect":"Allow","Principal":<span>{</span>"Service":"sns.amazonaws.com"},"Action":"lambda:InvokeFunction","Resource":"arn:aws:lambda:us-east-2:123456789012:function:my-function"}</code></pre>
                                 <p>This lets Amazon SNS call the <code class="code">lambda:Invoke</code> API for the function, but it doesn't restrict the Amazon SNS topic that
                                    triggers the invocation. To ensure that your function is only invoked by a specific
                                    resource, specify the Amazon
                                    Resource Name (ARN) of the resource with the <code class="code">source-arn</code> option. The following command only allows
                                    Amazon SNS to invoke the function for subscriptions to a topic named <code class="code">my-topic</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-permission --function-name my-function --action lambda:InvokeFunction --statement-id sns-my-topic \
--principal sns.amazonaws.com --source-arn arn:aws:sns:<code class="replaceable">us-east-2:123456789012:my-topic</code></code></code></pre>
                                 
                                 <p>Some services can invoke functions in other accounts. If you specify a source ARN
                                    that has your account ID in
                                    it, that isn't an issue. For Amazon S3, however, the source is a bucket whose ARN
                                    doesn't have an account ID in it.
                                    It's possible that you could delete the bucket and another account could create a
                                    bucket with the same name. Use
                                    the <code class="code">source-account</code> option with your account ID to ensure that only resources in your account can
                                    invoke the function.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-permission --function-name my-function --action lambda:InvokeFunction --statement-id s3-account \
--principal s3.amazonaws.com --source-arn arn:aws:s3:::<code class="replaceable">my-bucket-123456</code> --source-account <code class="replaceable">123456789012</code></code></code></pre>
                                  
                                 <h2 id="permissions-resource-xaccountinvoke">Granting function access to other accounts</h2>
                                 
                                 <p>To grant permissions to another AWS account, specify the account ID as the <code class="code">principal</code>. The
                                    following example grants account <code class="code">210987654321</code> permission to invoke <code class="code">my-function</code> with the
                                    <code class="code">prod</code> alias.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-permission --function-name my-function:<code class="replaceable">prod</code> --statement-id xaccount --action lambda:InvokeFunction \
--principal <code class="replaceable">210987654321</code> --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>"Sid":"xaccount","Effect":"Allow","Principal":<span>{</span>"AWS":"arn:aws:iam::210987654321:root"},"Action":"lambda:InvokeFunction","Resource":"arn:aws:lambda:us-east-2:123456789012:function:my-function"}</code></pre>
                                 <p>The resource-based policy grants permission for the other account to access the function,
                                    but doesn't allow
                                    users in that account to exceed their permissions. Users in the other account must
                                    have the corresponding <a href="access-control-identity-based.html">user permissions</a> to use the Lambda API.
                                 </p>
                                 
                                 
                                 <p>To limit access to a user or role in another account, specify the full ARN of the
                                    identity as the principal.
                                    For example, <code class="code">arn:aws:iam::123456789012:user/developer</code>.
                                 </p>
                                 
                                 <p>The <a href="configuration-aliases.html">alias</a> limits which version the other account can invoke. It
                                    requires the other account to include the alias in the function ARN.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda invoke --function-name arn:aws:lambda:us-west-2:123456789012:function:my-function:prod out</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "StatusCode": 200,
    "ExecutedVersion": "1"
}</code></pre>
                                 <p>The function owner can then update the alias to point to a new version without the
                                    caller needing to change
                                    the way they invoke your function. This ensures that the other account doesn't need
                                    to change its code to use the
                                    new version, and it only has permission to invoke the version of the function associated
                                    with the alias.
                                 </p>
                                 
                                 
                                 <p>You can grant cross-account access for most API actions that <a href="lambda-api-permissions-ref.html#permissions-resources-function">operate on an existing function</a>. For example, you could grant access to <code class="code">lambda:ListAliases</code>
                                    to let an account get a list of aliases, or <code class="code">lambda:GetFunction</code> to let them download your function
                                    code. Add each permission separately, or use <code class="code">lambda:*</code> to grant access to all actions for the
                                    specified function.
                                 </p>
                                 
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Cross-account APIs</b></p>
                                    
                                    <p>Currently, Lambda doesn’t currently support cross-account actions for all of its APIs
                                       via resource-based
                                       policies. The following APIs are supported:
                                    </p>
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="API_Invoke.html">Invoke</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetFunction.html">GetFunction</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetFunctionConfiguration.html">GetFunctionConfiguration</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_UpdateFunctionCode.html">UpdateFunctionCode</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_DeleteFunction.html">DeleteFunction</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_PublishVersion.html">PublishVersion</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_ListVersionsByFunction.html">ListVersionsByFunction</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_CreateAlias.html">CreateAlias</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetAlias.html">GetAlias</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_ListAliases.html">ListAliases</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_UpdateAlias.html">UpdateAlias</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_DeleteAlias.html">DeleteAlias</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetPolicy.html">GetPolicy</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_PutFunctionConcurrency.html">PutFunctionConcurrency</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_DeleteFunctionConcurrency.html">DeleteFunctionConcurrency</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_ListTags.html">ListTags</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_TagResource.html">TagResource</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_UntagResource.html">UntagResource</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>To grant other accounts permission for multiple functions, or for actions that don't
                                    operate on a function, we
                                    recommend that you use <a href="access-control-identity-based.html">IAM roles</a>.
                                 </p>
                                  
                                 
                                 <h2 id="permissions-resource-xaccountlayer">Granting layer access to other accounts</h2>
                                  
                                 <p>To grant layer-usage permission to another account, add a statement to the layer version's
                                    permissions policy
                                    with the <code class="code">add-layer-version-permission</code> command. In each statement, you can grant permission to a
                                    single account, all accounts, or an organization.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-layer-version-permission --layer-name xray-sdk-nodejs --statement-id xaccount \
--action lambda:GetLayerVersion  --principal 210987654321 --version-number 1 --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">e210ffdc-e901-43b0-824b-5fcd0dd26d16    <span>{</span>"Sid":"xaccount","Effect":"Allow","Principal":<span>{</span>"AWS":"arn:aws:iam::210987654321:root"},"Action":"lambda:GetLayerVersion","Resource":"arn:aws:lambda:us-east-2:123456789012:layer:xray-sdk-nodejs:1"}</code></pre>
                                 
                                 <p>Permissions apply only to a single version of a layer. Repeat the process each time
                                    that you create a new layer
                                    version.
                                 </p>
                                 
                                 
                                 <p>To grant permission to all accounts in an organization, use the <code class="code">organization-id</code> option. The
                                    following example grants all accounts in an organization permission to use version
                                    3 of a layer.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda add-layer-version-permission --layer-name my-layer \
--statement-id engineering-org --version-number 3 --principal '*' \
--action lambda:GetLayerVersion --organization-id o-t194hfs8cz --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">b0cd9796-d4eb-4564-939f-de7fe0b42236    <span>{</span>"Sid":"engineering-org","Effect":"Allow","Principal":"*","Action":"lambda:GetLayerVersion","Resource":"arn:aws:lambda:us-east-2:123456789012:layer:my-layer:3","Condition":<span>{</span>"StringEquals":<span>{</span>"aws:PrincipalOrgID":"o-t194hfs8cz"}}}"
</code></pre>
                                 
                                 <p>To grant permission to all AWS accounts, use <code class="code">*</code> for the principal, and omit the organization ID.
                                    For multiple accounts or organizations, you need to add multiple statements.
                                 </p>
                                  
                                 
                                 <h2 id="permissions-resource-cleanup">Cleaning up resource-based policies</h2>
                                 
                                 
                                 <p>To view a function's resource-based policy, use the <code class="code">get-policy</code> command.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-policy --function-name my-function --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>"Version":"2012-10-17","Id":"default","Statement":[<span>{</span>"Sid":"sns","Effect":"Allow","Principal":<span>{</span>"Service":"s3.amazonaws.com"},"Action":"lambda:InvokeFunction","Resource":"arn:aws:lambda:us-east-2:123456789012:function:my-function","Condition":<span>{</span>"ArnLike":<span>{</span>"AWS:SourceArn":"arn:aws:sns:us-east-2:123456789012:lambda*"}}}]}      7c681fc9-b791-4e91-acdf-eb847fdaa0f0</code></pre>
                                 <p>For versions and aliases, append the version number or alias to the function name.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-policy --function-name my-function:PROD</code></code></pre>
                                 
                                 <p>To remove permissions from your function, use <code class="code">remove-permission</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda remove-permission --function-name example --statement-id sns</code></code></pre>
                                 
                                 <p>Use the <code class="code">get-layer-version-policy</code> command to view the permissions on a layer.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-layer-version-policy --layer-name my-layer --version-number 3 --output text</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">b0cd9796-d4eb-4564-939f-de7fe0b42236    <span>{</span>"Sid":"engineering-org","Effect":"Allow","Principal":"*","Action":"lambda:GetLayerVersion","Resource":"arn:aws:lambda:us-west-2:123456789012:layer:my-layer:3","Condition":<span>{</span>"StringEquals":<span>{</span>"aws:PrincipalOrgID":"o-t194hfs8cz"}}}"</code></pre>
                                 <p>Use <code class="code">remove-layer-version-permission</code> to remove statements from the policy.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda remove-layer-version-permission --layer-name my-layer --version-number 3 --statement-id engineering-org</code></code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="lambda-intro-execution-role.html">Execution role</div>
                                    <div id="next" class="next-link" accesskey="n" href="access-control-identity-based.html">User policies</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/access-control-resource-based.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/access-control-resource-based.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/access-control-resource-based.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:02:27 GMT -->
</html>