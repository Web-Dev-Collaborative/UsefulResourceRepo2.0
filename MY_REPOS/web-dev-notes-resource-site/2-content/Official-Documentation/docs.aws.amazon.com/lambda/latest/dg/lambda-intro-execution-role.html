<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:01:19 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>AWS Lambda execution role - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="lambda-intro-execution-role" />
      <meta name="default_state" content="lambda-intro-execution-role" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="lambda-intro-execution-role.html" />
      <meta name="description" content="A Lambda function's execution role is an AWS Identity and Access Management (IAM) role that grants the function permission to access AWS services and resources. You provide this role when you create a function, and Lambda assumes the role when your function is invoked. You can create an execution role for development that has permission to send logs to Amazon CloudWatch and to upload trace data to AWS X-Ray." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>AWS Lambda execution role - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#lambda-intro-execution-role" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/lambda-intro-execution-role.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-intro-execution-role.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-intro-execution-role.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-intro-execution-role.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#lambda-intro-execution-role" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/lambda-intro-execution-role.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#permissions-executionrole-console">Creating an execution role in the IAM console</a><a href="#permissions-executionrole-api">Managing roles with the IAM API</a><a href="#permissions-executionrole-features">AWS managed policies for Lambda features</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="lambda-intro-execution-role">AWS Lambda execution role</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>A Lambda function's execution role is an AWS Identity and Access Management (IAM)
                                    role that grants the function permission to access
                                    AWS services and resources. You provide this role when you create a function, and
                                    Lambda assumes the role when your
                                    function is invoked. You can create an execution role for development that has permission
                                    to send logs to Amazon CloudWatch
                                    and to upload trace data to AWS X-Ray.
                                 </p>
                                 <div class="procedure">
                                    <p class="title"><b>To view a function's execution role</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Permissions</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Resource summary</b>, view the services and resources that the function can access.
                                             The following example shows the CloudWatch Logs permissions that Lambda adds to an
                                             execution role when you create it in the
                                             Lambda console.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/permissions-executionrole.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          A execution role in the Lambda console.&#xA;        " />
                                              
                                              
                                             
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose a service from the dropdown list to see permissions related to that service.</p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 <p>You can add or remove permissions from a function's execution role at any time, or
                                    configure your function to
                                    use a different role. Add permissions for any services that your function calls with
                                    the AWS SDK, and for services
                                    that Lambda uses to enable optional features.
                                 </p>
                                 <p>When you add permissions to your function, make an update to its code or configuration
                                    as well. This forces
                                    running instances of your function, which have out-of-date credentials, to stop and
                                    be replaced.
                                 </p>
                                 
                                 <h2 id="permissions-executionrole-console">Creating an execution role in the IAM console</h2>
                                 
                                 
                                 <p>By default, Lambda creates an execution role with minimal permissions when you <a href="getting-started-create-function.html">create a function in the Lambda console</a>. You can also create an
                                    execution role in the IAM console.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an execution role in the IAM console</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" rel="noopener noreferrer" target="_blank"><span>Roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the IAM console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create role</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Common use cases</b>, choose <b>Lambda</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Next: Permissions</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Attach permissions policies</b>, choose the AWS managed policies
                                             <b>AWSLambdaBasicExecutionRole</b> and <b>AWSXRayDaemonWriteAccess</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Next: Tags</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Next: Review</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>For <b>Role name</b>, enter <code class="userinput">lambda-role</code>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create role</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>For detailed instructions, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html#roles-creatingrole-service-console">Creating a role
                                       for an AWS service (console)</a> in the <em>IAM User Guide</em>.
                                 </p>
                                  
                                 
                                 <h2 id="permissions-executionrole-api">Managing roles with the IAM API</h2>
                                 
                                 <p>To create an execution role with the AWS Command Line Interface (AWS CLI), use the
                                    <code class="code">create-role</code> command.
                                 </p>
                                 
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws iam create-role --role-name lambda-ex --assume-role-policy-document file://trust-policy.json</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Role": <span>{</span>
        "Path": "/",
        "RoleName": "lambda-ex",
        "RoleId": "AROAQFOXMPL6TZ6ITKWND",
        "Arn": "arn:aws:iam::123456789012:role/lambda-ex",
        "CreateDate": "2020-01-17T23:19:12Z",
        "AssumeRolePolicyDocument": <span>{</span>
            "Version": "2012-10-17",
            "Statement": [
                <span>{</span>
                    "Effect": "Allow",
                    "Principal": <span>{</span>
                        "Service": "lambda.amazonaws.com"
                    },
                    "Action": "sts:AssumeRole"
                }
            ]
        }
    }
}</code></pre>
                                 <p>The <code>trust-policy.json</code> file is a JSON file in the current directory that defines the
                                    <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html">trust policy</a> for the role. This trust policy
                                    allows Lambda to use the role's permissions by giving the service principal <code class="code">lambda.amazonaws.com</code>
                                    permission to call the AWS Security Token Service <code class="code">AssumeRole</code> action.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example trust-policy.json</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "lambda.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}</code></pre></div>
                                 </div>
                                 
                                 <p>You can also specify the trust policy inline. Requirements for escaping quotes in
                                    the JSON string vary
                                    depending on your shell.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws iam create-role --role-name lambda-ex --assume-role-policy-document '<span>{</span>"Version": "2012-10-17","Statement": [<span>{</span> "Effect": "Allow", "Principal": <span>{</span>"Service": "lambda.amazonaws.com"}, "Action": "sts:AssumeRole"}]}'</code></code></pre>
                                 <p>To add permissions to the role, use the <code class="code">attach-policy-to-role</code> command. Start by adding the
                                    <code class="code">AWSLambdaBasicExecutionRole</code> managed policy.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws iam attach-role-policy --role-name lambda-ex --policy-arn arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole</code></code></pre>
                                 
                                  
                                 <h2 id="permissions-executionrole-features">AWS managed policies for Lambda features</h2>
                                 
                                 
                                 <p>The following AWS managed policies provide permissions that are required to use Lambda
                                    features:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaBasicExecutionRole</b> – Permission to upload logs to
                                             CloudWatch.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaDynamoDBExecutionRole</b> – Permission to read records from
                                             an Amazon DynamoDB stream.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaKinesisExecutionRole</b> – Permission to read events from an
                                             Amazon Kinesis data stream or consumer.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaMQExecutionRole</b> – Permission to read records from an
                                             Amazon MQ broker.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaMSKExecutionRole</b> – Permission to read records from an
                                             Amazon Managed Streaming for Apache Kafka (Amazon MSK) cluster.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaSQSQueueExecutionRole</b> – Permission to read a message from
                                             an Amazon Simple Queue Service (Amazon SQS) queue.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSLambdaVPCAccessExecutionRole</b> – Permission to manage elastic
                                             network interfaces to connect your function to a virtual private cloud (VPC).
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>AWSXRayDaemonWriteAccess</b> – Permission to upload trace data to
                                             X-Ray.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>CloudWatchLambdaInsightsExecutionRolePolicy</b> – Permission to write runtime metrics to CloudWatch Lambda Insights.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>For some features, the Lambda console attempts to add missing permissions to your
                                    execution role in a customer
                                    managed policy. These policies can become numerous. To avoid creating extra policies,
                                    add the relevant AWS
                                    managed policies to your execution role before enabling features.
                                 </p>
                                 
                                 
                                 <p>When you use an <a href="invocation-eventsourcemapping.html">event source mapping</a> to invoke your
                                    function, Lambda uses the execution role to read event data. For example, an event
                                    source mapping for Kinesis reads
                                    events from a data stream and sends them to your function in batches. You can use
                                    event source mappings with the
                                    following services:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Services that Lambda reads events from</b></p>
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="with-ddb.html">Amazon DynamoDB</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="with-kinesis.html">Amazon Kinesis</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="with-mq.html">Amazon MQ</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="with-msk.html">Amazon Managed Streaming for Apache Kafka</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="kafka-smaa.html">Self-managed Apache Kafka</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="with-sqs.html">Amazon Simple Queue Service</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>In addition to the AWS managed policies, the Lambda console provides templates for
                                    creating a custom policy
                                    with permissions for additional use cases. When you create a function in the Lambda
                                    console, you can choose to
                                    create a new execution role with permissions from one or more templates. These templates
                                    are also applied
                                    automatically when you create a function from a blueprint, or when you configure options
                                    that require access to
                                    other services. Example templates are available in this guide's <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/master/iam-policies" rel="noopener noreferrer" target="_blank"><span>GitHub
                                          repository</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                 </p>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="lambda-permissions.html">Permissions</div>
                                    <div id="next" class="next-link" accesskey="n" href="access-control-resource-based.html">Resource-based policies</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-intro-execution-role.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-intro-execution-role.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:01:20 GMT -->
</html>