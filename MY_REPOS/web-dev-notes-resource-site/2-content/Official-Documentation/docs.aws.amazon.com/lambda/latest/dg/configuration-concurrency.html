<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:03:04 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Managing concurrency for a Lambda function - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="configuration-concurrency" />
      <meta name="default_state" content="configuration-concurrency" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="configuration-concurrency.html" />
      <meta name="description" content="Concurrency is the number of requests that your function is serving at any given time. When your function is invoked, Lambda allocates an instance of it to process the event. When the function code finishes running, it can handle another request. If the function is invoked again while a request is still being processed, another instance is allocated, which increases the function's concurrency. Concurrency is subject to a Regional" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Managing concurrency for a Lambda function - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#configuration-concurrency" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/configuration-concurrency.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-concurrency.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-concurrency.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-concurrency.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#configuration-concurrency" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/configuration-concurrency.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#configuration-concurrency-reserved">Configuring reserved concurrency</a><a href="#configuration-concurrency-provisioned">Configuring provisioned concurrency</a><a href="#configuration-concurrency-api">Configuring concurrency with the Lambda API</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="configuration-concurrency">Managing concurrency for a Lambda function</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Concurrency is the number of requests that your function is serving at any given time.
                                    When your function is
                                    invoked, Lambda allocates an instance of it to process the event. When the function
                                    code finishes running, it can
                                    handle another request. If the function is invoked again while a request is still
                                    being processed, another instance
                                    is allocated, which increases the function's concurrency. Concurrency is subject to
                                    a Regional <a href="gettingstarted-limits.html">quota</a> that is shared by all functions in a
                                    Region.
                                 </p>
                                 <p>There are two types of concurrency available:</p>
                                 <div class="itemizedlist">
                                    	
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p>Reserved concurrency – Reserved concurrency creates a pool of requests that can only
                                             be used by its function, and also prevents its function from using unreserved concurrency.
                                          </p>
                                       </li>
                                       <li class="listitem">
                                          <p>Provisioned concurrency – Provisioned concurrency initializes a requested number of
                                             execution environments so that they are prepared to respond to your function's invocations.
                                          </p> 
                                       </li>
                                    </ul>
                                 </div>
                                 <p>This topic details how to manage and configure reserved and provisioned concurrency.
                                    To learn about how concurrency interacts with scaling, <a href="invocation-scaling.html">see AWS Lambda function scaling</a>.
                                 </p>
                                 <p>To ensure that a function can always reach a certain level of concurrency, configure
                                    the function
                                    with <a href="#configuration-concurrency-reserved">reserved concurrency</a>. When a function has reserved
                                    concurrency, no other function can use that concurrency. Reserved concurrency also
                                    limits the maximum concurrency
                                    for the function, and applies to the function as a whole, including versions and aliases.
                                 </p>
                                 <p>When Lambda allocates an instance of your function, the <a href="lambda-runtimes.html">runtime</a> loads your
                                    function's code and runs initialization code that you define outside of the handler.
                                    If your code and dependencies
                                    are large, or you create SDK clients during initialization, this process can take
                                    some time. As your function <a href="invocation-scaling.html">scales up</a>, this causes the portion of requests that are served by new instances to have
                                    higher latency than the rest.
                                 </p>
                                 <p>To enable your function to scale without fluctuations in latency, use <a href="#configuration-concurrency-provisioned">provisioned concurrency</a>. By allocating provisioned
                                    concurrency before an increase in invocations, you can ensure that all requests are
                                    served by initialized instances
                                    with very low latency. You can configure provisioned concurrency on a version of a
                                    function, or on an alias.
                                 </p>
                                 <p>Lambda also integrates with <a href="https://docs.aws.amazon.com/autoscaling/application/userguide/">Application Auto Scaling</a>. You can configure Application Auto Scaling to
                                    manage provisioned concurrency on a schedule or based on utilization. Use scheduled
                                    scaling to increase provisioned
                                    concurrency in anticipation of peak traffic. To increase provisioned concurrency automatically
                                    as needed, use <a href="#configuration-concurrency-api">the Application Auto Scaling API</a> to register a target and create a scaling
                                    policy.
                                 </p>
                                 <p>Provisioned concurrency counts towards a function's reserved concurrency and Regional
                                    quotas. If the amount of
                                    provisioned concurrency on a function's versions and aliases adds up to the function's
                                    reserved concurrency, all
                                    invocations run on provisioned concurrency. This configuration also has the effect
                                    of throttling the unpublished
                                    version of the function (<code class="code">$LATEST</code>), which prevents it from executing.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can't allocate more provisioned concurrency than reserved concurrency for a function.</p>
                                    </div>
                                 </div>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Sections</strong></p>
                                    <ul>
                                       <li><a href="#configuration-concurrency-reserved">Configuring reserved concurrency</a></li>
                                       <li><a href="#configuration-concurrency-provisioned">Configuring provisioned concurrency</a></li>
                                       <li><a href="#configuration-concurrency-api">Configuring concurrency with the Lambda API</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="configuration-concurrency-reserved">Configuring reserved concurrency</h2>
                                 
                                 
                                 <p>To manage reserved concurrency settings for a function, use the Lambda console.</p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To reserve concurrency for a function</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Concurrency</b>, choose <b>Edit</b>. 
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Reserve concurrency</b>. Enter the amount of concurrency to reserve for the
                                             function.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Save</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>You can reserve up to the <b>Unreserved account concurrency</b> value that is shown, minus 100
                                    for functions that don't have reserved concurrency. To throttle a function, set the
                                    reserved concurrency to zero.
                                    This stops any events from being processed until you remove the limit.
                                 </p>
                                 
                                 
                                 <p>The following example shows two functions with pools of reserved concurrency, and
                                    the unreserved concurrency
                                    pool used by other functions. Throttling errors occur when all of the concurrency
                                    in a pool is in use.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/features-concurrency-reserved.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Reserved concurrency allocated to two functions.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Legend</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.concurrency.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Function concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.reserved.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Reserved concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.unreserved.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Unreserved concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.throttling.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Throttling
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Reserving concurrency has the following effects.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><b>Other functions can't prevent your function from scaling</b> – All of
                                             your account's functions in the same Region without reserved concurrency share the
                                             pool of unreserved
                                             concurrency. Without reserved concurrency, other functions can use up all of the available
                                             concurrency. This
                                             prevents your function from scaling up when needed.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Your function can't scale out of control</b> – Reserved concurrency
                                             also limits your function from using concurrency from the unreserved pool, which caps
                                             its maximum concurrency.
                                             You can reserve concurrency to prevent your function from using all the available
                                             concurrency in the Region,
                                             or from overloading downstream resources.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Setting per-function concurrency can impact the concurrency pool that is available
                                    to other functions. To
                                    avoid issues, limit the number of users who can use the <code class="code">PutFunctionConcurrency</code> and
                                    <code class="code">DeleteFunctionConcurrency</code> API operations.
                                 </p>
                                  
                                 
                                 <h2 id="configuration-concurrency-provisioned">Configuring provisioned concurrency</h2>
                                 
                                 
                                 <p>To manage provisioned concurrency settings for a version or alias, use the Lambda
                                    console.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To provision concurrency for an alias</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Lambda console.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Choose a function.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Under <b>Provisioned concurrency configurations</b>, choose <b>Add</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose an alias or version.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Enter the amount of provisioned concurrency to allocate.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Save</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <p>You can manage provisioned concurrency for all aliases and versions from the function
                                    configuration page. The
                                    list of provisioned concurrency configurations shows the allocation progress of each
                                    configuration. Provisioned
                                    concurrency settings are also available on the configuration page for each version
                                    and alias.
                                 </p>
                                 
                                 
                                 <p>In the following example, the <code class="code">my-function-DEV</code> and <code class="code">my-function-PROD</code> functions are
                                    configured with both reserved and provisioned concurrency. For <code class="code">my-function-DEV</code>, the full pool of
                                    reserved concurrency is also provisioned concurrency. In this case, all invocations
                                    either run on provisioned
                                    concurrency or are throttled. For <code class="code">my-function-PROD</code>, a portion of the reserved concurrency pool is
                                    standard concurrency. When all provisioned concurrency is in use, the function scales
                                    on standard concurrency to
                                    serve any additional requests.
                                 </p>
                                 
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/features-concurrency-provisioned.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        A function with reserved concurrency and provisioned concurrency.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Legend</b></p>
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.concurrency.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Function concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.reserved.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Reserved concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.provisioned.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Provisioned concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.unreserved.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Unreserved concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-concurrency.throttling.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Throttling
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>Provisioned concurrency does not come online immediately after you configure it. Lambda
                                    starts allocating
                                    provisioned concurrency after a minute or two of preparation. Similar to how functions
                                    <a href="invocation-scaling.html">scale under load</a>, up to 3000 instances of the function can be initialized at once, depending on the
                                    Region. After the initial burst, instances are allocated at a steady rate of 500 per
                                    minute until the request is
                                    fulfilled. When you request provisioned concurrency for multiple functions or versions
                                    of a function in the same
                                    Region, scaling quotas apply across all requests.
                                 </p>
                                  
                                 <div class="mediaobject">
                                     
                                    <img src="images/features-scaling-provisioned.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Scaling with provisioned concurrency.&#xA;    " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Legend</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.instances.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Function instances
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.open.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Open requests
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.provisioned.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Provisioned concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.standard.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Standard concurrency
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>To optimize latency, you can customize the initialization behavior for functions that
                                    use provisioned
                                    concurrency . You can run initialization code for provisioned concurrency instances
                                    without impacting latency,
                                    because the initialization code runs at allocation time. However, the initialization
                                    code for an on-demand
                                    instance directly impacts the latency of the first invocation. For an on-demand instance,
                                    you may choose to defer
                                    initialization for a specific capability until the function needs that capability.
                                    
                                 </p>
                                 
                                 <p>To determine the type of initialization, check the value of AWS_LAMBDA_INITIALIZATION_TYPE.
                                    Lambda sets this
                                    environment variable to <code class="code">provisioned-concurrency</code> or <code class="code">on-demand</code>. The value of
                                    AWS_LAMBDA_INITIALIZATION_TYPE is immutable and does not change over the lifetime
                                    of the execution
                                    environment.
                                 </p>
                                 
                                 <p>If you use the .NET 3.1 runtime, you can configure the AWS_LAMBDA_DOTNET_PREJIT environment
                                    variable to
                                    improve the latency for functions that use provisioned concurrency. The .NET runtime
                                    lazily compiles and
                                    initializes each library that your code calls for the first time. As a result, the
                                    first invocation of a Lambda
                                    function can take longer than subsequent invocations. When you set AWS_LAMBDA_DOTNET_PREJIT
                                    to
                                    <code class="code">ProvisionedConcurrency</code>, Lambda performs ahead-of-time JIT compilation for common system
                                    dependencies. Lambda performs this initialization optimization for provisioned concurrency
                                    instances only, which
                                    results in faster performance for the first invocation.  If you set the environment
                                    variable to
                                    <code class="code">Always</code>, Lambda performs ahead-of-time JIT compilation for every initialization. If you set
                                    the
                                    environment variable to <code class="code">Never</code>, ahead-of-time JIT compilation is disabled. The default value for
                                    AWS_LAMBDA_DOTNET_PREJIT is <code class="code">ProvisionedConcurrency</code>. 
                                 </p>
                                 
                                 
                                 <p>For provisioned concurrency instances, your function's <a href="gettingstarted-features.html#gettingstarted-features-programmingmodel">initialization code</a> runs during allocation and every
                                    few hours, as running instances of your function are recycled. You can see the initialization
                                    time in logs and
                                    <a href="services-xray.html">traces</a> after an instance processes a request. However, initialization is
                                    billed even if the instance never processes a request. Provisioned concurrency runs
                                    continually and is billed
                                    separately from initialization and invocation costs. For details, see <a href="https://aws.amazon.com/lambda/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS Lambda pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                 </p>
                                 
                                 
                                 <p>Each version of a function can only have one provisioned concurrency configuration.
                                    This can be directly on
                                    the version itself, or on an alias that points to the version. Two aliases can't allocate
                                    provisioned concurrency
                                    for the same version. Also, you can't allocate provisioned concurrency on an alias
                                    that points to the unpublished
                                    version (<code class="code">$LATEST</code>).
                                 </p>
                                 
                                 
                                 <p>When you change the version that an alias points to, provisioned concurrency is deallocated
                                    from the old
                                    version and then allocated to the new version. You can add a routing configuration
                                    to an alias that has
                                    provisioned concurrency. However, you can't manage provisioned concurrency settings
                                    on the alias while the routing
                                    configuration is in place.
                                 </p>
                                 
                                 
                                 <p>Lambda emits the following metrics for provisioned concurrency:</p>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Provisioned concurrency metrics</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><code class="code">ProvisionedConcurrentExecutions</code></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">ProvisionedConcurrencyInvocations</code></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">ProvisionedConcurrencySpilloverInvocations</code></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">ProvisionedConcurrencyUtilization</code></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>For details, see <a href="monitoring-metrics.html">Working with AWS Lambda function metrics</a>.
                                 </p>
                                  
                                 
                                 <h2 id="configuration-concurrency-api">Configuring concurrency with the Lambda API</h2>
                                 
                                 
                                 <p>To manage concurrency settings and autoscaling with the AWS CLI or AWS SDK, use the
                                    following API
                                    operations.
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="API_PutFunctionConcurrency.html">PutFunctionConcurrency</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetFunctionConcurrency.html">GetFunctionConcurrency</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_DeleteFunctionConcurrency.html">DeleteFunctionConcurrency</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_PutProvisionedConcurrencyConfig.html">PutProvisionedConcurrencyConfig</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetProvisionedConcurrencyConfig.html">GetProvisionedConcurrencyConfig</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_ListProvisionedConcurrencyConfigs.html">ListProvisionedConcurrencyConfigs</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_DeleteProvisionedConcurrencyConfig.html">DeleteProvisionedConcurrencyConfig</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="API_GetAccountSettings.html">GetAccountSettings</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>(Application Auto Scaling) <a href="https://docs.aws.amazon.com/autoscaling/application/APIReference/API_RegisterScalableTarget.html">RegisterScalableTarget</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>(Application Auto Scaling) <a href="https://docs.aws.amazon.com/autoscaling/application/APIReference/API_PutScalingPolicy.html">PutScalingPolicy</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>To configure reserved concurrency with the AWS CLI, use the <code class="code">put-function-concurrency</code> command. The
                                    following command reserves a concurrency of 100 for a function named <code class="code">my-function</code>:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda put-function-concurrency --function-name my-function --reserved-concurrent-executions 100</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "ReservedConcurrentExecutions": 100
}</code></pre>
                                 
                                 <p>To allocate provisioned concurrency for a function, use <code class="code">put-provisioned-concurrency-config</code>. The
                                    following command allocates a concurrency of 100 for the <code class="code">BLUE</code> alias of a function named
                                    <code class="code">my-function</code>:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda put-provisioned-concurrency-config --function-name my-function \
--qualifier BLUE --provisioned-concurrent-executions 100</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Requested ProvisionedConcurrentExecutions": 100,
    "Allocated ProvisionedConcurrentExecutions": 0,
    "Status": "IN_PROGRESS",
    "LastModified": "2019-11-21T19:32:12+0000"
}</code></pre>
                                 
                                 <p>To configure Application Auto Scaling to manage provisioned concurrency, use the Application
                                    Auto Scaling to configure <a href="https://docs.aws.amazon.com/autoscaling/application/userguide/application-auto-scaling-target-tracking.html">target tracking scaling</a>. First,
                                    register a function's alias as a scaling target. The following example registers the
                                    <code class="code">BLUE</code> alias of a
                                    function named <code class="code">my-function</code>:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws application-autoscaling register-scalable-target --service-namespace lambda \
      --resource-id function:my-function:BLUE --min-capacity 1 --max-capacity 100 \
      --scalable-dimension lambda:function:ProvisionedConcurrency</code></code></pre>
                                 <p>Next, apply a scaling policy to the target. The following example configures Application
                                    Auto Scaling to adjust the
                                    provisioned concurrency configuration for an alias to keep utilization near 70 percent:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws application-autoscaling put-scaling-policy --service-namespace lambda \
--scalable-dimension lambda:function:ProvisionedConcurrency --resource-id function:my-function:BLUE \
--policy-name my-policy --policy-type TargetTrackingScaling \
--target-tracking-scaling-policy-configuration '<span>{</span> "TargetValue": 0.7, "PredefinedMetricSpecification": <span>{</span> "PredefinedMetricType": "LambdaProvisionedConcurrencyUtilization" }}'</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "PolicyARN": "arn:aws:autoscaling:us-east-2:123456789012:scalingPolicy:12266dbb-1524-xmpl-a64e-9a0a34b996fa:resource/lambda/function:my-function:BLUE:policyName/my-policy",
    "Alarms": [
        <span>{</span>
            "AlarmName": "TargetTracking-function:my-function:BLUE-AlarmHigh-aed0e274-xmpl-40fe-8cba-2e78f000c0a7",
            "AlarmARN": "arn:aws:cloudwatch:us-east-2:123456789012:alarm:TargetTracking-function:my-function:BLUE-AlarmHigh-aed0e274-xmpl-40fe-8cba-2e78f000c0a7"
        },
        <span>{</span>
            "AlarmName": "TargetTracking-function:my-function:BLUE-AlarmLow-7e1a928e-xmpl-4d2b-8c01-782321bc6f66",
            "AlarmARN": "arn:aws:cloudwatch:us-east-2:123456789012:alarm:TargetTracking-function:my-function:BLUE-AlarmLow-7e1a928e-xmpl-4d2b-8c01-782321bc6f66"
        }
    ]
}</code></pre>
                                 <p>Application Auto Scaling creates two alarms in CloudWatch. The first alarm triggers
                                    when the utilization of provisioned concurrency
                                    consistently exceeds 70 percent. When this happens, Application Auto Scaling allocates
                                    more provisioned concurrency to reduce
                                    utilization. The second alarm triggers when utilization is consistently less than
                                    63 percent (90 percent of the 70
                                    percent target). When this happens, Application Auto Scaling reduces the alias's provisioned
                                    concurrency.
                                 </p>
                                  
                                 <p>In the following example, a function scales between a minimum and maximum amount of
                                    provisioned concurrency
                                    based on utilization. When the number of open requests increases, Application Auto
                                    Scaling increases provisioned concurrency in
                                    large steps until it reaches the configured maximum. The function continues to scale
                                    on standard concurrency until
                                    utilization starts to drop. When utilization is consistently low, Application Auto
                                    Scaling decreases provisioned concurrency in
                                    smaller periodic steps.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/features-scaling-provisioned-auto.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Autoscaling provisioned concurrency with Application Auto Scaling target tracking.&#xA;    " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Legend</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.instances.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Function instances
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.open.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Open requests
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.provisioned.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Provisioned concurrency
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><span class="inlinemediaobject">
                                                 
                                                <img src="images/features-scaling-provisioned.standard.png" class="aws-docs-img-whiteBg aws-docs-img-xs-padding" />
                                                 
                                                </span> Standard concurrency
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 <p>To view your account's concurrency quotas in a Region, use <code class="code">get-account-settings</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-account-settings</code></code></pre>
                                 <p>You should see the following output:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "AccountLimit": <span>{</span>
        "TotalCodeSize": 80530636800,
        "CodeSizeUnzipped": 262144000,
        "CodeSizeZipped": 52428800,
        <code class="userinput">"ConcurrentExecutions": 1000,
        "UnreservedConcurrentExecutions": 900</code>
    },
    "AccountUsage": <span>{</span>
        "TotalCodeSize": 174913095,
        "FunctionCount": 52
    }
}</code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="configuration-envvars.html">Environment variables</div>
                                    <div id="next" class="next-link" accesskey="n" href="configuration-versions.html">Versions</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-concurrency.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-concurrency.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:03:21 GMT -->
</html>