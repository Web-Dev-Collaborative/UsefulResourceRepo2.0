<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/csharp-handler.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:49 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>AWS Lambda function handler in C# - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="csharp-handler" />
      <meta name="default_state" content="csharp-handler" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-handler.html" />
      <meta name="description" content="You define a Lambda function handler as an instance or static method in a class. If you want access to the Lambda context object, it is available by defining a method parameter of type ILambdaContext , an interface you can use to access information about the current invocation, such as the name of the current function, the memory limit, execution time remaining, and logging." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>AWS Lambda function handler in C# - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#csharp-handler" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/csharp-handler.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-handler.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-handler.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-handler.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-dg.pdf#csharp-handler" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/csharp-handler.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#csharp-handler-streams">Handling streams</a><a href="#csharp-handler-types">Handling standard data types</a><a href="#csharp-handler-signatures">Handler signatures</a><a href="#csharp-handler-serializer">Serializing Lambda functions</a><a href="#csharp-handler-restrictions">Lambda function handler restrictions</a><a href="#csharp-handler-async">Using async in C# functions with AWS Lambda</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="csharp-handler">AWS Lambda function handler in C#</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The AWS Lambda function handler is the method in your function code that processes
                                    events. When your function is
                                    invoked, Lambda runs the handler method. When the handler exits or returns a response,
                                    it becomes available to handle
                                    another event.
                                 </p>
                                 <p>You define a Lambda function handler as an instance or static method in a class. If
                                    you want access to the Lambda
                                    context object, it is available by defining a method parameter of type <em>ILambdaContext</em>, an
                                    interface you can use to access information about the current invocation, such as
                                    the name of the current function,
                                    the memory limit, execution time remaining, and logging. 
                                 </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="replaceable">returnType</code> <code class="replaceable">handler-name</code>(<code class="replaceable">inputType</code> input, ILambdaContext context) <span>{</span>
   ...
}</code></pre><p>In the syntax, note the following:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">inputType</code> – The first handler parameter is the input to the handler, which
                                             can be event data (published by an event source) or custom input that you provide
                                             such as a string or any custom
                                             data object. 
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">returnType</code> – If you plan to invoke the Lambda function synchronously (using
                                             the <code class="code">RequestResponse</code> invocation type), you can return the output of your function using any of the
                                             supported data types. For example, if you use a Lambda function as a mobile application
                                             backend, you are invoking
                                             it synchronously. Your output data type will be serialized into JSON. 
                                          </p>
                                          
                                          <p>If you plan to invoke the Lambda function asynchronously (using the <code class="code">Event</code> invocation type), the
                                             <code class="code">returnType</code> should be <code class="code">void</code>. For example, if you use AWS Lambda with event sources such
                                             as Amazon S3 or Amazon SNS, these event sources invoke the Lambda function using the
                                             <code class="code">Event</code> invocation
                                             type.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="code">ILambdaContext context</code> – The second argument in the handler signature is optional. It
                                             provides access to the <a href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-context.html">context object</a> which has information about
                                             the function and request.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="csharp-handler-streams">Handling streams</h2>
                                 
                                 <p>Only the <code class="code">System.IO.Stream</code> type is supported as an input parameter by default. 
                                 </p>
                                 
                                 <p>For example, consider the following C# example code. </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">using System.IO;

namespace Example
<span>{</span>            
  public class Hello
  <span>{</span>
    public Stream MyHandler(Stream stream)
    <span>{</span>
       //function logic
    }
  }
}</code></pre>
                                 <p>In the example C# code, the first handler parameter is the input to the handler (MyHandler),
                                    which can be
                                    event data (published by an event source such as Amazon S3) or custom input you provide
                                    such as a <code class="code">Stream</code>
                                    (as in this example) or any custom data object. The output is of type <code class="code">Stream</code>. 
                                 </p>
                                  
                                 
                                 <h2 id="csharp-handler-types">Handling standard data types</h2>
                                 
                                 <p>All other types, as listed below, require you to specify a serializer.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Primitive .NET types (such as string or int).</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Collections and maps - IList, IEnumerable, IList&lt;T&gt;, Array, IDictionary, IDictionary&lt;TKey,
                                             TValue&gt;
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>POCO types (Plain old CLR objects)</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Predefined AWS event types</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>For asynchronous invocations the return-type will be ignored by Lambda. The return
                                             type may be set to void
                                             in such cases.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If you are using .NET asynchronous programming, the return type can be Task and Task&lt;T&gt;
                                             types and
                                             use <code class="code">async</code> and <code class="code">await</code> keywords. For more information, see <a href="#csharp-handler-async">Using async in C# functions with AWS Lambda</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Unless your function input and output parameters are of type <code class="code">System.IO.Stream</code>, you will need to
                                    serialize them. AWS Lambda provides a default serializer that can be applied at the
                                    assembly or method level of
                                    your application, or you can define your own by implementing the <code class="code">ILambdaSerializer</code> interface provided
                                    by the <code class="code">Amazon.Lambda.Core</code> library. For more information, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-package.html">Deploy C# Lambda functions with .zip file archives</a>.
                                 </p>
                                 
                                 <p> To add the default serializer attribute to a method, first add a dependency on
                                    <code class="code">Amazon.Lambda.Serialization.Json</code> in your <code class="code">.csproj</code> file. 
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;
    &lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netcoreapp3.1&lt;/TargetFramework&gt;
    &lt;GenerateRuntimeConfigurationFiles&gt;true&lt;/GenerateRuntimeConfigurationFiles&gt;
    &lt;AssemblyName&gt;AssemblyName&lt;/AssemblyName&gt;
    &lt;/PropertyGroup&gt;
      
    &lt;ItemGroup&gt;
    &lt;PackageReference Include="Amazon.Lambda.Core" Version="1.2.0" /&gt;
    &lt;PackageReference Include="Amazon.Lambda.APIGatewayEvents" Version="2.3.0" /&gt;
    &lt;PackageReference Include="Amazon.Lambda.Serialization.Json" Version="1.8.0" /&gt;
    &lt;PackageReference Include="Newtonsoft.Json" Version="12.0.1" /&gt;
    &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre>
                                 <p> The example below illustrates the flexibility you can leverage by specifying the
                                    default Json.NET serializer
                                    on one method and another of your choosing on a different method:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">public class ProductService<span>{</span>
    [LambdaSerializer(typeof(Amazon.Lambda.Serialization.Json.JsonSerializer))]
    public Product DescribeProduct(DescribeProductRequest request)
    <span>{</span>
      return catalogService.DescribeProduct(request.Id);
    }
   
   [LambdaSerializer(typeof(MyJsonSerializer))]
   public Customer DescribeCustomer(DescribeCustomerRequest request)
   <span>{</span>
      return customerService.DescribeCustomer(request.Id);
   }
}</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>If you are using .NET Core 3.1, we recommend that you use the <a href="https://github.com/aws/aws-lambda-dotnet/tree/0eff7ab687bbfc1e026feee1de336849e0315bc6/Libraries/src/Amazon.Lambda.Serialization.SystemTextJson" rel="noopener noreferrer" target="_blank"><span>
                                                Amazon.Lambda.Serialization.SystemTextJson</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> serializer.
                                          This package provides a performance improvement over <code class="code">Amazon.Lambda.Serialization.Json</code>.
                                          
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="csharp-handler-signatures">Handler signatures</h2>
                                 
                                 <p>When creating Lambda functions, you have to provide a handler string that tells AWS
                                    Lambda where to look for the
                                    code to invoke. In C#, the format is:
                                 </p>
                                 
                                 <p>
                                    <code class="replaceable">ASSEMBLY::TYPE::METHOD</code> where:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">ASSEMBLY</code> is the name of the .NET assembly file for your application. When using
                                             the .NET Core CLI to build your application, if you haven't set the assembly name
                                             using the
                                             <code class="code">AssemblyName</code> property in .csproj, the <code class="replaceable">ASSEMBLY</code> name
                                             will be the name of the folder that contains your .csproj file once the build is complete.
                                             For more information, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-package-cli.html">.NET Core CLI</a>. In this case, let's assume the folder
                                             name is <code class="code">HelloWorldApp</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">TYPE</code> is the full name of the handler type, which consists of the
                                             <code class="replaceable">Namespace</code> and the <code class="replaceable">ClassName</code>. In this case
                                             <code class="code">Example.Hello</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">METHOD</code> is name of the function handler, in this case
                                             <code class="code">MyHandler</code>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Ultimately, the signature will be of this format:
                                    <code class="replaceable">Assembly::Namespace.ClassName::MethodName</code></p>
                                 
                                 <p>Again, consider the following example:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">using System.IO;

namespace Example
<span>{</span>            
  public class Hello
  <span>{</span>
    public Stream MyHandler(Stream stream)
    <span>{</span>
       //function logic
    }
  }
}</code></pre>
                                 <p>The handler string would be: <code class="code">HelloWorldApp::Example.Hello::MyHandler</code>
                                    
                                 </p>
                                 
                                 
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>If the method specified in your handler string is overloaded, you must provide the
                                          exact signature of the
                                          method Lambda should invoke. AWS Lambda will reject an otherwise valid signature if
                                          the resolution would require
                                          selecting among multiple (overloaded) signatures. 
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="csharp-handler-serializer">Serializing Lambda functions</h2>
                                 
                                 <p>For any Lambda functions that use input or output types other than a <code class="code">Stream</code> object, you will need
                                    to add a serialization library to your application. You can do this in the following
                                    ways:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Use the <code class="code">Amazon.Lambda.Serialization.Json</code> NuGet package. This library uses JSON.NET to handle
                                             serialization.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>If you are using .NET Core 3.1, we recommend that you use the <a href="https://github.com/aws/aws-lambda-dotnet/tree/0eff7ab687bbfc1e026feee1de336849e0315bc6/Libraries/src/Amazon.Lambda.Serialization.SystemTextJson" rel="noopener noreferrer" target="_blank"><span>
                                                         Amazon.Lambda.Serialization.SystemTextJson</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> serializer.
                                                   This package provides a performance improvement over <code class="code">Amazon.Lambda.Serialization.Json</code>.
                                                   
                                                </p>
                                             </div>
                                          </div>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Create your own serialization library by implementing the <code class="code">ILambdaSerializer</code> interface, which
                                             is available as part of the <code class="code">Amazon.Lambda.Core</code> library. The interface defines two methods:
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><code class="code">T Deserialize&lt;T&gt;(Stream requestStream);</code></p>
                                                   
                                                   <p> You implement this method to deserialize the request payload from the <code class="code">Invoke</code> API into
                                                      the object that is passed to the Lambda function handler.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><code class="code">T Serialize&lt;T&gt;(T response, Stream responseStream);</code>.
                                                   </p>
                                                   
                                                   <p> You implement this method to serialize the result returned from the Lambda function
                                                      handler into the
                                                      response payload that is returned by the <code class="code">Invoke</code> API.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>You use whichever serializer you wish by adding it as a dependency to your <code class="code">MyProject.csproj</code> file. 
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">...
 &lt;ItemGroup&gt;
    &lt;PackageReference Include="Amazon.Lambda.Core" Version="1.0.0" /&gt;
    &lt;PackageReference Include="Amazon.Lambda.Serialization.Json" Version="1.3.0" /&gt;
  &lt;/ItemGroup&gt;
</code></pre>
                                 <p>You then add it to your AssemblyInfo.cs file. For example, if you are using the default
                                    Json.NET serializer,
                                    this is what you would add:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">[assembly:LambdaSerializer(typeof(Amazon.Lambda.Serialization.Json.JsonSerializer))]</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can define a custom serialization attribute at the method level, which will override
                                          the default
                                          serializer specified at the assembly level. For more information, see <a href="#csharp-handler-types">Handling standard data types</a>.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="csharp-handler-restrictions">Lambda function handler restrictions </h2>
                                 
                                 <p>Note that there are some restrictions on the handler signature.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>It may not be <code class="code">unsafe</code> and use pointer types in the handler signature, though
                                             <code class="code">unsafe</code> context can be used inside the handler method and its dependencies. For more
                                             information, see <a href="https://msdn.microsoft.com/en-us/library/chfa2zb8.aspx" rel="noopener noreferrer" target="_blank"><span>unsafe (C#
                                                   reference)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>It may not pass a variable number of parameters using the <code class="code">params</code> keyword, or use
                                             <code class="code">ArgIterator</code> as an input or return parameter which is used to support variable number of
                                             parameters.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The handler may not be a generic method (e.g. IList&lt;T&gt; Sort&lt;T&gt;(IList&lt;T&gt; input)).</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Async handlers with signature <code class="code">async void</code> are not supported.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="csharp-handler-async">Using async in C# functions with AWS Lambda</h2>
                                 
                                 <p>If you know your Lambda function will require a long-running process, such as uploading
                                    large files to Amazon S3 or
                                    reading a large stream of records from DynamoDB, you can take advantage of the async/await
                                    pattern. When you use this
                                    signature, Lambda invokes the function synchronously and waits for the function to
                                    return a response or for
                                    execution to <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-console.html">time out</a>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">public async Task&lt;Response&gt; ProcessS3ImageResizeAsync(SimpleS3Event input)
<span>{</span>
   var response = await client.DoAsyncWork(input);
   return response;
}</code></pre>
                                 <p>If you use this pattern, there are some considerations you must take into account:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>AWS Lambda does not support <code class="code">async void</code> methods.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If you create an async Lambda function without implementing the <code class="code">await</code> operator, .NET will
                                             issue a compiler warning and you will observe unexpected behavior. For example, some
                                             async actions will
                                             run while others won't. Or some async actions won't complete before the function invocation
                                             
                                             completes.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">public async Task ProcessS3ImageResizeAsync(SimpleS3Event event) // Compiler warning
<span>{</span>
    client.DoAsyncWork(input); 
}</code></pre>
                                          </li>
                                       <li class="listitem">
                                          
                                          <p>Your Lambda function can include multiple async calls, which can be invoked in parallel.
                                             You can use the
                                             <code class="code">Task.WhenAll</code> and <code class="code">Task.WhenAny</code> methods to work with multiple tasks. To use the
                                             <code class="code">Task.WhenAll</code> method, you pass a list of the operations as an array to the method. Note that in
                                             the example below, if you neglect to include any operation to the array, that call
                                             may return before its
                                             operation completes.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">public async Task DoesNotWaitForAllTasks1()
<span>{</span>
   // In Lambda, Console.WriteLine goes to CloudWatch Logs.
   var task1 = Task.Run(() =&gt; Console.WriteLine("Test1"));
   var task2 = Task.Run(() =&gt; Console.WriteLine("Test2"));
   var task3 = Task.Run(() =&gt; Console.WriteLine("Test3"));
 
   // Lambda may return before printing "Test2" since we never wait on task2.
   await Task.WhenAll(task1, task3);
}</code></pre>
                                          <p>To use the <code class="code">Task.WhenAny</code> method, you again pass a list of operations as an array to the
                                             method. The call returns as soon as the first operation completes, even if the others
                                             are still
                                             running.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">public async Task DoesNotWaitForAllTasks2()
<span>{</span>
  // In Lambda, Console.WriteLine goes to CloudWatch Logs.
  var task1 = Task.Run(() =&gt; Console.WriteLine("Test1"));
  var task2 = Task.Run(() =&gt; Console.WriteLine("Test2"));
  var task3 = Task.Run(() =&gt; Console.WriteLine("Test3"));
 
  // Lambda may return before printing all tests since we're only waiting for one to finish.
  await Task.WhenAny(task1, task2, task3);
}</code></pre>
                                          </li>
                                    </ul>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-csharp.html">Working with C#</div>
                                    <div id="next" class="next-link" accesskey="n" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-package.html">Deployment package</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-handler.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-handler.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/csharp-handler.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:49 GMT -->
</html>