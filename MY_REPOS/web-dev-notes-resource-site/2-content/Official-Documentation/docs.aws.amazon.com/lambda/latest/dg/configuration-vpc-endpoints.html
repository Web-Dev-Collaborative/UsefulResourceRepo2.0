<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:50 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Configuring interface VPC endpoints for Lambda - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="configuration-vpc-endpoints" />
      <meta name="default_state" content="configuration-vpc-endpoints" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" />
      <meta name="description" content="You can use an interface VPC endpoint to create a private connection between your VPC and Lambda without requiring access over the internet or through a NAT device, VPN connection, or AWS Direct Connect connection." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Configuring interface VPC endpoints for Lambda - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#configuration-vpc-endpoints" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/configuration-vpc-endpoints.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-dg.pdf#configuration-vpc-endpoints" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/configuration-vpc-endpoints.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#vpc-endpoint-considerations">Considerations for Lambda interface endpoints</a><a href="#vpc-endpoint-create">Creating an interface endpoint for Lambda</a><a href="#vpc-endpoint-policy">Creating an interface endpoint policy for Lambda</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="configuration-vpc-endpoints">Configuring interface VPC endpoints for Lambda</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>If you use Amazon Virtual Private Cloud (Amazon VPC) to host your AWS resources, you
                                    can establish a connection between your VPC and
                                    Lambda. You can use this connection to invoke your Lambda function without crossing
                                    the public internet.
                                 </p>
                                 <p>To establish a private connection between your VPC and Lambda, create an <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpce-interface.html">interface VPC endpoint</a>. Interface endpoints are powered
                                    by <a href="http://aws.amazon.com/privatelink" rel="noopener noreferrer" target="_blank"><span>AWS PrivateLink</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, which enables you to privately access Lambda APIs
                                    without an internet gateway, NAT device, VPN connection, or AWS Direct Connect connection.
                                    Instances in your VPC don't
                                    need public IP addresses to communicate with Lambda APIs. Traffic between your VPC
                                    and Lambda does not leave the AWS
                                    network.
                                 </p>
                                 <p>Each interface endpoint is represented by one or more <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html">elastic network interfaces</a> in your subnets. A network
                                    interface provides a private IP address that serves as an entry point for traffic
                                    to Lambda.
                                 </p>
                                 
                                 <h2 id="vpc-endpoint-considerations">Considerations for Lambda interface endpoints</h2>
                                 
                                 <p>Before you set up an interface endpoint for Lambda, be sure to review <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpce-interface.html#vpce-interface-limitations">Interface endpoint properties and
                                       limitations</a> in the <em>Amazon VPC User Guide</em>.
                                 </p>
                                 
                                 <p>You can call any of the Lambda API operations from your VPC. For example, you can
                                    invoke the Lambda function by
                                    calling the <code class="code">Invoke</code> API from within your VPC. For the full list of Lambda APIs, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/API_Operations.html">Actions</a> in the Lambda API
                                    reference.
                                 </p>
                                  
                                 
                                 <h3 id="vpc-endpoint-considerations-keepalive">Keep-alive for persistent connections</h3>
                                 
                                 <p>Lambda purges idle connections over time, so you must use a keep-alive directive to
                                    maintain persistent
                                    connections. Attempting to reuse an idle connection when invoking a function results
                                    in a connection error. To
                                    maintain your persistent connection, use the keep-alive directive associated with
                                    your runtime. For an example,
                                    see <a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/node-reusing-connections.html">Reusing
                                       Connections with Keep-Alive in Node.js</a> in the <em>AWS SDK for JavaScript Developer Guide</em>.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="vpc-endpoint-considerations-billing">Billing Considerations</h3>
                                 
                                 <p>There is no additional cost to access a Lambda function through an interface endpoint.
                                    For more Lambda pricing
                                    information, see <a href="http://aws.amazon.com/lambda/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS Lambda Pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                 </p>
                                 
                                 <p>Standard pricing for AWS PrivateLink applies to interface endpoints for Lambda. Your
                                    AWS account is billed for
                                    every hour an interface endpoint is provisioned in each Availability Zone and for
                                    data processed through the
                                    interface endpoint. For more interface endpoint pricing information, see <a href="http://aws.amazon.com/privatelink/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS PrivateLink pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="vpc-endpoint-considerations-peering">VPC Peering Considerations</h3>
                                 
                                 <p>You can connect other VPCs to the VPC with interface endpoints using <a href="https://docs.aws.amazon.com/vpc/latest/peering/what-is-vpc-peering.html">VPC peering</a>. VPC peering is a networking connection
                                    between two VPCs. You can establish a VPC peering connection between your own two
                                    VPCs, or with a VPC in another
                                    AWS account. The VPCs can also be in two different AWS Regions.
                                 </p>
                                 
                                 <p>Traffic between peered VPCs stays on the AWS network and does not traverse the public
                                    internet. Once VPCs are
                                    peered, resources like Amazon Elastic Compute Cloud (Amazon EC2) instances, Amazon
                                    Relational Database Service (Amazon RDS) instances, or VPC-enabled Lambda functions
                                    in
                                    both VPCs can access the Lambda API through interface endpoints created in the one
                                    of the VPCs.
                                 </p>
                                  
                                  
                                 
                                 <h2 id="vpc-endpoint-create">Creating an interface endpoint for Lambda</h2>
                                 
                                 <p>You can create an interface endpoint for Lambda using either the Amazon VPC console
                                    or the AWS Command Line Interface (AWS CLI). For
                                    more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpce-interface.html#create-interface-endpoint">Creating an interface endpoint</a>
                                    in the <em>Amazon VPC User Guide</em>.
                                 </p>
                                 
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an interface endpoint for Lambda (console)</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/vpc/home?#Endpoints" rel="noopener noreferrer" target="_blank"><span>Endpoints page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Amazon VPC
                                             console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create Endpoint</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>For <b>Service category</b>, verify that <b>AWS services</b> is
                                             selected.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>For <b>Service Name</b>, choose
                                             <b>com.amazonaws.<code class="replaceable">region</code>.lambda</b>. Verify that the
                                             <b>Type</b> is <b>Interface</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose a VPC and subnets.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To enable private DNS for the interface endpoint, select the <b>Enable DNS Name</b> check
                                             box.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>For <b>Security group</b>, choose one or more security groups.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create endpoint</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>To use the private DNS option, you must set the <code class="code">enableDnsHostnames</code> and
                                    <code class="code">enableDnsSupportattributes</code> of your VPC. For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#vpc-dns-updating">Viewing and updating DNS support for your VPC</a>
                                    in the <em>Amazon VPC User Guide</em>. If you enable private DNS for the interface endpoint, you can make
                                    API requests to Lambda using its default DNS name for the Region, for example,
                                    <code class="code">lambda.us-east-1.amazonaws.com</code>. For more service endpoints, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-service-information.html">Service endpoints and quotas</a> in the
                                    <em>AWS General Reference</em>.
                                 </p>
                                 
                                 <p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpce-interface.html#access-service-though-endpoint">Accessing a service through an
                                       interface endpoint</a> in the <em>Amazon VPC User Guide</em>.
                                 </p>
                                 
                                 <p>For information about creating and configuring an endpoint using AWS CloudFormation,
                                    see the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpcendpoint.html">AWS::EC2::VPCEndpoint</a>
                                    resource in the <em>AWS CloudFormation User Guide</em>.
                                 </p>
                                  
                                 
                                 <p class="title"><b>To create an interface endpoint for Lambda (AWS CLI)</b></p>
                                 
                                 <p>Use the <code class="code">create-vpc-endpoint</code> command and specify the VPC ID, VPC endpoint type (interface),
                                    service name, subnets that will use the endpoint, and security groups to associate
                                    with the endpoint's network
                                    interfaces. For example:
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
aws ec2 create-vpc-endpoint --vpc-id vpc-ec43eb89 --vpc-endpoint-type Interface --service-name \
   com.amazonaws.us-east-1.lambda --subnet-id subnet-abababab --security-group-id sg-1a2b3c4d      
    </code></pre>
                                  
                                 <h2 id="vpc-endpoint-policy">Creating an interface endpoint policy for Lambda</h2>
                                 
                                 <p>To control who can use your interface endpoint and which Lambda functions the user
                                    can access, you can attach
                                    an endpoint policy to your endpoint. The policy specifies the following information:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The principal that can perform actions.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The actions that the principal can perform.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The resources on which the principal can perform actions.</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints-access.html">Controlling access to services with VPC endpoints</a> in the <em>Amazon VPC User Guide</em>.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Example: Interface endpoint policy for Lambda actions</b></p>
                                 
                                 <p>The following is an example of an endpoint policy for Lambda. When attached to an
                                    endpoint, this policy
                                    allows user <code class="code">MyUser</code> to invoke the function <code class="code">my-function</code>.
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Statement":[
      <span>{</span>
         "Principal":
         <span>{</span> 
             "AWS": "arn:aws:iam::123412341234:user/MyUser" 
         },
         "Effect":"Allow",
         "Action":[
            "lambda:InvokeFunction"
         ],
         "Resource": [
               "arn:aws:lambda:us-east-2:123456789012:function:my-function”
            ]
      }
   ]
}</code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc.html">Network</div>
                                    <div id="next" class="next-link" accesskey="n" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-database.html">Database</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:50 GMT -->
</html>