<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/samples-blank.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:14 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Blank function sample application for AWS Lambda - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="samples-blank" />
      <meta name="default_state" content="samples-blank" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="samples-blank.html" />
      <meta name="description" content="The blank function sample application is a starter application that demonstrates common operations in Lambda with a function that calls the Lambda API. It shows the use of logging, environment variables, AWS X-Ray tracing, layers, unit tests and the AWS SDK. Explore this application to learn about building Lambda functions in your programming language, or use it as a starting point for your own projects." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Blank function sample application for AWS Lambda - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#samples-blank" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/samples-blank.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/samples-blank.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/samples-blank.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/samples-blank.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#samples-blank" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/samples-blank.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#samples-blank-architecture">Architecture and handler code</a><a href="#samples-blank-automation">Deployment automation with AWS CloudFormation and the AWS CLI</a><a href="#samples-blank-instrumentation">Instrumentation with the AWS X-Ray</a><a href="#samples-blank-dependencies">Dependency management with layers</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="samples-blank">Blank function sample application for AWS Lambda</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The blank function sample application is a starter application that demonstrates common
                                    operations in Lambda with
                                    a function that calls the Lambda API. It shows the use of logging, environment variables,
                                    AWS X-Ray tracing, layers,
                                    unit tests and the AWS SDK. Explore this application to learn about building Lambda
                                    functions in your programming
                                    language, or use it as a starting point for your own projects.
                                 </p>
                                 <div class="mediaobject">
                                     
                                    <img src="images/sample-blank.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Blank function sample application architecture.&#xA;    " />
                                     
                                     
                                    
                                 </div>
                                 <p>Variants of this sample application are available for the following languages:</p>
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Variants</b></p>
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Node.js – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-nodejs" rel="noopener noreferrer" target="_blank"><span>blank-nodejs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Python – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-python" rel="noopener noreferrer" target="_blank"><span>blank-python</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Ruby – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-ruby" rel="noopener noreferrer" target="_blank"><span>blank-ruby</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Java – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-java" rel="noopener noreferrer" target="_blank"><span>blank-java</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Go – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-go" rel="noopener noreferrer" target="_blank"><span>blank-go</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>C# – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-csharp" rel="noopener noreferrer" target="_blank"><span>blank-csharp</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>PowerShell – <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-powershell" rel="noopener noreferrer" target="_blank"><span>blank-powershell</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <p>The examples in this topic highlight code from the Node.js version, but the details
                                    are generally applicable to
                                    all variants.
                                 </p>
                                 <p>You can deploy the sample in a few minutes with the AWS CLI and AWS CloudFormation.
                                    Follow the instructions in the <a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-nodejs" rel="noopener noreferrer" target="_blank"><span>README</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to download, configure, and deploy it in your account.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Sections</strong></p>
                                    <ul>
                                       <li><a href="#samples-blank-architecture">Architecture and handler code</a></li>
                                       <li><a href="#samples-blank-automation">Deployment automation with AWS CloudFormation and the AWS CLI</a></li>
                                       <li><a href="#samples-blank-instrumentation">Instrumentation with the AWS X-Ray</a></li>
                                       <li><a href="#samples-blank-dependencies">Dependency management with layers</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="samples-blank-architecture">Architecture and handler code</h2>
                                 
                                 
                                 <p>The sample application consists of function code, an AWS CloudFormation template,
                                    and supporting resources. When you deploy
                                    the sample, you use the following AWS services:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>AWS Lambda – Runs function code, sends logs to CloudWatch Logs, and sends trace data
                                             to X-Ray. The function
                                             also calls the Lambda API to get details about the account's quotas and usage in the
                                             current Region.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://aws.amazon.com/xray" rel="noopener noreferrer" target="_blank"><span>AWS X-Ray</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Collects trace data, indexes traces for
                                             search, and generates a service map.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://aws.amazon.com/cloudwatch" rel="noopener noreferrer" target="_blank"><span>Amazon CloudWatch</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Stores logs and metrics.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://aws.amazon.com/iam" rel="noopener noreferrer" target="_blank"><span>AWS Identity and Access Management (IAM)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Grants permission.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://aws.amazon.com/s3" rel="noopener noreferrer" target="_blank"><span>Amazon Simple Storage Service (Amazon S3)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Stores the function's deployment package
                                             during deployment.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://aws.amazon.com/cloudformation" rel="noopener noreferrer" target="_blank"><span>AWS CloudFormation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Creates application resources and
                                             deploys function code.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>Standard charges apply for each service. For more information, see <a href="https://aws.amazon.com/pricing" rel="noopener noreferrer" target="_blank"><span>AWS
                                          Pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                 </p>
                                 
                                 
                                 <p>The function code shows a basic workflow for processing an event. The handler takes
                                    an Amazon Simple Queue Service (Amazon SQS) event
                                    as input and iterates through the records that it contains, logging the contents of
                                    each message. It logs the
                                    contents of the event, the context object, and environment variables. Then it makes
                                    a call with the AWS SDK and
                                    passes the response back to the Lambda runtime.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/function/index.js" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/function/index.js</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> –
                                          Handler code</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="javascript ">// Handler
exports.handler = async function(event, context) <span>{</span>
  event.Records.forEach(record =&gt; <span>{</span>
    console.log(record.body)
  })
  console.log('## ENVIRONMENT VARIABLES: ' + serialize(process.env))
  console.log('## CONTEXT: ' + serialize(context))
  console.log('## EVENT: ' + serialize(event))
  
  return getAccountSettings()
}

// Use SDK client
var getAccountSettings = function()<span>{</span>
  return lambda.getAccountSettings().promise()
}

var serialize = function(object) <span>{</span>
  return JSON.stringify(object, null, 2)
}</code></pre></div>
                                 </div>
                                 
                                 <p>The input/output types for the handler and support for asynchronous programming vary
                                    per runtime. In this
                                    example, the handler method is <code class="code">async</code>, so in Node.js this means that it must return a promise back to
                                    the runtime. The Lambda runtime waits for the promise to be resolved and returns the
                                    response to the invoker. If
                                    the function code or AWS SDK client return an error, the runtime formats the error
                                    into a JSON document and
                                    returns that.
                                 </p>
                                 
                                 
                                 <p>The sample application doesn't include an Amazon SQS queue to send events, but uses
                                    an event from Amazon SQS (<a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/event.json" rel="noopener noreferrer" target="_blank"><span>event.json</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>) to illustrate how events are processed. To add an
                                    Amazon SQS queue to your application, see <a href="with-sqs.html">Using AWS Lambda with Amazon SQS</a>.
                                 </p>
                                  
                                 
                                 <h2 id="samples-blank-automation">Deployment automation with AWS CloudFormation and the AWS CLI</h2>
                                 
                                 
                                 <p>The sample application's resources are defined in an AWS CloudFormation template and
                                    deployed with the AWS CLI. The project
                                    includes simple shell scripts that automate the process of setting up, deploying,
                                    invoking, and tearing down the
                                    application.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/sample-blank-stack.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Blank application stack and supporting resources.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <p>The application template uses an AWS Serverless Application Model (AWS SAM) resource
                                    type to define the model. AWS SAM simplifies
                                    template authoring for serverless applications by automating the definition of execution
                                    roles, APIs, and other
                                    resources.
                                 </p>
                                 
                                 <p>The template defines the resources in the application <em>stack</em>. This includes the function,
                                    its execution role, and a Lambda layer that provides the function's library dependencies.
                                    The stack does not
                                    include the bucket that the AWS CLI uses during deployment or the CloudWatch Logs
                                    log group.
                                 </p>
                                  
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/template.yml" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/template.yml</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Serverless
                                          resources</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">AWSTemplateFormatVersion: '2010-09-09'
Transform: 'AWS::Serverless-2016-10-31'
Description: An AWS Lambda application that calls the Lambda API.
Resources:
  function:
    Type: <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-function.html">AWS::Serverless::Function</a>
    Properties:
      Handler: index.handler
      Runtime: nodejs12.x
      CodeUri: function/.
      Description: Call the AWS Lambda API
      Timeout: 10
      # Function's execution role
      Policies:
        - AWSLambdaBasicExecutionRole
        - AWSLambdaReadOnlyAccess
        - AWSXrayWriteOnlyAccess
      Tracing: Active
      Layers:
        - !Ref libs
  libs:
    Type: <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-layerversion.html">AWS::Serverless::LayerVersion</a>
    Properties:
      LayerName: blank-nodejs-lib
      Description: Dependencies for the blank sample app.
      ContentUri: lib/.
      CompatibleRuntimes:
        - nodejs12.x</code></pre></div>
                                 </div>
                                 
                                 <p>When you deploy the application, AWS CloudFormation applies the AWS SAM transform
                                    to the template to generate an AWS CloudFormation
                                    template with standard types such as <code class="code">AWS::Lambda::Function</code> and <code class="code">AWS::IAM::Role</code>.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example processed template</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "An AWS Lambda application that calls the Lambda API.",
  "Resources": <span>{</span>
    "function": <span>{</span>
      "Type": "<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-function.html">AWS::Lambda::Function</a>",
      "Properties": <span>{</span>
        "Layers": [
          <span>{</span>
            "Ref": "libs32xmpl61b2"
          }
        ],
        "TracingConfig": <span>{</span>
          "Mode": "Active"
        },
        "Code": <span>{</span>
          "S3Bucket": "lambda-artifacts-6b000xmpl1e9bf2a",
          "S3Key": "3d3axmpl473d249d039d2d7a37512db3"
        },
        "Description": "Call the AWS Lambda API",
        "Tags": [
          <span>{</span>
            "Value": "SAM",
            "Key": "lambda:createdBy"
          }
        ],</code></pre></div>
                                 </div>
                                 
                                 <p>In this example, the <code class="code">Code</code> property specifies an object in an Amazon S3 bucket. This corresponds to the
                                    local path in the <code class="code">CodeUri</code> property in the project template:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">      CodeUri: function/.</code></pre>
                                 <p>To upload the project files to Amazon S3, the deployment script uses commands in the
                                    AWS CLI. The
                                    <code class="code">cloudformation package</code> command preprocesses the template, uploads artifacts, and replaces local
                                    paths with Amazon S3 object locations. The <code class="code">cloudformation deploy</code> command deploys the processed template
                                    with a AWS CloudFormation change set.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/3-deploy.sh" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/3-deploy.sh</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Package and
                                          deploy</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">#!/bin/bash
set -eo pipefail
ARTIFACT_BUCKET=$(cat bucket-name.txt)
<code class="userinput">aws cloudformation package</code> --template-file template.yml --s3-bucket $ARTIFACT_BUCKET --output-template-file out.yml
<code class="userinput">aws cloudformation deploy</code> --template-file out.yml --stack-name blank-nodejs --capabilities CAPABILITY_NAMED_IAM</code></pre></div>
                                 </div>
                                 
                                 <p>The first time you run this script, it creates a AWS CloudFormation stack named <code class="code">blank-nodejs</code>. If you make
                                    changes to the function code or template, you can run it again to update the stack.
                                 </p>
                                 
                                 <p>The cleanup script (<a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/5-cleanup.sh" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/5-cleanup.sh</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>)
                                    deletes the stack and optionally deletes the deployment bucket and function logs.
                                 </p>
                                  
                                 
                                 <h2 id="samples-blank-instrumentation">Instrumentation with the AWS X-Ray</h2>
                                 
                                 <p>The sample function is configured for tracing with <a href="https://console.aws.amazon.com/xray/home" rel="noopener noreferrer" target="_blank"><span>AWS X-Ray</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. With the tracing mode set to active, Lambda records timing information for a subset
                                    of
                                    invocations and sends it to X-Ray. X-Ray processes the data to generate a <em>service map</em> that
                                    shows a client node and two service nodes:
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/blank-servicemap-basic.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Service map for a function with active tracing.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <p>The first service node (<code class="code">AWS::Lambda</code>) represents the Lambda service, which validates the invocation
                                    request and sends it to the function. The second node, <code class="code">AWS::Lambda::Function</code>, represents the function
                                    itself.
                                 </p>
                                 
                                 
                                 <p>To record additional detail, the sample function uses the X-Ray SDK. With minimal
                                    changes to the function
                                    code, the X-Ray SDK records details about calls made with the AWS SDK to AWS services.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/function/index.js" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/function/index.js</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> –
                                          Instrumentation</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="javascript "><code class="userinput">const AWSXRay = require('aws-xray-sdk-core')</code>
const AWS = <code class="userinput">AWSXRay.captureAWS(</code>require('aws-sdk')<code class="userinput">)</code>

// Create client outside of handler to reuse
const lambda = new AWS.Lambda()</code></pre></div>
                                 </div>
                                 
                                 <p>Instrumenting the AWS SDK client adds an additional node to the service map and more
                                    detail in traces. In this
                                    example, the service map shows the sample function calling the Lambda API to get details
                                    about storage and
                                    concurrency usage in the current Region.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/blank-servicemap.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Service map for a function with the X-Ray SDK.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <p>The trace shows timing details for the invocation, with subsegments for function initialization,
                                    invocation,
                                    and overhead. The invocation subsegment has a subsegment for the AWS SDK call to the
                                    <code class="code">GetAccountSettings</code> API operation.
                                 </p>
                                 
                                 <div class="mediaobject">
                                     
                                    <img src="images/blank-trace.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Trace for a function with the X-Ray SDK.&#xA;      " />
                                     
                                     
                                    
                                 </div>
                                 
                                 <p>You can include the X-Ray SDK and other libraries in your function's deployment package,
                                    or deploy them
                                    separately in a Lambda layer. For Node.js, Ruby, and Python, the Lambda runtime includes
                                    the AWS SDK in the
                                    execution environment.
                                 </p>
                                  
                                 
                                 <h2 id="samples-blank-dependencies">Dependency management with layers</h2>
                                 
                                 
                                 <p>You can install libraries locally and include them in the deployment package that
                                    you upload to Lambda, but
                                    this has its drawbacks. Larger file sizes cause increased deployment times and can
                                    prevent you from testing
                                    changes to your function code in the Lambda console. To keep the deployment package
                                    small and avoid uploading
                                    dependencies that haven't changed, the sample app creates a <a href="configuration-layers.html">Lambda
                                       layer</a> and associates it with the function.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/template.yml" rel="noopener noreferrer" target="_blank"><span>blank-nodejs/template.yml</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Dependency
                                          layer</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">Resources:
  function:
    Type: <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-function.html">AWS::Serverless::Function</a>
    Properties:
      Handler: index.handler
      Runtime: nodejs12.x
      CodeUri: function/.
      Description: Call the AWS Lambda API
      Timeout: 10
      # Function's execution role
      Policies:
        - AWSLambdaBasicExecutionRole
        - AWSLambdaReadOnlyAccess
        - AWSXrayWriteOnlyAccess
      Tracing: Active
      <code class="userinput">Layers:
        - !Ref libs
  libs:
    Type: <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-layerversion.html">AWS::Serverless::LayerVersion</a>
    Properties:
      LayerName: blank-nodejs-lib
      Description: Dependencies for the blank sample app.
      ContentUri: lib/.
      CompatibleRuntimes:
        - nodejs12.x</code></code></pre></div>
                                 </div>
                                 
                                 <p>The <code class="code">2-build-layer.sh</code> script installs the function's dependencies with npm and places them in a
                                    folder with the <a href="configuration-layers.html#configuration-layers-path">structure required by the Lambda runtime</a>.
                                 </p>
                                 
                                 <div class="example">
                                    <p class="title"><b>Example <a href="https://github.com/awsdocs/aws-lambda-developer-guide/blob/master/sample-apps/blank-nodejs/2-build-layer.sh" rel="noopener noreferrer" target="_blank"><span>2-build-layer.sh</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Preparing the
                                          layer</b></p>
                                    <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">#!/bin/bash
set -eo pipefail
mkdir -p lib/nodejs
rm -rf node_modules lib/nodejs/node_modules
<code class="userinput">npm install --production
mv node_modules lib/nodejs/</code></code></pre></div>
                                 </div>
                                 
                                 <p>The first time that you deploy the sample application, the AWS CLI packages the layer
                                    separately from the
                                    function code and deploys both. For subsequent deployments, the layer archive is only
                                    uploaded if the contents of
                                    the <code class="code">lib</code> folder have changed.
                                 </p>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="lambda-samples.html">Samples</div>
                                    <div id="next" class="next-link" accesskey="n" href="samples-errorprocessor.html">Error processor</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/samples-blank.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/samples-blank.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/samples-blank.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:19 GMT -->
</html>