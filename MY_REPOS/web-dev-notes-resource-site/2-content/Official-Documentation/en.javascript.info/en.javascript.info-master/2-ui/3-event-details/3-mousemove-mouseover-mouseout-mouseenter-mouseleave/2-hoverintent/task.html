<p>importance: 5</p>
<hr />
<h1 id="smart-tooltip">“Smart” tooltip</h1>
<p>Write a function that shows a tooltip over an element only if the visitor moves the mouse <em>to it</em>, but not <em>through it</em>.</p>
<p>In other words, if the visitor moves the mouse to the element and stops there – show the tooltip. And if they just moved the mouse through, then no need, who wants extra blinking?</p>
<p>Technically, we can measure the mouse speed over the element, and if it’s slow then we assume that it comes “over the element” and show the tooltip, if it’s fast – then we ignore it.</p>
<p>Make a universal object <code>new HoverIntent(options)</code> for it.</p>
<p>Its <code>options</code>: - <code>elem</code> – element to track. - <code>over</code> – a function to call if the mouse came to the element: that is, it moves slowly or stopped over it. - <code>out</code> – a function to call when the mouse leaves the element (if <code>over</code> was called).</p>
<p>An example of using such object for the tooltip:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// a sample tooltip</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">let</span> tooltip <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;div&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="va">tooltip</span>.<span class="at">className</span> <span class="op">=</span> <span class="st">&quot;tooltip&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="va">tooltip</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&quot;Tooltip&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">// the object will track mouse and call over/out</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">new</span> <span class="at">HoverIntent</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-8" title="8">  elem<span class="op">,</span></a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="at">over</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="va">tooltip</span>.<span class="va">style</span>.<span class="at">left</span> <span class="op">=</span> <span class="va">elem</span>.<span class="at">getBoundingClientRect</span>().<span class="at">left</span> <span class="op">+</span> <span class="st">&#39;px&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="va">tooltip</span>.<span class="va">style</span>.<span class="at">top</span> <span class="op">=</span> <span class="va">elem</span>.<span class="at">getBoundingClientRect</span>().<span class="at">bottom</span> <span class="op">+</span> <span class="dv">5</span> <span class="op">+</span> <span class="st">&#39;px&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="va">document</span>.<span class="va">body</span>.<span class="at">append</span>(tooltip)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="at">out</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="va">tooltip</span>.<span class="at">remove</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The demo:</p>
<p>[iframe src=“solution” height=140]</p>
<p>If you move the mouse over the “clock” fast then nothing happens, and if you do it slow or stop on them, then there will be a tooltip.</p>
<p>Please note: the tooltip doesn’t “blink” when the cursor moves between the clock subelements.</p>
