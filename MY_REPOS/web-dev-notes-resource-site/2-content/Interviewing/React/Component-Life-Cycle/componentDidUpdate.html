<p>First of all, from a blog post in late March 2018, it was announced that the React lifecycle methods <strong>componentWillReceiveProps</strong>, <strong>componentWillMount</strong>, and <strong>componentWillUpdate</strong> will be deprecated in a future version of React. This is because of the eventual migration of React to async rendering; these lifecycle methods will become unreliable when async rendering is made default.</p>
<h4 id="example-of-replacing-componentwillupdate-with-componentdidupdate">Example of replacing <strong>componentWillUpdate</strong> with <strong>componentDidUpdate</strong></h4>
<p>componentWillUpdate is invoked when a component is about to receive new props and the render method is definitely going to be called. Here’s an example of something we were doing previously:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">componentWillUpdate</span>(nextProps) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="cf">if</span> (<span class="op">!</span><span class="va">nextProps</span>.<span class="va">user</span>.<span class="at">isLogged</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="va">nextProps</span>.<span class="va">user</span>.<span class="at">authenticating</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">        <span class="kw">this</span>.<span class="va">context</span>.<span class="va">router</span>.<span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/&#39;</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>And, replacing that usage with <strong>componentDidUpdate</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">componentDidUpdate</span>(<span class="co">/*prevProps, prevState*/</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span>.<span class="va">props</span>.<span class="va">user</span>.<span class="at">isLogged</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="kw">this</span>.<span class="va">props</span>.<span class="va">user</span>.<span class="at">authenticating</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">this</span>.<span class="va">context</span>.<span class="va">router</span>.<span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/&#39;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="op">}</span></a></code></pre></div>
<p><strong>componentDidUpdate</strong> is similar to <strong>componentDidMount</strong> except that is caused after a change in state or props occurs instead of just on initial mount. As opposed to <strong>getDerivedStateFromProps</strong>, we have access to the context provided by <strong>this</strong>. Note that this method also has arguments for prevProps and prevState, which provides the previous versions of the component’s props and state for comparison to the current values.</p>
