<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" href="./prism.css">
<script async defer src="./prism.js"></script>
</head>
<body>;
<p>Let’s see what it looks like to go from an ES5 “class” to an ES6 class using an Animal class.</p>
<h4 id="es5-way">ES5 way</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">function</span> <span class="at">Animal</span> (name<span class="op">,</span> energy) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">this</span>.<span class="at">name</span> <span class="op">=</span> name</a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">this</span>.<span class="at">energy</span> <span class="op">=</span> energy</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="va">Animal</span>.<span class="va">prototype</span>.<span class="at">eat</span> <span class="op">=</span> <span class="kw">function</span> (amount) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is eating.`</span>)</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="kw">this</span>.<span class="at">energy</span> <span class="op">+=</span> amount</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="va">Animal</span>.<span class="va">prototype</span>.<span class="at">sleep</span> <span class="op">=</span> <span class="kw">function</span> (length) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is sleeping.`</span>)</a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="kw">this</span>.<span class="at">energy</span> <span class="op">+=</span> length</a>
<a class="sourceLine" id="cb1-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="va">Animal</span>.<span class="va">prototype</span>.<span class="at">play</span> <span class="op">=</span> <span class="kw">function</span> (length) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-17" title="17">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is playing.`</span>)</a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="kw">this</span>.<span class="at">energy</span> <span class="op">-=</span> length</a>
<a class="sourceLine" id="cb1-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="kw">const</span> leo <span class="op">=</span> <span class="kw">new</span> <span class="at">Animal</span>(<span class="st">&#39;Leo&#39;</span><span class="op">,</span> <span class="dv">7</span>)</a></code></pre></div>
<h4 id="es6-way">ES6 way</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">class</span> Animal <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="at">constructor</span>(name<span class="op">,</span> energy) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">this</span>.<span class="at">name</span> <span class="op">=</span> name</a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">this</span>.<span class="at">energy</span> <span class="op">=</span> energy</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="at">eat</span>(amount) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is eating.`</span>)</a>
<a class="sourceLine" id="cb2-8" title="8">    <span class="kw">this</span>.<span class="at">energy</span> <span class="op">+=</span> amount</a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="at">sleep</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is sleeping.`</span>)</a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="kw">this</span>.<span class="at">energy</span> <span class="op">+=</span> length</a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="at">play</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-15" title="15">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span><span class="kw">this</span>.<span class="at">name</span><span class="sc">}</span><span class="vs"> is playing.`</span>)</a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="kw">this</span>.<span class="at">energy</span> <span class="op">-=</span> length</a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-19" title="19"></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="kw">const</span> leo <span class="op">=</span> <span class="kw">new</span> <span class="at">Animal</span>(<span class="st">&#39;Leo&#39;</span><span class="op">,</span> <span class="dv">7</span>)</a></code></pre></div>
<h4 id="now-for-the-sub-class-dog-in-es5-heres-what-we-will-have.">Now for the sub-class Dog, in ES5, here’s what we will have.</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">function</span> <span class="at">Dog</span> (name<span class="op">,</span> energy<span class="op">,</span> breed) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="va">Animal</span>.<span class="at">call</span>(<span class="kw">this</span><span class="op">,</span> name<span class="op">,</span> energy)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="kw">this</span>.<span class="at">breed</span> <span class="op">=</span> breed</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="va">Dog</span>.<span class="at">prototype</span> <span class="op">=</span> <span class="va">Object</span>.<span class="at">create</span>(<span class="va">Animal</span>.<span class="at">prototype</span>)</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">// In the above I could have also used the below format</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">// Dog.prototype = new Animal()</span></a>
<a class="sourceLine" id="cb3-10" title="10"></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="va">Dog</span>.<span class="va">prototype</span>.<span class="at">bark</span> <span class="op">=</span> <span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Woof Woof!&#39;</span>)</a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="kw">this</span>.<span class="at">energy</span> <span class="op">-=</span> <span class="fl">.1</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-15" title="15"></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="va">Dog</span>.<span class="va">prototype</span>.<span class="at">constructor</span> <span class="op">=</span> Dog</a></code></pre></div>
<h4 id="lets-refactor-dog-to-use-an-es6-class">Let’s refactor Dog to use an ES6 class</h4>
<p>In ES5 in order to make sure that every instance of Dog had a name and an energy property, we used .call in order to invoke the Animal constructor function in the context of the Dog instance. Luckily for us, in ES6 it’s much more straight forward. Whenever you are extending a baseclass and you need to invoke that baseclass’ constructor function, you invoke super passing it any arguments it needs.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">class</span> Dog <span class="kw">extends</span> Animal <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="at">constructor</span>(name<span class="op">,</span> energy<span class="op">,</span> breed) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">super</span>(name<span class="op">,</span> energy) <span class="co">// calls Animal&#39;s constructor</span></a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="kw">this</span>.<span class="at">breed</span> <span class="op">=</span> breed</a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="at">bark</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Woof Woof!&#39;</span>)</a>
<a class="sourceLine" id="cb4-9" title="9">    <span class="kw">this</span>.<span class="at">energy</span> <span class="op">-=</span> <span class="fl">.1</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="op">}</span></a></code></pre></div>
<p>if you have a constructor in the subclass, you must have a constructor method in the parent class, even if it is a no-op function (and you have to call it). Why? The JS engine only attaches an object instance to the context variable (this) once you get to the highest prototype in the chain - which is Object. If you create a constructor, and then you don’t call the parent constructor, you’re essentially short circuiting or breaking the chain!</p>
<p>The only reason you have to do it (create the constructor in the parent class) is because the default return value from a constructor method call is the value of this. So if you don’t create that parent constructor, then you will have no this value, and thus you’d be returning undefined, which is not ok in JavaScript constructors.</p>
<p>We call <code>super()</code> inside of a subclass’ constructor method in order to call the parent constructor… and that’s pretty much what super is in JavaScript: a reference to the parent prototype:</p>
<p><strong>super()</strong> method is mandatory to call if we have declared a custom constructor for Child Class, else not required. In line 23 above, the super keyword is used as a “function” which calls the parent class <code>ParentClass</code> with the parameters passed to <code>ChildClas</code>. This is a key step to be carried out in order to make sure that <code>ChildClas</code> is an instance of <code>ParentClass</code>.</p>
<p><code>super</code> is used to call Parent Class methods inside Child Class</p>
<p>Child class will have access to all parent class methods.</p>
<p>Seperate Note - An important difference between function declarations and class declarations is that function declarations are hoisted and class declarations are not. You first need to declare your class and then access it, otherwise code like the following will throw a ReferenceError:</p>
<pre><code>const p = new Rectangle(); // ReferenceError

class Rectangle {}</code></pre>
<h4 id="further-reading">Further Reading</h4>
<ul>
<li><ol type="1">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes</a></li>
</ol></li>
<li><ol start="2" type="1">
<li><a href="https://tylermcginnis.com/javascript-inheritance-and-the-prototype-chain/">https://tylermcginnis.com/javascript-inheritance-and-the-prototype-chain/</a></li>
</ol></li>
</ul>
</body></html>
