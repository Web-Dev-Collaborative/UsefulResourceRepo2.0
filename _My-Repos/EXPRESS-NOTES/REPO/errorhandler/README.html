<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="errorhandler">errorhandler</h1>
    <p>
      <a href="https://npmjs.org/package/errorhandler"
        ><img src="https://badgen.net/npm/v/errorhandler" alt="NPM Version"
      /></a>
      <a href="https://npmjs.org/package/errorhandler"
        ><img src="https://badgen.net/npm/dm/errorhandler" alt="NPM Downloads"
      /></a>
      <a href="https://travis-ci.org/expressjs/errorhandler"
        ><img
          src="https://badgen.net/travis/expressjs/errorhandler/master"
          alt="Build Status"
      /></a>
      <a href="https://coveralls.io/r/expressjs/errorhandler?branch=master"
        ><img
          src="https://badgen.net/coveralls/c/github/expressjs/errorhandler/master"
          alt="Test Coverage"
      /></a>
    </p>
    <p>Development-only error handler middleware.</p>
    <p>
      This middleware is only intended to be used in a development environment,
      as the
      <em
        >full error stack traces and internal details of any object passed to
        this module</em
      >
      will be sent back to the client when an error occurs.
    </p>
    <p>
      When an object is provided to Express as an error, this module will
      display as much about this object as possible, and will do so by using
      content negotiation for the response between HTML, JSON, and plain text.
    </p>
    <ul>
      <li>
        When the object is a standard <code>Error</code> object, the string
        provided by the <code>stack</code> property will be returned in
        HTML/text responses.
      </li>
      <li>
        When the object is a non-<code>Error</code> object, the result of
        <a
          href="https://nodejs.org/api/util.html#util_util_inspect_object_options"
          >util.inspect</a
        >
        will be returned in HTML/text responses.
      </li>
      <li>
        For JSON responses, the result will be an object with all enumerable
        properties from the object in the response.
      </li>
    </ul>
    <h2 id="install">Install</h2>
    <p>
      This is a <a href="https://nodejs.org/en/">Node.js</a> module available
      through the <a href="https://www.npmjs.com/">npm registry</a>.
      Installation is done using the
      <a
        href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"
        ><code>npm install</code> command</a
      >:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install errorhandler</a></code></pre>
    </div>
    <h2 id="api">API</h2>
    <!-- eslint-disable no-unused-vars -->
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> errorhandler <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;errorhandler&#39;</span>)</a></code></pre>
    </div>
    <h3 id="errorhandleroptions">errorhandler(options)</h3>
    <p>
      Create new middleware to handle errors and respond with content
      negotiation.
    </p>
    <h4 id="options">Options</h4>
    <p>Error handler accepts these properties in the options object.</p>
    <h5 id="log">log</h5>
    <p>
      Provide a function to be called with the error and a string representation
      of the error. Can be used to write the error to any desired location, or
      set to <code>false</code> to only send the error back in the response.
      Called as <code>log(err, str, req, res)</code> where <code>err</code> is
      the <code>Error</code> object, <code>str</code> is a string representation
      of the error, <code>req</code> is the request object and
      <code>res</code> is the response object (note, this function is invoked
      <em>after</em> the response has been written).
    </p>
    <p>
      The default value for this option is <code>true</code> unless
      <code>process.env.NODE_ENV === 'test'</code>.
    </p>
    <p>Possible values:</p>
    <ul>
      <li>
        <code>true</code>: Log errors using <code>console.error(str)</code>.
      </li>
      <li><code>false</code>: Only send the error back in the response.</li>
      <li>A function: pass the error to a function for handling.</li>
    </ul>
    <h2 id="examples">Examples</h2>
    <h3 id="simple-example">Simple example</h3>
    <p>
      Basic example of adding this middleware as the error handler only in
      development with <code>connect</code> (<code>express</code> also can be
      used in this example).
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> connect <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;connect&#39;</span>)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">var</span> errorhandler <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;errorhandler&#39;</span>)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">var</span> app <span class="op">=</span> <span class="at">connect</span>()</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="cf">if</span> (<span class="va">process</span>.<span class="va">env</span>.<span class="at">NODE_ENV</span> <span class="op">===</span> <span class="st">&#39;development&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="co">// only use in development</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="va">app</span>.<span class="at">use</span>(<span class="at">errorhandler</span>())</a>
<a class="sourceLine" id="cb3-9" title="9"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="custom-output-location">Custom output location</h3>
    <p>
      Sometimes you may want to output the errors to a different location than
      STDERR during development, like a system notification, for example.
    </p>
    <!-- eslint-disable handle-callback-err -->
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> connect <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;connect&#39;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">var</span> errorhandler <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;errorhandler&#39;</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">var</span> notifier <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;node-notifier&#39;</span>)</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw">var</span> app <span class="op">=</span> <span class="at">connect</span>()</a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="cf">if</span> (<span class="va">process</span>.<span class="va">env</span>.<span class="at">NODE_ENV</span> <span class="op">===</span> <span class="st">&#39;development&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="co">// only use in development</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="va">app</span>.<span class="at">use</span>(<span class="at">errorhandler</span>(<span class="op">{</span> <span class="dt">log</span><span class="op">:</span> errorNotification <span class="op">}</span>))</a>
<a class="sourceLine" id="cb4-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-11" title="11"></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="kw">function</span> <span class="at">errorNotification</span> (err<span class="op">,</span> str<span class="op">,</span> req) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-13" title="13">  <span class="kw">var</span> title <span class="op">=</span> <span class="st">&#39;Error in &#39;</span> <span class="op">+</span> <span class="va">req</span>.<span class="at">method</span> <span class="op">+</span> <span class="st">&#39; &#39;</span> <span class="op">+</span> <span class="va">req</span>.<span class="at">url</span></a>
<a class="sourceLine" id="cb4-14" title="14"></a>
<a class="sourceLine" id="cb4-15" title="15">  <span class="va">notifier</span>.<span class="at">notify</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-16" title="16">    <span class="dt">title</span><span class="op">:</span> title<span class="op">,</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="dt">message</span><span class="op">:</span> str</a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-19" title="19"><span class="op">}</span></a></code></pre>
    </div>
    <h2 id="license">License</h2>
    <p><a href="LICENSE">MIT</a></p>
  </body>
</html>
