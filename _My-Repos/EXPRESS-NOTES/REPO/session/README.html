<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="express-session">express-session</h1>
    <p>
      <a href="https://npmjs.org/package/express-session"
        ><img src="https://badgen.net/npm/v/express-session" alt="NPM Version"
      /></a>
      <a href="https://nodejs.org/en/download"
        ><img
          src="https://badgen.net/npm/dm/express-session"
          alt="NPM Downloads"
      /></a>
      <a href="https://github.com/expressjs/session/actions?query=workflow%3Aci"
        ><img
          src="https://badgen.net/github/checks/expressjs/session/master?label=ci"
          alt="Build Status"
      /></a>
      <a href="https://coveralls.io/r/expressjs/session?branch=master"
        ><img
          src="https://badgen.net/coveralls/c/github/expressjs/session/master"
          alt="Test Coverage"
      /></a>
    </p>
    <h2 id="installation">Installation</h2>
    <p>
      This is a <a href="https://nodejs.org/en/">Node.js</a> module available
      through the <a href="https://www.npmjs.com/">npm registry</a>.
      Installation is done using the
      <a
        href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"
        ><code>npm install</code> command</a
      >:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install express-session</a></code></pre>
    </div>
    <h2 id="api">API</h2>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> session <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express-session&#39;</span>)</a></code></pre>
    </div>
    <h3 id="sessionoptions">session(options)</h3>
    <p>Create a session middleware with the given <code>options</code>.</p>
    <p>
      <strong>Note</strong> Session data is <em>not</em> saved in the cookie
      itself, just the session ID. Session data is stored server-side.
    </p>
    <p>
      <strong>Note</strong> Since version 1.5.0, the
      <a href="https://www.npmjs.com/package/cookie-parser"
        ><code>cookie-parser</code> middleware</a
      >
      no longer needs to be used for this module to work. This module now
      directly reads and writes cookies on <code>req</code>/<code>res</code>.
      Using <code>cookie-parser</code> may result in issues if the
      <code>secret</code> is not the same between this module and
      <code>cookie-parser</code>.
    </p>
    <p>
      <strong>Warning</strong> The default server-side session storage,
      <code>MemoryStore</code>, is <em>purposely</em> not designed for a
      production environment. It will leak memory under most conditions, does
      not scale past a single process, and is meant for debugging and
      developing.
    </p>
    <p>
      For a list of stores, see
      <a href="#compatible-session-stores">compatible session stores</a>.
    </p>
    <h4 id="options">Options</h4>
    <p>
      <code>express-session</code> accepts these properties in the options
      object.
    </p>
    <h5 id="cookie">cookie</h5>
    <p>
      Settings object for the session ID cookie. The default value is
      <code>{ path: '/', httpOnly: true, secure: false, maxAge: null }</code>.
    </p>
    <p>The following are options that can be set in this object.</p>
    <h5 id="cookie.domain">cookie.domain</h5>
    <p>
      Specifies the value for the <code>Domain</code>
      <code>Set-Cookie</code> attribute. By default, no domain is set, and most
      clients will consider the cookie to apply to only the current domain.
    </p>
    <h5 id="cookie.expires">cookie.expires</h5>
    <p>
      Specifies the <code>Date</code> object to be the value for the
      <code>Expires</code> <code>Set-Cookie</code> attribute. By default, no
      expiration is set, and most clients will consider this a “non-persistent
      cookie” and will delete it on a condition like exiting a web browser
      application.
    </p>
    <p>
      <strong>Note</strong> If both <code>expires</code> and
      <code>maxAge</code> are set in the options, then the last one defined in
      the object is what is used.
    </p>
    <p>
      <strong>Note</strong> The <code>expires</code> option should not be set
      directly; instead only use the <code>maxAge</code> option.
    </p>
    <h5 id="cookie.httponly">cookie.httpOnly</h5>
    <p>
      Specifies the <code>boolean</code> value for the <code>HttpOnly</code>
      <code>Set-Cookie</code> attribute. When truthy, the
      <code>HttpOnly</code> attribute is set, otherwise it is not. By default,
      the <code>HttpOnly</code> attribute is set.
    </p>
    <p>
      <strong>Note</strong> be careful when setting this to <code>true</code>,
      as compliant clients will not allow client-side JavaScript to see the
      cookie in <code>document.cookie</code>.
    </p>
    <h5 id="cookie.maxage">cookie.maxAge</h5>
    <p>
      Specifies the <code>number</code> (in milliseconds) to use when
      calculating the <code>Expires</code> <code>Set-Cookie</code> attribute.
      This is done by taking the current server time and adding
      <code>maxAge</code> milliseconds to the value to calculate an
      <code>Expires</code> datetime. By default, no maximum age is set.
    </p>
    <p>
      <strong>Note</strong> If both <code>expires</code> and
      <code>maxAge</code> are set in the options, then the last one defined in
      the object is what is used.
    </p>
    <h5 id="cookie.path">cookie.path</h5>
    <p>
      Specifies the value for the <code>Path</code> <code>Set-Cookie</code>. By
      default, this is set to <code>'/'</code>, which is the root path of the
      domain.
    </p>
    <h5 id="cookie.samesite">cookie.sameSite</h5>
    <p>
      Specifies the <code>boolean</code> or <code>string</code> to be the value
      for the <code>SameSite</code> <code>Set-Cookie</code> attribute.
    </p>
    <ul>
      <li>
        <code>true</code> will set the <code>SameSite</code> attribute to
        <code>Strict</code> for strict same site enforcement.
      </li>
      <li>
        <code>false</code> will not set the <code>SameSite</code> attribute.
      </li>
      <li>
        <code>'lax'</code> will set the <code>SameSite</code> attribute to
        <code>Lax</code> for lax same site enforcement.
      </li>
      <li>
        <code>'none'</code> will set the <code>SameSite</code> attribute to
        <code>None</code> for an explicit cross-site cookie.
      </li>
      <li>
        <code>'strict'</code> will set the <code>SameSite</code> attribute to
        <code>Strict</code> for strict same site enforcement.
      </li>
    </ul>
    <p>
      More information about the different enforcement levels can be found in
      <a
        href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7"
        >the specification</a
      >.
    </p>
    <p>
      <strong>Note</strong> This is an attribute that has not yet been fully
      standardized, and may change in the future. This also means many clients
      may ignore this attribute until they understand it.
    </p>
    <p>
      <strong>Note</strong> There is a
      <a href="https://tools.ietf.org/html/draft-west-cookie-incrementalism-01"
        >draft spec</a
      >
      that requires that the <code>Secure</code> attribute be set to
      <code>true</code> when the <code>SameSite</code> attribute has been set to
      <code>'none'</code>. Some web browsers or other clients may be adopting
      this specification.
    </p>
    <h5 id="cookie.secure">cookie.secure</h5>
    <p>
      Specifies the <code>boolean</code> value for the <code>Secure</code>
      <code>Set-Cookie</code> attribute. When truthy, the
      <code>Secure</code> attribute is set, otherwise it is not. By default, the
      <code>Secure</code> attribute is not set.
    </p>
    <p>
      <strong>Note</strong> be careful when setting this to <code>true</code>,
      as compliant clients will not send the cookie back to the server in the
      future if the browser does not have an HTTPS connection.
    </p>
    <p>
      Please note that <code>secure: true</code> is a
      <strong>recommended</strong> option. However, it requires an https-enabled
      website, i.e., HTTPS is necessary for secure cookies. If
      <code>secure</code> is set, and you access your site over HTTP, the cookie
      will not be set. If you have your node.js behind a proxy and are using
      <code>secure: true</code>, you need to set “trust proxy” in express:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="dv">1</span>) <span class="co">// trust first proxy</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="va">app</span>.<span class="at">use</span>(<span class="at">session</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="dt">secret</span><span class="op">:</span> <span class="st">&#39;keyboard cat&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="dt">resave</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="dt">saveUninitialized</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="dt">cookie</span><span class="op">:</span> <span class="op">{</span> <span class="dt">secure</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span>))</a></code></pre>
    </div>
    <p>
      For using secure cookies in production, but allowing for testing in
      development, the following is an example of enabling this setup based on
      <code>NODE_ENV</code> in express:
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">var</span> sess <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">secret</span><span class="op">:</span> <span class="st">&#39;keyboard cat&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="dt">cookie</span><span class="op">:</span> <span class="op">{}</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="cf">if</span> (<span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;env&#39;</span>) <span class="op">===</span> <span class="st">&#39;production&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="dv">1</span>) <span class="co">// trust first proxy</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="va">sess</span>.<span class="va">cookie</span>.<span class="at">secure</span> <span class="op">=</span> <span class="kw">true</span> <span class="co">// serve secure cookies</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-11" title="11"></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="va">app</span>.<span class="at">use</span>(<span class="at">session</span>(sess))</a></code></pre>
    </div>
    <p>
      The <code>cookie.secure</code> option can also be set to the special value
      <code>'auto'</code> to have this setting automatically match the
      determined security of the connection. Be careful when using this setting
      if the site is available both as HTTP and HTTPS, as once the cookie is set
      on HTTPS, it will no longer be visible over HTTP. This is useful when the
      Express <code>"trust proxy"</code> setting is properly setup to simplify
      development vs production configuration.
    </p>
    <h5 id="genid">genid</h5>
    <p>
      Function to call to generate a new session ID. Provide a function that
      returns a string that will be used as a session ID. The function is given
      <code>req</code> as the first argument if you want to use some value
      attached to <code>req</code> when generating the ID.
    </p>
    <p>
      The default value is a function which uses the
      <code>uid-safe</code> library to generate IDs.
    </p>
    <p>
      <strong>NOTE</strong> be careful to generate unique IDs so your sessions
      do not conflict.
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">app</span>.<span class="at">use</span>(<span class="at">session</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">genid</span><span class="op">:</span> <span class="kw">function</span>(req) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="cf">return</span> <span class="at">genuuid</span>() <span class="co">// use UUIDs for session IDs</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="op">},</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">secret</span><span class="op">:</span> <span class="st">&#39;keyboard cat&#39;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="op">}</span>))</a></code></pre>
    </div>
    <h5 id="name">name</h5>
    <p>
      The name of the session ID cookie to set in the response (and read from in
      the request).
    </p>
    <p>The default value is <code>'connect.sid'</code>.</p>
    <p>
      <strong>Note</strong> if you have multiple apps running on the same
      hostname (this is just the name, i.e. <code>localhost</code> or
      <code>127.0.0.1</code>; different schemes and ports do not name a
      different hostname), then you need to separate the session cookies from
      each other. The simplest method is to simply set different
      <code>name</code>s per app.
    </p>
    <h5 id="proxy">proxy</h5>
    <p>
      Trust the reverse proxy when setting secure cookies (via the
      “X-Forwarded-Proto” header).
    </p>
    <p>The default value is <code>undefined</code>.</p>
    <ul>
      <li><code>true</code> The “X-Forwarded-Proto” header will be used.</li>
      <li>
        <code>false</code> All headers are ignored and the connection is
        considered secure only if there is a direct TLS/SSL connection.
      </li>
      <li>
        <code>undefined</code> Uses the “trust proxy” setting from express
      </li>
    </ul>
    <h5 id="resave">resave</h5>
    <p>
      Forces the session to be saved back to the session store, even if the
      session was never modified during the request. Depending on your store
      this may be necessary, but it can also create race conditions where a
      client makes two parallel requests to your server and changes made to the
      session in one request may get overwritten when the other request ends,
      even if it made no changes (this behavior also depends on what store
      you’re using).
    </p>
    <p>
      The default value is <code>true</code>, but using the default has been
      deprecated, as the default will change in the future. Please research into
      this setting and choose what is appropriate to your use-case. Typically,
      you’ll want <code>false</code>.
    </p>
    <p>
      How do I know if this is necessary for my store? The best way to know is
      to check with your store if it implements the <code>touch</code> method.
      If it does, then you can safely set <code>resave: false</code>. If it does
      not implement the <code>touch</code> method and your store sets an
      expiration date on stored sessions, then you likely need
      <code>resave: true</code>.
    </p>
    <h5 id="rolling">rolling</h5>
    <p>
      Force the session identifier cookie to be set on every response. The
      expiration is reset to the original
      <a href="#cookiemaxage"><code>maxAge</code></a
      >, resetting the expiration countdown.
    </p>
    <p>The default value is <code>false</code>.</p>
    <p>
      With this enabled, the session identifier cookie will expire in
      <a href="#cookiemaxage"><code>maxAge</code></a> since the last response
      was sent instead of in
      <a href="#cookiemaxage"><code>maxAge</code></a> since the session was last
      modified by the server.
    </p>
    <p>
      This is typically used in conjuction with short, non-session-length
      <a href="#cookiemaxage"><code>maxAge</code></a> values to provide a quick
      timeout of the session data with reduced potential of it occurring during
      on going server interactions.
    </p>
    <p>
      <strong>Note</strong> When this option is set to <code>true</code> but the
      <code>saveUninitialized</code> option is set to <code>false</code>, the
      cookie will not be set on a response with an uninitialized session. This
      option only modifies the behavior when an existing session was loaded for
      the request.
    </p>
    <h5 id="saveuninitialized">saveUninitialized</h5>
    <p>
      Forces a session that is “uninitialized” to be saved to the store. A
      session is uninitialized when it is new but not modified. Choosing
      <code>false</code> is useful for implementing login sessions, reducing
      server storage usage, or complying with laws that require permission
      before setting a cookie. Choosing <code>false</code> will also help with
      race conditions where a client makes multiple parallel requests without a
      session.
    </p>
    <p>
      The default value is <code>true</code>, but using the default has been
      deprecated, as the default will change in the future. Please research into
      this setting and choose what is appropriate to your use-case.
    </p>
    <p>
      <strong>Note</strong> if you are using Session in conjunction with
      PassportJS, Passport will add an empty Passport object to the session for
      use after a user is authenticated, which will be treated as a modification
      to the session, causing it to be saved.
      <em>This has been fixed in PassportJS 0.3.0</em>
    </p>
    <h5 id="secret">secret</h5>
    <p><strong>Required option</strong></p>
    <p>
      This is the secret used to sign the session ID cookie. This can be either
      a string for a single secret, or an array of multiple secrets. If an array
      of secrets is provided, only the first element will be used to sign the
      session ID cookie, while all the elements will be considered when
      verifying the signature in requests. The secret itself should be not
      easily parsed by a human and would best be a random set of characters. A
      best practice may include:
    </p>
    <ul>
      <li>
        The use of environment variables to store the secret, ensuring the
        secret itself does not exist in your repository.
      </li>
      <li>
        Periodic updates of the secret, while ensuring the previous secret is in
        the array.
      </li>
    </ul>
    <p>
      Using a secret that cannot be guessed will reduce the ability to hijack a
      session to only guessing the session ID (as determined by the
      <code>genid</code> option).
    </p>
    <p>
      Changing the secret value will invalidate all existing sessions. In order
      to rotate the secret without invalidating sessions, provide an array of
      secrets, with the new secret as first element of the array, and including
      previous secrets as the later elements.
    </p>
    <h5 id="store">store</h5>
    <p>
      The session store instance, defaults to a new
      <code>MemoryStore</code> instance.
    </p>
    <h5 id="unset">unset</h5>
    <p>
      Control the result of unsetting <code>req.session</code> (through
      <code>delete</code>, setting to <code>null</code>, etc.).
    </p>
    <p>The default value is <code>'keep'</code>.</p>
    <ul>
      <li>
        <code>'destroy'</code> The session will be destroyed (deleted) when the
        response ends.
      </li>
      <li>
        <code>'keep'</code> The session in the store will be kept, but
        modifications made during the request are ignored and not saved.
      </li>
    </ul>
    <h3 id="req.session">req.session</h3>
    <p>
      To store or access session data, simply use the request property
      <code>req.session</code>, which is (generally) serialized as JSON by the
      store, so nested objects are typically fine. For example below is a
      user-specific view counter:
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// Use the session middleware</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">app</span>.<span class="at">use</span>(<span class="at">session</span>(<span class="op">{</span> <span class="dt">secret</span><span class="op">:</span> <span class="st">&#39;keyboard cat&#39;</span><span class="op">,</span> <span class="dt">cookie</span><span class="op">:</span> <span class="op">{</span> <span class="dt">maxAge</span><span class="op">:</span> <span class="dv">60000</span> <span class="op">}}</span>))</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">// Access the session as req.session</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> <span class="kw">function</span>(req<span class="op">,</span> res<span class="op">,</span> next) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="cf">if</span> (<span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span><span class="op">++</span></a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="va">res</span>.<span class="at">setHeader</span>(<span class="st">&#39;Content-Type&#39;</span><span class="op">,</span> <span class="st">&#39;text/html&#39;</span>)</a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="va">res</span>.<span class="at">write</span>(<span class="st">&#39;&lt;p&gt;views: &#39;</span> <span class="op">+</span> <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span> <span class="op">+</span> <span class="st">&#39;&lt;/p&gt;&#39;</span>)</a>
<a class="sourceLine" id="cb6-10" title="10">    <span class="va">res</span>.<span class="at">write</span>(<span class="st">&#39;&lt;p&gt;expires in: &#39;</span> <span class="op">+</span> (<span class="va">req</span>.<span class="va">session</span>.<span class="va">cookie</span>.<span class="at">maxAge</span> / <span class="dv">1000</span>) <span class="op">+</span> <span class="st">&#39;s&lt;/p&gt;&#39;</span>)</a>
<a class="sourceLine" id="cb6-11" title="11">    <span class="va">res</span>.<span class="at">end</span>()</a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-13" title="13">    <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span> <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb6-14" title="14">    <span class="va">res</span>.<span class="at">end</span>(<span class="st">&#39;welcome to the session demo. refresh!&#39;</span>)</a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="op">}</span>)</a></code></pre>
    </div>
    <h4 id="session.regeneratecallback">Session.regenerate(callback)</h4>
    <p>
      To regenerate the session simply invoke the method. Once complete, a new
      SID and <code>Session</code> instance will be initialized at
      <code>req.session</code> and the <code>callback</code> will be invoked.
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">req</span>.<span class="va">session</span>.<span class="at">regenerate</span>(<span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="co">// will have a new session here</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span>)</a></code></pre>
    </div>
    <h4 id="session.destroycallback">Session.destroy(callback)</h4>
    <p>
      Destroys the session and will unset the <code>req.session</code> property.
      Once complete, the <code>callback</code> will be invoked.
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">req</span>.<span class="va">session</span>.<span class="at">destroy</span>(<span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="co">// cannot access session here</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">}</span>)</a></code></pre>
    </div>
    <h4 id="session.reloadcallback">Session.reload(callback)</h4>
    <p>
      Reloads the session data from the store and re-populates the
      <code>req.session</code> object. Once complete, the
      <code>callback</code> will be invoked.
    </p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="va">req</span>.<span class="va">session</span>.<span class="at">reload</span>(<span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="co">// session updated</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="op">}</span>)</a></code></pre>
    </div>
    <h4 id="session.savecallback">Session.save(callback)</h4>
    <p>
      Save the session back to the store, replacing the contents on the store
      with the contents in memory (though a store may do something else–consult
      the store’s documentation for exact behavior).
    </p>
    <p>
      This method is automatically called at the end of the HTTP response if the
      session data has been altered (though this behavior can be altered with
      various options in the middleware constructor). Because of this, typically
      this method does not need to be called.
    </p>
    <p>
      There are some cases where it is useful to call this method, for example,
      redirects, long-lived requests or in WebSockets.
    </p>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">req</span>.<span class="va">session</span>.<span class="at">save</span>(<span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="co">// session saved</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="op">}</span>)</a></code></pre>
    </div>
    <h4 id="session.touch">Session.touch()</h4>
    <p>
      Updates the <code>.maxAge</code> property. Typically this is not necessary
      to call, as the session middleware does this for you.
    </p>
    <h3 id="req.session.id">req.session.id</h3>
    <p>
      Each session has a unique ID associated with it. This property is an alias
      of <a href="#reqsessionid-1"><code>req.sessionID</code></a> and cannot be
      modified. It has been added to make the session ID accessible from the
      <code>session</code> object.
    </p>
    <h3 id="req.session.cookie">req.session.cookie</h3>
    <p>
      Each session has a unique cookie object accompany it. This allows you to
      alter the session cookie per visitor. For example we can set
      <code>req.session.cookie.expires</code> to <code>false</code> to enable
      the cookie to remain for only the duration of the user-agent.
    </p>
    <h4 id="cookie.maxage-1">Cookie.maxAge</h4>
    <p>
      Alternatively <code>req.session.cookie.maxAge</code> will return the time
      remaining in milliseconds, which we may also re-assign a new value to
      adjust the <code>.expires</code> property appropriately. The following are
      essentially equivalent
    </p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">var</span> hour <span class="op">=</span> <span class="dv">3600000</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="va">req</span>.<span class="va">session</span>.<span class="va">cookie</span>.<span class="at">expires</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>(<span class="va">Date</span>.<span class="at">now</span>() <span class="op">+</span> hour)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="va">req</span>.<span class="va">session</span>.<span class="va">cookie</span>.<span class="at">maxAge</span> <span class="op">=</span> hour</a></code></pre>
    </div>
    <p>
      For example when <code>maxAge</code> is set to <code>60000</code> (one
      minute), and 30 seconds has elapsed it will return
      <code>30000</code> until the current request has completed, at which time
      <code>req.session.touch()</code> is called to reset
      <code>req.session.cookie.maxAge</code> to its original value.
    </p>
    <div class="sourceCode" id="cb12">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">req</span>.<span class="va">session</span>.<span class="va">cookie</span>.<span class="at">maxAge</span> <span class="co">// =&gt; 30000</span></a></code></pre>
    </div>
    <h4 id="cookie.originalmaxage">Cookie.originalMaxAge</h4>
    <p>
      The <code>req.session.cookie.originalMaxAge</code> property returns the
      original <code>maxAge</code> (time-to-live), in milliseconds, of the
      session cookie.
    </p>
    <h3 id="req.sessionid">req.sessionID</h3>
    <p>
      To get the ID of the loaded session, access the request property
      <code>req.sessionID</code>. This is simply a read-only value set when a
      session is loaded/created.
    </p>
    <h2 id="session-store-implementation">Session Store Implementation</h2>
    <p>
      Every session store <em>must</em> be an <code>EventEmitter</code> and
      implement specific methods. The following methods are the list of
      <strong>required</strong>, <strong>recommended</strong>, and
      <strong>optional</strong>.
    </p>
    <ul>
      <li>
        Required methods are ones that this module will always call on the
        store.
      </li>
      <li>
        Recommended methods are ones that this module will call on the store if
        available.
      </li>
      <li>
        Optional methods are ones this module does not call at all, but helps
        present uniform stores to users.
      </li>
    </ul>
    <p>
      For an example implementation view the
      <a href="http://github.com/visionmedia/connect-redis">connect-redis</a>
      repo.
    </p>
    <h3 id="store.allcallback">store.all(callback)</h3>
    <p><strong>Optional</strong></p>
    <p>
      This optional method is used to get all sessions in the store as an array.
      The <code>callback</code> should be called as
      <code>callback(error, sessions)</code>.
    </p>
    <h3 id="store.destroysid-callback">store.destroy(sid, callback)</h3>
    <p><strong>Required</strong></p>
    <p>
      This required method is used to destroy/delete a session from the store
      given a session ID (<code>sid</code>). The <code>callback</code> should be
      called as <code>callback(error)</code> once the session is destroyed.
    </p>
    <h3 id="store.clearcallback">store.clear(callback)</h3>
    <p><strong>Optional</strong></p>
    <p>
      This optional method is used to delete all sessions from the store. The
      <code>callback</code> should be called as
      <code>callback(error)</code> once the store is cleared.
    </p>
    <h3 id="store.lengthcallback">store.length(callback)</h3>
    <p><strong>Optional</strong></p>
    <p>
      This optional method is used to get the count of all sessions in the
      store. The <code>callback</code> should be called as
      <code>callback(error, len)</code>.
    </p>
    <h3 id="store.getsid-callback">store.get(sid, callback)</h3>
    <p><strong>Required</strong></p>
    <p>
      This required method is used to get a session from the store given a
      session ID (<code>sid</code>). The <code>callback</code> should be called
      as <code>callback(error, session)</code>.
    </p>
    <p>
      The <code>session</code> argument should be a session if found, otherwise
      <code>null</code> or <code>undefined</code> if the session was not found
      (and there was no error). A special case is made when
      <code>error.code === 'ENOENT'</code> to act like
      <code>callback(null, null)</code>.
    </p>
    <h3 id="store.setsid-session-callback">
      store.set(sid, session, callback)
    </h3>
    <p><strong>Required</strong></p>
    <p>
      This required method is used to upsert a session into the store given a
      session ID (<code>sid</code>) and session (<code>session</code>) object.
      The callback should be called as <code>callback(error)</code> once the
      session has been set in the store.
    </p>
    <h3 id="store.touchsid-session-callback">
      store.touch(sid, session, callback)
    </h3>
    <p><strong>Recommended</strong></p>
    <p>
      This recommended method is used to “touch” a given session given a session
      ID (<code>sid</code>) and session (<code>session</code>) object. The
      <code>callback</code> should be called as
      <code>callback(error)</code> once the session has been touched.
    </p>
    <p>
      This is primarily used when the store will automatically delete idle
      sessions and this method is used to signal to the store the given session
      is active, potentially resetting the idle timer.
    </p>
    <h2 id="compatible-session-stores">Compatible Session Stores</h2>
    <p>
      The following modules implement a session store that is compatible with
      this module. Please make a PR to add additional modules :)
    </p>
    <p>
      <a href="https://www.npmjs.com/package/aerospike-session-store"
        ><img
          src="https://badgen.net/github/stars/aerospike/aerospike-session-store-expressjs?label=%E2%98%85"
          alt="★"
        />
        aerospike-session-store</a
      >
      A session store using <a href="http://www.aerospike.com/">Aerospike</a>.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/better-sqlite3-session-store"
        ><img
          src="https://badgen.net/github/stars/timdaub/better-sqlite3-session-store?label=%E2%98%85"
          alt="★"
        />
        better-sqlite3-session-store</a
      >
      A session store based on
      <a href="https://github.com/JoshuaWise/better-sqlite3">better-sqlite3</a>.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/cassandra-store"
        ><img
          src="https://badgen.net/github/stars/webcc/cassandra-store?label=%E2%98%85"
          alt="★"
        />
        cassandra-store</a
      >
      An Apache Cassandra-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/cluster-store"
        ><img
          src="https://badgen.net/github/stars/coolaj86/cluster-store?label=%E2%98%85"
          alt="★"
        />
        cluster-store</a
      >
      A wrapper for using in-process / embedded stores - such as SQLite (via
      knex), leveldb, files, or memory - with node cluster (desirable for
      Raspberry Pi 2 and other multi-core embedded devices).
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-arango"
        ><img
          src="https://badgen.net/github/stars/AlexanderArvidsson/connect-arango?label=%E2%98%85"
          alt="★"
        />
        connect-arango</a
      >
      An ArangoDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-azuretables"
        ><img
          src="https://badgen.net/github/stars/mike-goodwin/connect-azuretables?label=%E2%98%85"
          alt="★"
        />
        connect-azuretables</a
      >
      An
      <a href="https://azure.microsoft.com/en-gb/services/storage/tables/"
        >Azure Table Storage</a
      >-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-cloudant-store"
        ><img
          src="https://badgen.net/github/stars/adriantanasa/connect-cloudant-store?label=%E2%98%85"
          alt="★"
        />
        connect-cloudant-store</a
      >
      An <a href="https://cloudant.com/">IBM Cloudant</a>-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-couchbase"
        ><img
          src="https://badgen.net/github/stars/christophermina/connect-couchbase?label=%E2%98%85"
          alt="★"
        />
        connect-couchbase</a
      >
      A <a href="http://www.couchbase.com/">couchbase</a>-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-datacache"
        ><img
          src="https://badgen.net/github/stars/adriantanasa/connect-datacache?label=%E2%98%85"
          alt="★"
        />
        connect-datacache</a
      >
      An
      <a href="http://www.ibm.com/cloud-computing/bluemix/"
        >IBM Bluemix Data Cache</a
      >-based session store.
    </p>
    <p>
      <span class="citation" data-cites="google-cloud/connect-datastore"
        >[![★][@google-cloud/connect-datastore-image]
        @google-cloud/connect-datastore]</span
      ><span class="citation" data-cites="google-cloud/connect-datastore-url"
        >[@google-cloud/connect-datastore-url]</span
      >
      A
      <a href="https://cloud.google.com/datastore/docs/concepts/overview"
        >Google Cloud Datastore</a
      >-based session store.
    </p>
    <p>
      <span class="citation" data-cites="google-cloud/connect-datastore-url"
        >[@google-cloud/connect-datastore-url]</span
      >: https://www.npmjs.com/package/<span
        class="citation"
        data-cites="google-cloud/connect-datastore google-cloud/connect-datastore-image"
        >@google-cloud/connect-datastore
        [@google-cloud/connect-datastore-image]</span
      >:
      https://badgen.net/github/stars/GoogleCloudPlatform/cloud-datastore-session-node?label=%E2%98%85
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-db2"
        ><img
          src="https://badgen.net/github/stars/wallali/connect-db2?label=%E2%98%85"
          alt="★"
        />
        connect-db2</a
      >
      An IBM DB2-based session store built using
      <a href="https://www.npmjs.com/package/ibm_db">ibm_db</a> module.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-dynamodb"
        ><img
          src="https://badgen.net/github/stars/ca98am79/connect-dynamodb?label=%E2%98%85"
          alt="★"
        />
        connect-dynamodb</a
      >
      A DynamoDB-based session store.
    </p>
    <p>
      <span class="citation" data-cites="google-cloud/connect-firestore"
        >[![★][@google-cloud/connect-firestore-image]
        @google-cloud/connect-firestore]</span
      ><span class="citation" data-cites="google-cloud/connect-firestore-url"
        >[@google-cloud/connect-firestore-url]</span
      >
      A
      <a href="https://cloud.google.com/firestore/docs/overview"
        >Google Cloud Firestore</a
      >-based session store.
    </p>
    <p>
      <span class="citation" data-cites="google-cloud/connect-firestore-url"
        >[@google-cloud/connect-firestore-url]</span
      >: https://www.npmjs.com/package/<span
        class="citation"
        data-cites="google-cloud/connect-firestore google-cloud/connect-firestore-image"
        >@google-cloud/connect-firestore
        [@google-cloud/connect-firestore-image]</span
      >:
      https://badgen.net/github/stars/googleapis/nodejs-firestore-session?label=%E2%98%85
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-hazelcast"
        ><img
          src="https://badgen.net/github/stars/huseyinbabal/connect-hazelcast?label=%E2%98%85"
          alt="★"
        />
        connect-hazelcast</a
      >
      Hazelcast session store for Connect and Express.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-loki"
        ><img
          src="https://badgen.net/github/stars/Requarks/connect-loki?label=%E2%98%85"
          alt="★"
        />
        connect-loki</a
      >
      A Loki.js-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-memcached"
        ><img
          src="https://badgen.net/github/stars/balor/connect-memcached?label=%E2%98%85"
          alt="★"
        />
        connect-memcached</a
      >
      A memcached-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-memjs"
        ><img
          src="https://badgen.net/github/stars/liamdon/connect-memjs?label=%E2%98%85"
          alt="★"
        />
        connect-memjs</a
      >
      A memcached-based session store using
      <a href="https://www.npmjs.com/package/memjs">memjs</a> as the memcached
      client.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-ml"
        ><img
          src="https://badgen.net/github/stars/bluetorch/connect-ml?label=%E2%98%85"
          alt="★"
        />
        connect-ml</a
      >
      A MarkLogic Server-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-monetdb"
        ><img
          src="https://badgen.net/github/stars/MonetDB/npm-connect-monetdb?label=%E2%98%85"
          alt="★"
        />
        connect-monetdb</a
      >
      A MonetDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-mongo"
        ><img
          src="https://badgen.net/github/stars/kcbanner/connect-mongo?label=%E2%98%85"
          alt="★"
        />
        connect-mongo</a
      >
      A MongoDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-mongodb-session"
        ><img
          src="https://badgen.net/github/stars/mongodb-js/connect-mongodb-session?label=%E2%98%85"
          alt="★"
        />
        connect-mongodb-session</a
      >
      Lightweight MongoDB-based session store built and maintained by MongoDB.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-mssql-v2"
        ><img
          src="https://badgen.net/github/stars/jluboff/connect-mssql-v2?label=%E2%98%85"
          alt="★"
        />
        connect-mssql-v2</a
      >
      A Microsoft SQL Server-based session store based on
      <a href="https://www.npmjs.com/package/connect-mssql">connect-mssql</a>.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-pg-simple"
        ><img
          src="https://badgen.net/github/stars/voxpelli/node-connect-pg-simple?label=%E2%98%85"
          alt="★"
        />
        connect-pg-simple</a
      >
      A PostgreSQL-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-redis"
        ><img
          src="https://badgen.net/github/stars/tj/connect-redis?label=%E2%98%85"
          alt="★"
        />
        connect-redis</a
      >
      A Redis-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-session-firebase"
        ><img
          src="https://badgen.net/github/stars/benweier/connect-session-firebase?label=%E2%98%85"
          alt="★"
        />
        connect-session-firebase</a
      >
      A session store based on the
      <a href="https://firebase.google.com/docs/database/"
        >Firebase Realtime Database</a
      >
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-session-knex"
        ><img
          src="https://badgen.net/github/stars/llambda/connect-session-knex?label=%E2%98%85"
          alt="★"
        />
        connect-session-knex</a
      >
      A session store using <a href="http://knexjs.org/">Knex.js</a>, which is a
      SQL query builder for PostgreSQL, MySQL, MariaDB, SQLite3, and Oracle.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-session-sequelize"
        ><img
          src="https://badgen.net/github/stars/mweibel/connect-session-sequelize?label=%E2%98%85"
          alt="★"
        />
        connect-session-sequelize</a
      >
      A session store using <a href="http://sequelizejs.com/">Sequelize.js</a>,
      which is a Node.js / io.js ORM for PostgreSQL, MySQL, SQLite and MSSQL.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-sqlite3"
        ><img
          src="https://badgen.net/github/stars/rawberg/connect-sqlite3?label=%E2%98%85"
          alt="★"
        />
        connect-sqlite3</a
      >
      A <a href="https://github.com/mapbox/node-sqlite3">SQLite3</a> session
      store modeled after the TJ’s <code>connect-redis</code> store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/connect-typeorm"
        ><img
          src="https://badgen.net/github/stars/makepost/connect-typeorm?label=%E2%98%85"
          alt="★"
        />
        connect-typeorm</a
      >
      A <a href="https://github.com/typeorm/typeorm">TypeORM</a>-based session
      store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/couchdb-expression"
        ><img
          src="https://badgen.net/github/stars/tkshnwesper/couchdb-expression?label=%E2%98%85"
          alt="★"
        />
        couchdb-expression</a
      >
      A <a href="https://couchdb.apache.org/">CouchDB</a>-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/dynamodb-store"
        ><img
          src="https://badgen.net/github/stars/rafaelrpinto/dynamodb-store?label=%E2%98%85"
          alt="★"
        />
        dynamodb-store</a
      >
      A DynamoDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-etcd"
        ><img
          src="https://badgen.net/github/stars/gildean/express-etcd?label=%E2%98%85"
          alt="★"
        />
        express-etcd</a
      >
      An <a href="https://github.com/stianeikeland/node-etcd">etcd</a> based
      session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-mysql-session"
        ><img
          src="https://badgen.net/github/stars/chill117/express-mysql-session?label=%E2%98%85"
          alt="★"
        />
        express-mysql-session</a
      >
      A session store using native
      <a href="https://www.mysql.com/">MySQL</a> via the
      <a href="https://github.com/felixge/node-mysql">node-mysql</a> module.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-nedb-session"
        ><img
          src="https://badgen.net/github/stars/louischatriot/express-nedb-session?label=%E2%98%85"
          alt="★"
        />
        express-nedb-session</a
      >
      A NeDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-oracle-session"
        ><img
          src="https://badgen.net/github/stars/slumber86/express-oracle-session?label=%E2%98%85"
          alt="★"
        />
        express-oracle-session</a
      >
      A session store using native
      <a href="https://www.oracle.com/">oracle</a> via the
      <a href="https://www.npmjs.com/package/oracledb">node-oracledb</a> module.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-session-cache-manager"
        ><img
          src="https://badgen.net/github/stars/theogravity/express-session-cache-manager?label=%E2%98%85"
          alt="★"
        />
        express-session-cache-manager</a
      >
      A store that implements
      <a href="https://www.npmjs.com/package/cache-manager">cache-manager</a>,
      which supports a
      <a href="https://www.npmjs.com/package/cache-manager#store-engines"
        >variety of storage types</a
      >.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-session-etcd3"
        ><img
          src="https://badgen.net/github/stars/willgm/express-session-etcd3?label=%E2%98%85"
          alt="★"
        />
        express-session-etcd3</a
      >
      An <a href="https://github.com/mixer/etcd3">etcd3</a> based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-session-level"
        ><img
          src="https://badgen.net/github/stars/tgohn/express-session-level?label=%E2%98%85"
          alt="★"
        />
        express-session-level</a
      >
      A <a href="https://github.com/Level/levelup">LevelDB</a> based session
      store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-session-rsdb"
        ><img
          src="https://badgen.net/github/stars/paragi/express-session-rsdb?label=%E2%98%85"
          alt="★"
        />
        express-session-rsdb</a
      >
      Session store based on Rocket-Store: A very simple, super fast and yet
      powerfull, flat file database.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/express-sessions"
        ><img
          src="https://badgen.net/github/stars/konteck/express-sessions?label=%E2%98%85"
          alt="★"
        />
        express-sessions</a
      >
      A session store supporting both MongoDB and Redis.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/firestore-store"
        ><img
          src="https://badgen.net/github/stars/hendrysadrak/firestore-store?label=%E2%98%85"
          alt="★"
        />
        firestore-store</a
      >
      A
      <a href="https://github.com/hendrysadrak/firestore-store">Firestore</a
      >-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/fortune-session"
        ><img
          src="https://badgen.net/github/stars/aliceklipper/fortune-session?label=%E2%98%85"
          alt="★"
        />
        fortune-session</a
      >
      A <a href="https://github.com/fortunejs/fortune">Fortune.js</a> based
      session store. Supports all backends supported by Fortune (MongoDB, Redis,
      Postgres, NeDB).
    </p>
    <p>
      <a href="https://www.npmjs.com/package/hazelcast-store"
        ><img
          src="https://badgen.net/github/stars/jackspaniel/hazelcast-store?label=%E2%98%85"
          alt="★"
        />
        hazelcast-store</a
      >
      A Hazelcast-based session store built on the
      <a href="https://www.npmjs.com/package/hazelcast-client"
        >Hazelcast Node Client</a
      >.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/level-session-store"
        ><img
          src="https://badgen.net/github/stars/toddself/level-session-store?label=%E2%98%85"
          alt="★"
        />
        level-session-store</a
      >
      A LevelDB-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/lowdb-session-store"
        ><img
          src="https://badgen.net/github/stars/fhellwig/lowdb-session-store?label=%E2%98%85"
          alt="★"
        />
        lowdb-session-store</a
      >
      A <a href="https://www.npmjs.com/package/lowdb">lowdb</a>-based session
      store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/medea-session-store"
        ><img
          src="https://badgen.net/github/stars/BenjaminVadant/medea-session-store?label=%E2%98%85"
          alt="★"
        />
        medea-session-store</a
      >
      A Medea-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/memorystore"
        ><img
          src="https://badgen.net/github/stars/roccomuso/memorystore?label=%E2%98%85"
          alt="★"
        />
        memorystore</a
      >
      A memory session store made for production.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/mssql-session-store"
        ><img
          src="https://badgen.net/github/stars/jwathen/mssql-session-store?label=%E2%98%85"
          alt="★"
        />
        mssql-session-store</a
      >
      A SQL Server-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/nedb-session-store"
        ><img
          src="https://badgen.net/github/stars/JamesMGreene/nedb-session-store?label=%E2%98%85"
          alt="★"
        />
        nedb-session-store</a
      >
      An alternate NeDB-based (either in-memory or file-persisted) session
      store.
    </p>
    <p>
      <span class="citation" data-cites="quixo3/prisma-session-store"
        >[![★][@quixo3/prisma-session-store-image]
        @quixo3/prisma-session-store]</span
      ><span class="citation" data-cites="quixo3/prisma-session-store-url"
        >[@quixo3/prisma-session-store-url]</span
      >
      A session store for the
      <a href="https://www.prisma.io">Prisma Framework</a>.
    </p>
    <p>
      <span class="citation" data-cites="quixo3/prisma-session-store-url"
        >[@quixo3/prisma-session-store-url]</span
      >: https://www.npmjs.com/package/<span
        class="citation"
        data-cites="quixo3/prisma-session-store quixo3/prisma-session-store-image"
        >@quixo3/prisma-session-store [@quixo3/prisma-session-store-image]</span
      >:
      https://badgen.net/github/stars/kleydon/prisma-session-store?label=%E2%98%85
    </p>
    <p>
      <a href="https://www.npmjs.com/package/restsession"
        ><img
          src="https://badgen.net/github/stars/jankal/restsession?label=%E2%98%85"
          alt="★"
        />
        restsession</a
      >
      Store sessions utilizing a RESTful API
    </p>
    <p>
      <a href="https://www.npmjs.com/package/sequelstore-connect"
        ><img
          src="https://badgen.net/github/stars/MattMcFarland/sequelstore-connect?label=%E2%98%85"
          alt="★"
        />
        sequelstore-connect</a
      >
      A session store using <a href="http://sequelizejs.com/">Sequelize.js</a>.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/session-file-store"
        ><img
          src="https://badgen.net/github/stars/valery-barysok/session-file-store?label=%E2%98%85"
          alt="★"
        />
        session-file-store</a
      >
      A file system-based session store.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/session-pouchdb-store"
        ><img
          src="https://badgen.net/github/stars/solzimer/session-pouchdb-store?label=%E2%98%85"
          alt="★"
        />
        session-pouchdb-store</a
      >
      Session store for PouchDB / CouchDB. Accepts embedded, custom, or remote
      PouchDB instance and realtime synchronization.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/session-rethinkdb"
        ><img
          src="https://badgen.net/github/stars/llambda/session-rethinkdb?label=%E2%98%85"
          alt="★"
        />
        session-rethinkdb</a
      >
      A <a href="http://rethinkdb.com/">RethinkDB</a>-based session store.
    </p>
    <p>
      <span class="citation" data-cites="databunker/session-store"
        >[![★][@databunker/session-store-image] @databunker/session-store]</span
      ><span class="citation" data-cites="databunker/session-store-url"
        >[@databunker/session-store-url]</span
      >
      A <a href="https://databunker.org/">Databunker</a>-based encrypted session
      store.
    </p>
    <p>
      <span class="citation" data-cites="databunker/session-store-url"
        >[@databunker/session-store-url]</span
      >: https://www.npmjs.com/package/<span
        class="citation"
        data-cites="databunker/session-store databunker/session-store-image"
        >@databunker/session-store [@databunker/session-store-image]</span
      >:
      https://badgen.net/github/stars/securitybunker/databunker-session-store?label=%E2%98%85
    </p>
    <p>
      <a href="https://www.npmjs.com/package/sessionstore"
        ><img
          src="https://badgen.net/github/stars/adrai/sessionstore?label=%E2%98%85"
          alt="★"
        />
        sessionstore</a
      >
      A session store that works with various databases.
    </p>
    <p>
      <a href="https://www.npmjs.com/package/tch-nedb-session"
        ><img
          src="https://badgen.net/github/stars/tomaschyly/NeDBSession?label=%E2%98%85"
          alt="★"
        />
        tch-nedb-session</a
      >
      A file system session store based on NeDB.
    </p>
    <h2 id="example">Example</h2>
    <p>
      A simple example using <code>express-session</code> to store page views
      for a user.
    </p>
    <div class="sourceCode" id="cb13">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">var</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">var</span> parseurl <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;parseurl&#39;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">var</span> session <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express-session&#39;</span>)</a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="va">app</span>.<span class="at">use</span>(<span class="at">session</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb13-8" title="8">  <span class="dt">secret</span><span class="op">:</span> <span class="st">&#39;keyboard cat&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-9" title="9">  <span class="dt">resave</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-10" title="10">  <span class="dt">saveUninitialized</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="op">}</span>))</a>
<a class="sourceLine" id="cb13-12" title="12"></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="va">app</span>.<span class="at">use</span>(<span class="kw">function</span> (req<span class="op">,</span> res<span class="op">,</span> next) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-14" title="14">  <span class="cf">if</span> (<span class="op">!</span><span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-15" title="15">    <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span> <span class="op">=</span> <span class="op">{}</span></a>
<a class="sourceLine" id="cb13-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-17" title="17"></a>
<a class="sourceLine" id="cb13-18" title="18">  <span class="co">// get the url pathname</span></a>
<a class="sourceLine" id="cb13-19" title="19">  <span class="kw">var</span> pathname <span class="op">=</span> <span class="at">parseurl</span>(req).<span class="at">pathname</span></a>
<a class="sourceLine" id="cb13-20" title="20"></a>
<a class="sourceLine" id="cb13-21" title="21">  <span class="co">// count the views</span></a>
<a class="sourceLine" id="cb13-22" title="22">  <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>[pathname] <span class="op">=</span> (<span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>[pathname] <span class="op">||</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-23" title="23"></a>
<a class="sourceLine" id="cb13-24" title="24">  <span class="at">next</span>()</a>
<a class="sourceLine" id="cb13-25" title="25"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb13-26" title="26"></a>
<a class="sourceLine" id="cb13-27" title="27"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/foo&#39;</span><span class="op">,</span> <span class="kw">function</span> (req<span class="op">,</span> res<span class="op">,</span> next) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-28" title="28">  <span class="va">res</span>.<span class="at">send</span>(<span class="st">&#39;you viewed this page &#39;</span> <span class="op">+</span> <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>[<span class="st">&#39;/foo&#39;</span>] <span class="op">+</span> <span class="st">&#39; times&#39;</span>)</a>
<a class="sourceLine" id="cb13-29" title="29"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb13-30" title="30"></a>
<a class="sourceLine" id="cb13-31" title="31"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/bar&#39;</span><span class="op">,</span> <span class="kw">function</span> (req<span class="op">,</span> res<span class="op">,</span> next) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-32" title="32">  <span class="va">res</span>.<span class="at">send</span>(<span class="st">&#39;you viewed this page &#39;</span> <span class="op">+</span> <span class="va">req</span>.<span class="va">session</span>.<span class="at">views</span>[<span class="st">&#39;/bar&#39;</span>] <span class="op">+</span> <span class="st">&#39; times&#39;</span>)</a>
<a class="sourceLine" id="cb13-33" title="33"><span class="op">}</span>)</a></code></pre>
    </div>
    <h2 id="debugging">Debugging</h2>
    <p>
      This module uses the
      <a href="https://www.npmjs.com/package/debug">debug</a> module internally
      to log information about session operations.
    </p>
    <p>
      To see all the internal logs, set the <code>DEBUG</code> environment
      variable to <code>express-session</code> when launching your app (<code
        >npm start</code
      >, in this example):
    </p>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1">$ <span class="va">DEBUG=</span>express-session <span class="ex">npm</span> start</a></code></pre>
    </div>
    <p>On Windows, use the corresponding command;</p>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1"><span class="op">&gt;</span> <span class="kw">set</span> <span class="va">DEBUG=</span>express-session <span class="kw">&amp;</span> <span class="ex">npm</span> start</a></code></pre>
    </div>
    <h2 id="license">License</h2>
    <p><a href="LICENSE">MIT</a></p>
  </body>
</html>
