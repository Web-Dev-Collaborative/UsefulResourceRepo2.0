<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="method-override">method-override</h1>
    <p>
      <a href="https://npmjs.org/package/method-override"
        ><img
          src="https://img.shields.io/npm/v/method-override.svg"
          alt="NPM Version"
      /></a>
      <a href="https://npmjs.org/package/method-override"
        ><img
          src="https://img.shields.io/npm/dm/method-override.svg"
          alt="NPM Downloads"
      /></a>
      <a href="https://travis-ci.org/expressjs/method-override"
        ><img
          src="https://img.shields.io/travis/expressjs/method-override/master.svg"
          alt="Build Status"
      /></a>
      <a href="https://coveralls.io/r/expressjs/method-override?branch=master"
        ><img
          src="https://img.shields.io/coveralls/expressjs/method-override/master.svg"
          alt="Test Coverage"
      /></a>
    </p>
    <p>
      Lets you use HTTP verbs such as PUT or DELETE in places where the client
      doesnâ€™t support it.
    </p>
    <h2 id="install">Install</h2>
    <p>
      This is a <a href="https://nodejs.org/en/">Node.js</a> module available
      through the <a href="https://www.npmjs.com/">npm registry</a>.
      Installation is done using the
      <a
        href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"
        ><code>npm install</code> command</a
      >:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode sh"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install method-override</a></code></pre>
    </div>
    <h2 id="api">API</h2>
    <p>
      <strong>NOTE</strong> It is very important that this module is used
      <strong>before</strong> any module that needs to know the method of the
      request (for example, it <em>must</em> be used prior to the
      <code>csurf</code> module).
    </p>
    <h3 id="methodoverridegetter-options">methodOverride(getter, options)</h3>
    <p>
      Create a new middleware function to override the
      <code>req.method</code> property with a new value. This value will be
      pulled from the provided <code>getter</code>.
    </p>
    <ul>
      <li>
        <code>getter</code> - The getter to use to look up the overridden
        request method for the request. (default:
        <code>X-HTTP-Method-Override</code>)
      </li>
      <li>
        <code>options.methods</code> - The allowed methods the original request
        must be in to check for a method override value. (default:
        <code>['POST']</code>)
      </li>
    </ul>
    <p>
      If the found method is supported by node.js core, then
      <code>req.method</code> will be set to this value, as if it has originally
      been that value. The previous <code>req.method</code> value will be stored
      in <code>req.originalMethod</code>.
    </p>
    <h4 id="getter">getter</h4>
    <p>
      This is the method of getting the override value from the request. If a
      function is provided, the <code>req</code> is passed as the first
      argument, the <code>res</code> as the second argument and the method is
      expected to be returned. If a string is provided, the string is used to
      look up the method with the following rules:
    </p>
    <ul>
      <li>
        If the string starts with <code>X-</code>, then it is treated as the
        name of a header and that header is used for the method override. If the
        request contains the same header multiple times, the first occurrence is
        used.
      </li>
      <li>All other strings are treated as a key in the URL query string.</li>
    </ul>
    <h4 id="options.methods">options.methods</h4>
    <p>
      This allows the specification of what methods(s) the request
      <em>MUST</em> be in in order to check for the method override value. This
      defaults to only <code>POST</code> methods, which is the only method the
      override should arrive in. More methods may be specified here, but it may
      introduce security issues and cause weird behavior when requests travel
      through caches. This value is an array of methods in upper-case.
      <code>null</code> can be specified to allow all methods.
    </p>
    <h2 id="examples">Examples</h2>
    <h3 id="override-using-a-header">override using a header</h3>
    <p>
      To use a header to override the method, specify the header name as a
      string argument to the <code>methodOverride</code> function. To then make
      the call, send a <code>POST</code> request to a URL with the overridden
      method as the value of that header. This method of using a header would
      typically be used in conjunction with <code>XMLHttpRequest</code> on
      implementations that do not support the method you are trying to use.
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> methodOverride <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;method-override&#39;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">// override with the X-HTTP-Method-Override header in the request</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="st">&#39;X-HTTP-Method-Override&#39;</span>))</a></code></pre>
    </div>
    <p>Example call with header override using <code>XMLHttpRequest</code>:</p>
    <!-- eslint-env browser -->
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> xhr <span class="op">=</span> <span class="kw">new</span> <span class="at">XMLHttpRequest</span>()</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">xhr</span>.<span class="at">onload</span> <span class="op">=</span> onload</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="va">xhr</span>.<span class="at">open</span>(<span class="st">&#39;post&#39;</span><span class="op">,</span> <span class="st">&#39;/resource&#39;</span><span class="op">,</span> <span class="kw">true</span>)</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="va">xhr</span>.<span class="at">setRequestHeader</span>(<span class="st">&#39;X-HTTP-Method-Override&#39;</span><span class="op">,</span> <span class="st">&#39;DELETE&#39;</span>)</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="va">xhr</span>.<span class="at">send</span>()</a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="kw">function</span> <span class="at">onload</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="at">alert</span>(<span class="st">&#39;got response: &#39;</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">responseText</span>)</a>
<a class="sourceLine" id="cb3-9" title="9"><span class="op">}</span></a></code></pre>
    </div>
    <h3 id="override-using-a-query-value">override using a query value</h3>
    <p>
      To use a query string value to override the method, specify the query
      string key as a string argument to the
      <code>methodOverride</code> function. To then make the call, send a
      <code>POST</code> request to a URL with the overridden method as the value
      of that query string key. This method of using a query value would
      typically be used in conjunction with plain HTML
      <code>&lt;form&gt;</code> elements when trying to support legacy browsers
      but still use newer methods.
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">var</span> methodOverride <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;method-override&#39;</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">// override with POST having ?_method=DELETE</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="st">&#39;_method&#39;</span>))</a></code></pre>
    </div>
    <p>
      Example call with query override using HTML <code>&lt;form&gt;</code>:
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode html"
      ><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;POST&quot;</span><span class="ot"> action=</span><span class="st">&quot;/resource?_method=DELETE&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="kw">&gt;</span>Delete resource<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">&lt;/form&gt;</span></a></code></pre>
    </div>
    <h3 id="multiple-format-support">multiple format support</h3>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">var</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">var</span> methodOverride <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;method-override&#39;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">// override with different headers; last one takes precedence</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="st">&#39;X-HTTP-Method&#39;</span>)) <span class="co">//          Microsoft</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="st">&#39;X-HTTP-Method-Override&#39;</span>)) <span class="co">// Google/GData</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="st">&#39;X-Method-Override&#39;</span>)) <span class="co">//      IBM</span></a></code></pre>
    </div>
    <h3 id="custom-logic">custom logic</h3>
    <p>
      You can implement any kind of custom logic with a function for the
      <code>getter</code>. The following implements the logic for looking in
      <code>req.body</code> that was in <code>method-override@1</code>:
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">var</span> bodyParser <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;body-parser&#39;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">var</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">var</span> methodOverride <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;method-override&#39;</span>)</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">var</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">// </span><span class="al">NOTE</span><span class="co">: when using req.body, you must fully parse the request body</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">//       before you call methodOverride() in your middleware stack,</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">//       otherwise req.body will not be populated.</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="va">app</span>.<span class="at">use</span>(<span class="va">bodyParser</span>.<span class="at">urlencoded</span>())</a>
<a class="sourceLine" id="cb7-10" title="10"><span class="va">app</span>.<span class="at">use</span>(<span class="at">methodOverride</span>(<span class="kw">function</span> (req<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-11" title="11">  <span class="cf">if</span> (<span class="va">req</span>.<span class="at">body</span> <span class="op">&amp;&amp;</span> <span class="kw">typeof</span> <span class="va">req</span>.<span class="at">body</span> <span class="op">===</span> <span class="st">&#39;object&#39;</span> <span class="op">&amp;&amp;</span> <span class="st">&#39;_method&#39;</span> <span class="kw">in</span> <span class="va">req</span>.<span class="at">body</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-12" title="12">    <span class="co">// look in urlencoded POST bodies and delete it</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="kw">var</span> method <span class="op">=</span> <span class="va">req</span>.<span class="va">body</span>.<span class="at">_method</span></a>
<a class="sourceLine" id="cb7-14" title="14">    <span class="kw">delete</span> <span class="va">req</span>.<span class="va">body</span>.<span class="at">_method</span></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="cf">return</span> method</a>
<a class="sourceLine" id="cb7-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="op">}</span>))</a></code></pre>
    </div>
    <p>
      Example call with query override using HTML <code>&lt;form&gt;</code>:
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode html"
      ><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1"><span class="co">&lt;!-- enctype must be set to the type you will parse before methodOverride() --&gt;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">&lt;form</span><span class="ot"> method=</span><span class="st">&quot;POST&quot;</span><span class="ot"> action=</span><span class="st">&quot;/resource&quot;</span><span class="ot"> enctype=</span><span class="st">&quot;application/x-www-form-urlencoded&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;hidden&quot;</span><span class="ot"> name=</span><span class="st">&quot;_method&quot;</span><span class="ot"> value=</span><span class="st">&quot;DELETE&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="kw">&gt;</span>Delete resource<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">&lt;/form&gt;</span></a></code></pre>
    </div>
    <h2 id="license">License</h2>
    <p><a href="LICENSE">MIT</a></p>
  </body>
</html>
