<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>app-settings</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <p>The following table lists application settings.</p>
    <p>Note that sub-apps will:</p>
    <ul>
      <li>
        Not inherit the value of settings that have a default value. You must
        set the value in the sub-app.
      </li>
      <li>
        Inherit the value of settings with no default value; these are
        explicitly noted in the table below.
      </li>
    </ul>
    <p>
      Exceptions: Sub-apps will inherit the value of
      <code>trust proxy</code> even though it has a default value (for
      backward-compatibility); Sub-apps will not inherit the value of
      <code>view cache</code> in production (when <code>NODE_ENV</code> is
      “production”).
    </p>
    <div class="table-scroller">
      <table class="doctable" border="1">
        <thead>
          <tr>
            <th id="app-settings-property">Property</th>
            <th>Type</th>
            <th>Description</th>
            <th>Default</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <code>case sensitive routing</code>
            </td>
            <pre><code>&lt;td&gt;Boolean&lt;/td&gt;
  &lt;td&gt;&lt;p&gt;Enable case sensitivity.
  When enabled, &quot;/Foo&quot; and &quot;/foo&quot; are different routes.
  When disabled, &quot;/Foo&quot; and &quot;/foo&quot; are treated the same.&lt;/p&gt;
    &lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt;: Sub-apps will inherit the value of this setting.&lt;/p&gt;
  &lt;/td&gt;
  &lt;td&gt;N/A (undefined)
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>env</code>
            </td>
            <pre><code>&lt;td&gt;String&lt;/td&gt;
  &lt;td&gt;Environment mode.
  Be sure to set to &quot;production&quot; in a production environment;
  see &lt;a href=&quot;/advanced/best-practice-performance.html#env&quot;&gt;Production best practices: performance and reliability&lt;/a&gt;.
&lt;/td&gt;</code></pre>
            <td>
              <code>process.env.NODE_ENV</code> (<code>NODE_ENV</code>
              environment variable) or “development” if <code>NODE_ENV</code> is
              not set.
            </td>
          </tr>
          <tr>
            <td>
              <code>etag</code>
            </td>
            <td>Varied</td>
            <td>
              <p>
                Set the ETag response header. For possible values, see the
                <a href="#etag.options.table"><code>etag</code> options table</a
                >.
              </p>
              <a href="http://en.wikipedia.org/wiki/HTTP_ETag"
                >More about the HTTP ETag header</a
              >.
            </td>
            <td>
              <code>weak</code>
            </td>
          </tr>
          <tr>
            <td>
              <code>jsonp callback name</code>
            </td>
            <pre><code>&lt;td&gt;String&lt;/td&gt;
  &lt;td&gt;Specifies the default JSONP callback name.&lt;/td&gt;</code></pre>
            <td>“callback”</td>
          </tr>
          <tr>
            <td>
              <code>json escape</code>
            </td>
            <td>Boolean</td>
            <td markdown="1">
              Enable escaping JSON responses from the <code>res.json</code>,
              <code>res.jsonp</code>, and <code>res.send</code> APIs. This will
              escape the characters <code>&lt;</code>, <code>&gt;</code>, and
              <code>&amp;</code> as Unicode escape sequences in JSON. The
              purpose of this it to assist with
              <a
                href="https://blog.mozilla.org/security/2017/07/18/web-service-audits-firefox-accounts/"
                >mitigating certain types of persistent XSS attacks</a
              >
              when clients sniff responses for HTML.
              <p>
                <b>NOTE</b>: Sub-apps will inherit the value of this setting.
              </p>
            </td>
            <td>N/A (undefined)</td>
          </tr>
          <tr>
            <td>
              <code>json replacer</code>
            </td>
            <pre><code>&lt;td&gt;Varied&lt;/td&gt;
  &lt;td&gt;The &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#The_replacer_parameter&quot;&gt;&#39;replacer&#39; argument used by `JSON.stringify`&lt;/a&gt;.
    &lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt;: Sub-apps will inherit the value of this setting.&lt;/p&gt;
  &lt;/td&gt;</code></pre>
            <td>N/A (undefined)</td>
          </tr>
          <tr>
            <td>
              <code>json spaces</code>
            </td>
            <pre><code>&lt;td&gt;Varied&lt;/td&gt;
  &lt;td&gt;The &lt;a href=&quot;https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#The_space_argument&quot;&gt;&#39;space&#39; argument used by `JSON.stringify`&lt;/a&gt;.</code></pre>
            This is typically set to the number of spaces to use to indent
            prettified JSON.
            <p><b>NOTE</b>: Sub-apps will inherit the value of this setting.</p>
            <pre><code>&lt;/td&gt;
  &lt;td&gt;N/A (undefined)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>query parser</code>
            </td>
            <pre><code>&lt;td&gt;Varied&lt;/td&gt;</code></pre>
            <td>
              <p>
                Disable query parsing by setting the value to
                <code>false</code>, or set the query parser to use either
                “simple” or “extended” or a custom query string parsing
                function.
              </p>
              <p>
                The simple query parser is based on Node’s native query parser,
                <a href="http://nodejs.org/api/querystring.html">querystring</a
                >.
              </p>
              <p>
                The extended query parser is based on
                <a href="https://www.npmjs.org/package/qs">qs</a>.
              </p>
              A custom query string parsing function will receive the complete
              query string, and must return an object of query keys and their
              values.
            </td>
            <pre><code>&lt;td&gt;&quot;extended&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>strict routing</code>
            </td>
            <pre><code>&lt;td&gt;Boolean&lt;/td&gt;
  &lt;td&gt;&lt;p&gt;Enable strict routing.
  When enabled, the router treats &quot;/foo&quot; and &quot;/foo/&quot; as different.
  Otherwise, the router treats &quot;/foo&quot; and &quot;/foo/&quot; as the same.&lt;/p&gt;
    &lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt;: Sub-apps will inherit the value of this setting.&lt;/p&gt;
  &lt;/td&gt;
  &lt;td&gt;N/A (undefined) &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>subdomain offset</code>
            </td>
            <pre><code>&lt;td&gt;Number&lt;/td&gt;
  &lt;td&gt;The number of dot-separated parts of the host to remove to access subdomain.&lt;/td&gt;
  &lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>trust proxy</code>
            </td>
            <pre><code>&lt;td&gt;Varied&lt;/td&gt;</code></pre>
            <td markdown="1">
              Indicates the app is behind a front-facing proxy, and to use the
              <code>X-Forwarded-*</code> headers to determine the connection and
              the IP address of the client. NOTE:
              <code>X-Forwarded-*</code> headers are easily spoofed and the
              detected IP addresses are unreliable.
              <p>
                When enabled, Express attempts to determine the IP address of
                the client connected through the front-facing proxy, or series
                of proxies. The <code>req.ips</code> property, then contains an
                array of IP addresses the client is connected through. To enable
                it, use the values described in the
                <a href="#trust.proxy.options.table"
                  >trust proxy options table</a
                >.
              </p>
              <p>
                The <code>trust proxy</code> setting is implemented using the
                <a href="https://www.npmjs.org/package/proxy-addr"
                  >proxy-addr</a
                >
                package. For more information, see its documentation.
              </p>
              <p>
                <b>NOTE</b>: Sub-apps <i>will</i> inherit the value of this
                setting, even though it has a default value.
              </p>
            </td>
            <td><code>false</code> (disabled)</td>
          </tr>
          <tr>
            <td>
              <code>views</code>
            </td>
            <pre><code>&lt;td&gt;String or Array&lt;/td&gt;
  &lt;td&gt;A directory or an array of directories for the application&#39;s views. If an array, the views are looked up in the order they occur in the array.&lt;/td&gt;</code></pre>
            <td>
              <code>process.cwd() + '/views'</code>
            </td>
          </tr>
          <tr>
            <td>
              <code>view cache</code>
            </td>
            <pre><code>&lt;td&gt;Boolean&lt;/td&gt;
  &lt;td&gt;&lt;p&gt;Enables view template compilation caching.&lt;/p&gt;
  &lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt;: Sub-apps will not inherit the value of this setting in production (when `NODE_ENV` is &quot;production&quot;).&lt;/p&gt;
  &lt;/td&gt;</code></pre>
            <td><code>true</code> in production, otherwise undefined.</td>
          </tr>
          <tr>
            <td>
              <code>view engine</code>
            </td>
            <pre><code>&lt;td&gt;String&lt;/td&gt;
  &lt;td&gt;The default engine extension to use when omitted.
    &lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt;: Sub-apps will inherit the value of this setting.&lt;/p&gt;
  &lt;/td&gt;
  &lt;td&gt;N/A (undefined)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
            <td>
              <code>x-powered-by</code>
            </td>
            <pre><code>&lt;td&gt;Boolean&lt;/td&gt;
  &lt;td&gt;Enables the &quot;X-Powered-By: Express&quot; HTTP header.&lt;/td&gt;</code></pre>
            <td>
              <code>true</code>
            </td>
          </tr>
        </tbody>
      </table>
      <h5 id="trust.proxy.options.table">
        Options for <code>trust proxy</code> setting
      </h5>
      <p>
        Read <a href="/guide/behind-proxies.html">Express behind proxies</a> for
        more information.
      </p>
      <table class="doctable" border="1">
        <thead>
          <tr>
            <th>Type</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Boolean</td>
            <td>
              <p>
                If <code>true</code>, the client’s IP address is understood as
                the left-most entry in the <code>X-Forwarded-*</code> header.
              </p>
              If <code>false</code>, the app is understood as directly facing
              the Internet and the client’s IP address is derived from
              <code>req.connection.remoteAddress</code>. This is the default
              setting.
            </td>
          </tr>
          <tr>
            <td>
              String<br />String containing comma-separated values<br />Array of
              strings
            </td>
            <td>
              <p>
                An IP address, subnet, or an array of IP addresses, and subnets
                to trust. Pre-configured subnet names are:
              </p>
              <ul>
                <li>
                  loopback - <code>127.0.0.1/8</code>, <code>::1/128</code>
                  <ul>
                    <li>
                      linklocal - <code>169.254.0.0/16</code>,
                      <code>fe80::/10</code>
                    </li>
                    <li>
                      uniquelocal - <code>10.0.0.0/8</code>,
                      <code>172.16.0.0/12</code>, <code>192.168.0.0/16</code>,
                      <code>fc00::/7</code>
                    </li>
                  </ul>
                  Set IP addresses in any of the following ways:
                </li>
              </ul>
              <p>Specify a single subnet:</p>
              <div class="sourceCode" id="cb16">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="st">&#39;loopback&#39;</span>)</a></code></pre>
              </div>
              <p>Specify a subnet and an address:</p>
              <div class="sourceCode" id="cb17">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="st">&#39;loopback, 123.123.123.123&#39;</span>)</a></code></pre>
              </div>
              <p>Specify multiple subnets as CSV:</p>
              <div class="sourceCode" id="cb18">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="st">&#39;loopback, linklocal, uniquelocal&#39;</span>)</a></code></pre>
              </div>
              <p>Specify multiple subnets as an array:</p>
              <div class="sourceCode" id="cb19">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> [<span class="st">&#39;loopback&#39;</span><span class="op">,</span> <span class="st">&#39;linklocal&#39;</span><span class="op">,</span> <span class="st">&#39;uniquelocal&#39;</span>])</a></code></pre>
              </div>
              When specified, the IP addresses or the subnets are excluded from
              the address determination process, and the untrusted IP address
              nearest to the application server is determined as the client’s IP
              address.
            </td>
          </tr>
          <tr>
            <td>Number</td>
            <td>
              Trust the <i>n</i><sup>th</sup> hop from the front-facing proxy
              server as the client.
            </td>
          </tr>
          <tr>
            <td>Function</td>
            <td markdown="1">
              <p>
                Custom trust implementation. Use this only if you know what you
                are doing.
              </p>
              <div class="sourceCode" id="cb20">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;trust proxy&#39;</span><span class="op">,</span> <span class="kw">function</span> (ip) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="cf">if</span> (ip <span class="op">===</span> <span class="st">&#39;127.0.0.1&#39;</span> <span class="op">||</span> ip <span class="op">===</span> <span class="st">&#39;123.123.123.123&#39;</span>) <span class="cf">return</span> <span class="kw">true</span> <span class="co">// trusted IPs</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="cf">else</span> <span class="cf">return</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="op">}</span>)</a></code></pre>
              </div>
            </td>
            <pre><code>&lt;/tr&gt;
&lt;/tbody&gt;</code></pre>
          </tr>
        </tbody>
      </table>

      <h5 id="etag.options.table">Options for <code>etag</code> setting</h5>
      <p>
        <strong>NOTE</strong>: These settings apply only to dynamic files, not
        static files. The
        <a href="#express.static">express.static</a> middleware ignores these
        settings.
      </p>
      <p>
        The ETag functionality is implemented using the
        <a href="https://www.npmjs.org/package/etag">etag</a> package. For more
        information, see its documentation.
      </p>
      <table class="doctable" border="1">
        <thead>
          <tr>
            <th>Type</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Boolean</td>
            <td>
              <code>true</code> enables weak ETag. This is the default
              setting.<br />
              <code>false</code> disables ETag altogether.
            </td>
          </tr>
          <tr>
            <td>String</td>
            <td>
              If “strong”, enables strong ETag.<br />
              If “weak”, enables weak ETag.
            </td>
          </tr>
          <tr>
            <td>Function</td>
            <td>
              <p>
                Custom ETag function implementation. Use this only if you know
                what you are doing.
              </p>
              <div class="sourceCode" id="cb22">
                <pre
                  class="sourceCode js"
                ><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="va">app</span>.<span class="at">set</span>(<span class="st">&#39;etag&#39;</span><span class="op">,</span> <span class="kw">function</span> (body<span class="op">,</span> encoding) <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="cf">return</span> <span class="at">generateHash</span>(body<span class="op">,</span> encoding) <span class="co">// consider the function is defined</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="op">}</span>)</a></code></pre>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
