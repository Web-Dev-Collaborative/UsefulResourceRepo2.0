<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="azure-storage-blobs-client-library-for-.net">Azure Storage Blobs client library for .NET</h1>
<blockquote>
<p>Server Version: 2019-07-07 and 2019-02-02</p>
</blockquote>
<p>Azure Blob storage is Microsoft’s object storage solution for the cloud. Blob storage is optimized for storing massive amounts of unstructured data. Unstructured data is data that does not adhere to a particular data model or definition, such as text or binary data.</p>
<p><a href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/storage/Azure.Storage.Blobs/src">Source code</a> | <a href="https://www.nuget.org/packages/Azure.Storage.Blobs/">Package (NuGet)</a> | <a href="https://docs.microsoft.com/dotnet/api/azure.storage.blobs">API reference documentation</a> | <a href="https://docs.microsoft.com/rest/api/storageservices/blob-service-rest-api">REST API documentation</a> | <a href="https://docs.microsoft.com/azure/storage/blobs/storage-blobs-overview">Product documentation</a></p>
<h2 id="getting-started">Getting started</h2>
<h3 id="install-the-package">Install the package</h3>
<p>Install the Azure Storage Blobs client library for .NET with <a href="https://www.nuget.org/">NuGet</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb1-1" title="1">dotnet add package Azure.<span class="fu">Storage</span>.<span class="fu">Blobs</span></a></code></pre></div>
<h3 id="prerequisites">Prerequisites</h3>
<p>You need an <a href="https://azure.microsoft.com/free/">Azure subscription</a> and a <a href="https://docs.microsoft.com/azure/storage/common/storage-account-overview">Storage Account</a> to use this package.</p>
<p>To create a new Storage Account, you can use the <a href="https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal">Azure Portal</a>, <a href="https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-powershell">Azure PowerShell</a>, or the <a href="https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-cli">Azure CLI</a>. Here’s an example using the Azure CLI:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb2-1" title="1">az storage account create --name MyStorageAccount --resource-group MyResourceGroup --location westus --sku Standard_LRS</a></code></pre></div>
<h2 id="key-concepts">Key concepts</h2>
<p>Blob storage is designed for:</p>
<ul>
<li>Serving images or documents directly to a browser.</li>
<li>Storing files for distributed access.</li>
<li>Streaming video and audio.</li>
<li>Writing to log files.</li>
<li>Storing data for backup and restore, disaster recovery, and archiving.</li>
<li>Storing data for analysis by an on-premises or Azure-hosted service.</li>
</ul>
<p>Blob storage offers three types of resources:</p>
<ul>
<li>The <em>storage account</em> used via <code>BlobServiceClient</code></li>
<li>A <em>container</em> in the storage account used via <code>BlobContainerClient</code></li>
<li>A <em>blob</em> in a container used via <code>BlobClient</code></li>
</ul>
<p>Learn more about options for authentication <em>(including Connection Strings, Shared Key, Shared Key Signatures, Active Directory, and anonymous public access)</em> <a href="samples/Sample02_Auth.cs">in our samples.</a></p>
<h2 id="examples">Examples</h2>
<h3 id="uploading-a-blob">Uploading a blob</h3>
<p>```C# Snippet:SampleSnippetsBlob_Upload // Get a connection string to our Azure Storage account. You can // obtain your connection string from the Azure Portal (click // Access Keys under Settings in the Portal Storage account blade) // or using the Azure CLI with: // // az storage account show-connection-string –name <account_name> –resource-group <resource_group> // // And you can provide the connection string to your application // using an environment variable.</p>
<p>string connectionString = “<connection_string>”; string containerName = “sample-container”; string blobName = “sample-blob”; string filePath = “sample-file”;</p>
<p>// Get a reference to a container named “sample-container” and then create it BlobContainerClient container = new BlobContainerClient(connectionString, containerName); container.Create();</p>
<p>// Get a reference to a blob named “sample-file” in a container named “sample-container” BlobClient blob = container.GetBlobClient(blobName);</p>
<p>// Upload local file blob.Upload(filePath); ```</p>
<h3 id="downloading-a-blob">Downloading a blob</h3>
<p>```C# Snippet:SampleSnippetsBlob_Download // Get a temporary path on disk where we can download the file string downloadPath = “hello.jpg”;</p>
<p>// Download the public blob at https://aka.ms/bloburl new BlobClient(new Uri(“https://aka.ms/bloburl”)).DownloadTo(downloadPath); ```</p>
<h3 id="enumerating-blobs">Enumerating blobs</h3>
<p>```C# Snippet:SampleSnippetsBlob_List // Get a connection string to our Azure Storage account. string connectionString = “<connection_string>”; string containerName = “sample-container”; string filePath = “hello.jpg”;</p>
<p>// Get a reference to a container named “sample-container” and then create it BlobContainerClient container = new BlobContainerClient(connectionString, containerName); container.Create();</p>
<p>// Upload a few blobs so we have something to list container.UploadBlob(“first”, File.OpenRead(filePath)); container.UploadBlob(“second”, File.OpenRead(filePath)); container.UploadBlob(“third”, File.OpenRead(filePath));</p>
<p>// Print out all the blob names foreach (BlobItem blob in container.GetBlobs()) { Console.WriteLine(blob.Name); } ```</p>
<h3 id="async-apis">Async APIs</h3>
<p>We fully support both synchronous and asynchronous APIs. ```C# Snippet:SampleSnippetsBlob_Async // Get a temporary path on disk where we can download the file string downloadPath = “hello.jpg”;</p>
<p>// Download the public blob at https://aka.ms/bloburl await new BlobClient(new Uri(“https://aka.ms/bloburl”)).DownloadToAsync(downloadPath); ```</p>
<h3 id="authenticating-with-azure.identity">Authenticating with Azure.Identity</h3>
<p>The <a href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/identity/Azure.Identity/README.md">Azure Identity library</a> provides easy Azure Active Directory support for authentication.</p>
<p><code>C# Snippet:SampleSnippetsBlob_Auth // Create a BlobServiceClient that will authenticate through Active Directory Uri accountUri = new Uri("https://MYSTORAGEACCOUNT.blob.core.windows.net/"); BlobServiceClient client = new BlobServiceClient(accountUri, new DefaultAzureCredential());</code></p>
<p>Learn more about enabling Azure Active Directory for authentication with Azure Storage in <a href="https://docs.microsoft.com/azure/storage/common/storage-auth-aad">our documentation</a> and <a href="#next-steps">our samples</a>.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>All Blob service operations will throw a <a href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/core/Azure.Core/src/RequestFailedException.cs">RequestFailedException</a> on failure with helpful <a href="https://docs.microsoft.com/rest/api/storageservices/blob-service-error-codes"><code>ErrorCode</code>s</a>. Many of these errors are recoverable.</p>
<p>```C# Snippet:SampleSnippetsBlob_Troubleshooting // Get a connection string to our Azure Storage account. string connectionString = “<connection_string>”; string containerName = “sample-container”;</p>
<p>// Try to delete a container named “sample-container” and avoid any potential race conditions // that might arise by checking if the container is already deleted or is in the process // of being deleted. BlobContainerClient container = new BlobContainerClient(connectionString, containerName);</p>
<p>try { container.Delete(); } catch (RequestFailedException ex) when (ex.ErrorCode == BlobErrorCode.ContainerBeingDeleted || ex.ErrorCode == BlobErrorCode.ContainerNotFound)</p>
<p>{ // Ignore any errors if the container being deleted or if it has already been deleted } ```</p>
<h2 id="next-steps">Next steps</h2>
<p>Get started with our <a href="samples/">Blob samples</a>:</p>
<ol type="1">
<li><a href="samples/Sample01a_HelloWorld.cs">Hello World</a>: Upload, download, and list blobs (or <a href="samples/Sample01b_HelloWorldAsync.cs">asynchronously</a>)</li>
<li><a href="samples/Sample02_Auth.cs">Auth</a>: Authenticate with connection strings, public access, shared keys, shared access signatures, and Azure Active Directory.</li>
</ol>
<h2 id="contributing">Contributing</h2>
<p>See the <a href="../CONTRIBUTING.md">Storage CONTRIBUTING.md</a> for details on building, testing, and contributing to this library.</p>
<p>This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit <a href="https://cla.microsoft.com">cla.microsoft.com</a>.</p>
<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>. For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>
<figure>
<img src="https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-net%2Fsdk%2Fstorage%2FAzure.Storage.Blobs%2FREADME.png" alt="Impressions" /><figcaption>Impressions</figcaption>
</figure>
<!-- LINKS -->
</body>
</html>
