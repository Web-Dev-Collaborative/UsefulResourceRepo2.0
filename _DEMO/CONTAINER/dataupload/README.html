<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="data-upload-to-blob">Data Upload to Blob</h1>
    <p><strong>Produced by Dave Lusty</strong></p>
    <h2 id="introduction">Introduction</h2>
    <p>
      This demo shows how to use HTML and Javascript to upload files to Azure.
      The site is hosted in a storage account to reduce costs since it requires
      no server side components. SAS keys can be used to control access via the
      URI. The upload happens through the storage SDK for Javascript (browser
      version) and so uses the API directly. For this reason there are no file
      size limits enforced from a server since there is “no server”. The video
      is <a href="https://youtu.be/3khzPbmHbAQ">here</a>
    </p>
    <p>
      The site looks like the below image but has a basic CSS file included for
      you to modify. I’m not a web designer so it’s pretty basic I’m afraid, but
      it is functional! (there’s now a Website2 directory with a slightly nicer
      interface)
    </p>
    <figure>
      <img src="images/website.png" alt="website.png" />
      <figcaption>website.png</figcaption>
    </figure>
    <p>
      Special thanks on this demo goes to Joseph Zimmerman who posted
      <a
        href="https://www.smashingmagazine.com/2018/01/drag-drop-file-uploader-vanilla-js/"
        >this excellent article</a
      >. I especially like this kind of post because it doesn’t lazily use
      libraries and obfuscate the technology. HTML and Javascript are all you
      need here besides the storage SDK (which is much more complex under the
      hood!).
    </p>
    <h2 id="demo">Demo</h2>
    <p>
      For this demo, you’ll need a storage account and the code from this
      repository. Once the storage account is deployed you’ll need to set a few
      things up to get up and running.
    </p>
    <h3 id="static-website-on-blob">Static Website on Blob</h3>
    <p>
      First, you’ll want to set up using your storage account as a static
      website. This allows you to browse it without a costly web server. To do
      this, click static website in the settings menu and then type index.html
      in the index document name and click save. This will allow you to use the
      generated url without the /index.html part on the end. It’s not entirely
      necessary since here we’ll be supplying whole urls to people for security
      purposes.
    </p>
    <figure>
      <img src="images/staticWebsite.png" alt="staticWebsite.png" />
      <figcaption>staticWebsite.png</figcaption>
    </figure>
    <p>
      Next, upload the files from the repository into the root of the new $web
      container that has been created for your site. You’ll need to tell it to
      upload to a folder for the css, js and libs folders.
      <strong
        >Please note that you’ll need to download and extract the files from
        <a href="https://aka.ms/downloadazurestoragejsblob">here</a> in the libs
        folder since I cannot republish them</strong
      >. Once these are uploaded, create another container and call it
      “uploads”. This container should be private since we don’t want to give
      public access to the uploaded files.
    </p>
    <h3 id="set-up-cors">Set up CORS</h3>
    <p>
      In order for the scripting to work, you need to enable CORS on the storage
      account. Click on CORS under the settings menu and set up a rule. Your
      origin will be the full uri provided under the static website settings
      above. This includes the https:// part. Allow only PUT and then allow all
      headers and set the max age to something large. For production purposes
      you should carefully consider these settings, but the above are relatively
      locked down and we can be reasonably sure nothing odd will be hosted in
      your storage account’s domain.
    </p>
    <figure>
      <img src="images/cors.png" alt="set up CORS" />
      <figcaption>set up CORS</figcaption>
    </figure>
    <h3 id="generate-the-sas-key">Generate the SAS Key</h3>
    <p>
      Next, click on Shared access signature on the settings menu to generate
      your SAS key. In future demos we’ll do this programatically in order to
      give time limited links to people, but for now we’ll generate it manually.
      Select only Blob under allowed services, and then Object for resource
      types. Give the key write, add and create permissions and set a start and
      end time. Choose HTTPS only and click generate SAS and connection string.
    </p>
    <figure>
      <img src="images/sasKey.png" alt="sasKey.png" />
      <figcaption>sasKey.png</figcaption>
    </figure>
    <p>Copy the resulting SAS token from the “SAS Token” box.</p>
    <h3 id="website">website</h3>
    <p>
      Once you’ve completed the above steps, create your link as per this
      formula:
    </p>
    <p>
      <code
        >https://&lt;url&gt;/index.html&lt;SASKey&gt;&amp;accountName=&lt;accountname&gt;&amp;containerName=&lt;containername&gt;</code
      >
    </p>
    <p>
      Please note that there is no extra ? before the SAS key since it includes
      one already. The URL comes from your static website settings and the
      accountname is your storage account name. Container name is uploads and is
      the container you created above. Next, browse to the URI you created and
      you should see a site like the below:
    </p>
    <figure>
      <img src="images/website.png" alt="website.png" />
      <figcaption>website.png</figcaption>
    </figure>
    <p>
      You can either click the button to browse for files, or you can drag them
      into the dashed box. Either way they will upload to your storage account.
    </p>
    <h2 id="code">Code</h2>
    <h3 id="html">HTML</h3>
    <p>
      The HTML file is fairly simple and just contains some div elements to
      house the form and drop zone.
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode html"
      ><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">        <span class="kw">&lt;title&gt;</span>BlobDrop<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">        <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="ot"> href=</span><span class="st">&quot;css/site.css&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">        <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;outerContainer&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9">            <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;top&quot;</span><span class="kw">&gt;&lt;span</span><span class="ot"> id=</span><span class="st">&quot;titleBar&quot;</span><span class="kw">&gt;</span>BlobDrop<span class="kw">&lt;/span&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10">            <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;bottom&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-11" title="11">                <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;top-left&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-12" title="12">                    <span class="kw">&lt;form&gt;</span></a>
<a class="sourceLine" id="cb1-13" title="13">                        <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;file&quot;</span><span class="ot"> id=</span><span class="st">&quot;fileElem&quot;</span><span class="ot"> multiple accept=</span><span class="st">&quot;image/*&quot;</span><span class="ot"> onchange=</span><span class="st">&quot;handleFiles(this.files)&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-14" title="14">                        <span class="kw">&lt;label</span><span class="ot"> class=</span><span class="st">&quot;browseButton&quot;</span><span class="ot"> for=</span><span class="st">&quot;fileElem&quot;</span><span class="kw">&gt;&lt;span</span><span class="ot"> class=</span><span class="st">&quot;browseButtonText&quot;</span><span class="kw">&gt;</span>Click to select some files<span class="kw">&lt;/span&gt;&lt;/label&gt;</span></a>
<a class="sourceLine" id="cb1-15" title="15">                    <span class="kw">&lt;/form&gt;</span></a>
<a class="sourceLine" id="cb1-16" title="16">                <span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-17" title="17">                <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;top-right&quot;</span><span class="kw">&gt;&lt;span</span><span class="ot"> class=</span><span class="st">&quot;dropZoneText&quot;</span><span class="kw">&gt;</span>Drop Files Here<span class="kw">&lt;/span&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-18" title="18">                <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;bottom-left&quot;</span><span class="kw">&gt;&lt;span</span><span class="ot"> class=</span><span class="st">&quot;statusBox&quot;</span><span class="ot"> id=</span><span class="st">&quot;statusBox&quot;</span><span class="kw">&gt;&lt;/span&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-19" title="19">                <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;bottom-right&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-20" title="20">            <span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-21" title="21">        <span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-22" title="22">        </a>
<a class="sourceLine" id="cb1-23" title="23">        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;libs/azure-storage-blob.js&quot;</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb1-24" title="24">        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;js/drop.js&quot;</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb1-25" title="25">    <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="kw">&lt;/html&gt;</span></a></code></pre>
    </div>
    <h3 id="css">CSS</h3>
    <p>
      Most of the CSS is for presentation but includes functional things like
      highlights for the button and text responses.
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode css"
      ><code class="sourceCode css"><a class="sourceLine" id="cb2-1" title="1"><span class="pp">#outerContainer</span> {</a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">top</span>: <span class="dv">5</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">left</span>: <span class="dv">5</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="kw">margin</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6">    border 3px solid black;</a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="kw">border-radius</span>: <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8">    <span class="kw">width</span>: <span class="dv">90</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="kw">height</span>: <span class="dv">90</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="kw">background-color</span>: <span class="cn">mediumblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11">}</a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="pp">#top</span> {</a>
<a class="sourceLine" id="cb2-14" title="14">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-15" title="15">    <span class="kw">top</span>: <span class="dv">0</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="kw">left</span>: <span class="dv">0</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-17" title="17">    border 2px solid black;</a>
<a class="sourceLine" id="cb2-18" title="18">    <span class="kw">border-radius</span>: <span class="dv">1</span><span class="dt">vw</span> <span class="dv">1</span><span class="dt">vw</span> <span class="dv">0</span><span class="dt">vw</span> <span class="dv">0</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-19" title="19">    <span class="kw">width</span>: <span class="dv">90</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-20" title="20">    <span class="kw">height</span>: <span class="dv">10</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-21" title="21">    <span class="kw">background-color</span>: <span class="cn">grey</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-22" title="22">}</a>
<a class="sourceLine" id="cb2-23" title="23"></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="pp">#titleBar</span> {</a>
<a class="sourceLine" id="cb2-25" title="25">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-26" title="26">    <span class="kw">bottom</span>: <span class="dv">2</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-27" title="27">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-28" title="28">    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-29" title="29">    <span class="kw">padding-right</span>: <span class="dv">5</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-30" title="30">    <span class="kw">font-size</span>: <span class="dv">xx-large</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-31" title="31">    <span class="kw">font-family</span>: <span class="st">&#39;Segoe UI&#39;</span><span class="op">,</span> Tahoma<span class="op">,</span> Geneva<span class="op">,</span> Verdana<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-32" title="32">    <span class="kw">font-weight</span>: <span class="dv">bolder</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-33" title="33">    <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-34" title="34">}</a>
<a class="sourceLine" id="cb2-35" title="35"></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="pp">#bottom</span> {</a>
<a class="sourceLine" id="cb2-37" title="37">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-38" title="38">    <span class="kw">top</span>: <span class="dv">10</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-39" title="39">    <span class="kw">left</span>: <span class="dv">0</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-40" title="40">    <span class="kw">width</span>: <span class="dv">90</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-41" title="41">    <span class="kw">height</span>: <span class="dv">80</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-42" title="42">    border 2px solid black;</a>
<a class="sourceLine" id="cb2-43" title="43">    <span class="kw">border-radius</span>: <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">1</span><span class="dt">vw</span> <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-44" title="44">    <span class="kw">background-color</span>: <span class="cn">lightgrey</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-45" title="45">}</a>
<a class="sourceLine" id="cb2-46" title="46"></a>
<a class="sourceLine" id="cb2-47" title="47"><span class="pp">#top-left</span> {</a>
<a class="sourceLine" id="cb2-48" title="48">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-49" title="49">    <span class="kw">top</span>: <span class="dv">3</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-50" title="50">    <span class="kw">left</span>: <span class="dv">2</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-51" title="51">    <span class="kw">background-color</span>: <span class="cn">steelblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-52" title="52">    <span class="kw">width</span>: <span class="dv">42</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-53" title="53">    <span class="kw">height</span>: <span class="dv">35.5</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-54" title="54"></a>
<a class="sourceLine" id="cb2-55" title="55">}</a>
<a class="sourceLine" id="cb2-56" title="56"></a>
<a class="sourceLine" id="cb2-57" title="57"><span class="pp">#fileElem</span> {</a>
<a class="sourceLine" id="cb2-58" title="58">    <span class="kw">display</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-59" title="59">}</a>
<a class="sourceLine" id="cb2-60" title="60"></a>
<a class="sourceLine" id="cb2-61" title="61"><span class="fu">.browseButton</span> {</a>
<a class="sourceLine" id="cb2-62" title="62">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-63" title="63">    <span class="kw">margin</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-64" title="64">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-65" title="65">    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-66" title="66">    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-67" title="67">}</a>
<a class="sourceLine" id="cb2-68" title="68"></a>
<a class="sourceLine" id="cb2-69" title="69"><span class="fu">.browseButton</span><span class="in">:hover</span> {</a>
<a class="sourceLine" id="cb2-70" title="70">    <span class="kw">background-color</span>: <span class="cn">#74A1C7</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-71" title="71">}</a>
<a class="sourceLine" id="cb2-72" title="72"></a>
<a class="sourceLine" id="cb2-73" title="73"><span class="fu">.browseButtonText</span> {</a>
<a class="sourceLine" id="cb2-74" title="74">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-75" title="75">    <span class="kw">top</span>: <span class="dv">49</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-76" title="76">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-77" title="77">    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-78" title="78">    <span class="kw">font-size</span>: <span class="dv">xx-large</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-79" title="79">    <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-80" title="80">    <span class="kw">font-family</span>: <span class="st">&#39;Segoe UI&#39;</span><span class="op">,</span> Tahoma<span class="op">,</span> Geneva<span class="op">,</span> Verdana<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-81" title="81">}</a>
<a class="sourceLine" id="cb2-82" title="82"></a>
<a class="sourceLine" id="cb2-83" title="83"><span class="pp">#top-right</span> {</a>
<a class="sourceLine" id="cb2-84" title="84">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-85" title="85">    <span class="kw">top</span>: <span class="dv">3</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-86" title="86">    <span class="kw">right</span>: <span class="dv">2</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-87" title="87">    <span class="kw">background-color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-88" title="88">    <span class="kw">border-radius</span>: <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-89" title="89">    <span class="kw">border</span>: <span class="dv">0.2</span><span class="dt">vw</span> <span class="dv">dashed</span> <span class="cn">grey</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-90" title="90">    <span class="kw">width</span>: <span class="dv">42</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-91" title="91">    <span class="kw">height</span>: <span class="dv">35.5</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-92" title="92">}</a>
<a class="sourceLine" id="cb2-93" title="93"></a>
<a class="sourceLine" id="cb2-94" title="94"><span class="fu">.dropZoneText</span> {</a>
<a class="sourceLine" id="cb2-95" title="95">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-96" title="96">    <span class="kw">top</span>: <span class="dv">49</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-97" title="97">    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-98" title="98">    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-99" title="99">    <span class="kw">font-size</span>: <span class="dv">xx-large</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-100" title="100">    <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-101" title="101">    <span class="kw">font-family</span>: <span class="st">&#39;Segoe UI&#39;</span><span class="op">,</span> Tahoma<span class="op">,</span> Geneva<span class="op">,</span> Verdana<span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-102" title="102">}</a>
<a class="sourceLine" id="cb2-103" title="103"></a>
<a class="sourceLine" id="cb2-104" title="104"><span class="pp">#bottom-left</span> {</a>
<a class="sourceLine" id="cb2-105" title="105">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-106" title="106">    <span class="kw">bottom</span>: <span class="dv">3</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-107" title="107">    <span class="kw">left</span>: <span class="dv">2</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-108" title="108">    <span class="kw">background-color</span>: <span class="cn">steelblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-109" title="109">    <span class="kw">width</span>: <span class="dv">42</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-110" title="110">    <span class="kw">height</span>: <span class="dv">35.5</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-111" title="111"></a>
<a class="sourceLine" id="cb2-112" title="112">}</a>
<a class="sourceLine" id="cb2-113" title="113"></a>
<a class="sourceLine" id="cb2-114" title="114"><span class="pp">#statusBox</span> {</a>
<a class="sourceLine" id="cb2-115" title="115">    <span class="kw">background-color</span>: <span class="cn">steelblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-116" title="116">    <span class="kw">text-align</span>: <span class="dv">left</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-117" title="117">}</a>
<a class="sourceLine" id="cb2-118" title="118"></a>
<a class="sourceLine" id="cb2-119" title="119"><span class="pp">#statusBox</span><span class="fu">.highlight</span> {</a>
<a class="sourceLine" id="cb2-120" title="120">    <span class="kw">background-color</span>: <span class="cn">lightgreen</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-121" title="121">}</a>
<a class="sourceLine" id="cb2-122" title="122"></a>
<a class="sourceLine" id="cb2-123" title="123"><span class="pp">#bottom-right</span> {</a>
<a class="sourceLine" id="cb2-124" title="124">    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-125" title="125">    <span class="kw">bottom</span>: <span class="dv">3</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-126" title="126">    <span class="kw">right</span>: <span class="dv">2</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-127" title="127">    <span class="kw">background-color</span>: <span class="cn">steelblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-128" title="128">    <span class="kw">width</span>: <span class="dv">42</span><span class="dt">vw</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-129" title="129">    <span class="kw">height</span>: <span class="dv">35.5</span><span class="dt">vh</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-130" title="130"></a>
<a class="sourceLine" id="cb2-131" title="131">}</a>
<a class="sourceLine" id="cb2-132" title="132"></a>
<a class="sourceLine" id="cb2-133" title="133">body {</a>
<a class="sourceLine" id="cb2-134" title="134">    <span class="kw">background-color</span>: <span class="cn">#323237</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-135" title="135">}</a></code></pre>
    </div>
    <h3 id="javascript">Javascript</h3>
    <p>
      The Javascript mainly consists of listeners to make the page work with
      drag and drop. Both the form and the drop action call a function to submit
      files to Blob. For this, we need to connect to the storage account
      specified in the URI with the SAS token and then push the files up one at
      a time.
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">//get the drop zone</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">let</span> dropZone <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;top-right&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">//set up the listeners to prevent propogation</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="op">;</span>[<span class="st">&#39;dragenter&#39;</span><span class="op">,</span> <span class="st">&#39;dragover&#39;</span><span class="op">,</span> <span class="st">&#39;dragleave&#39;</span><span class="op">,</span> <span class="st">&#39;drop&#39;</span>].<span class="at">forEach</span>(eventName <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="va">dropZone</span>.<span class="at">addEventListener</span>(eventName<span class="op">,</span> preventDefaults<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-9" title="9">  </a>
<a class="sourceLine" id="cb3-10" title="10"><span class="kw">function</span> <span class="at">preventDefaults</span> (e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="va">e</span>.<span class="at">stopPropagation</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-14" title="14"></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">//set up listeners for the drag and feedback</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="op">;</span>[<span class="st">&#39;dragenter&#39;</span><span class="op">,</span> <span class="st">&#39;dragover&#39;</span>].<span class="at">forEach</span>(eventName <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="va">dropZone</span>.<span class="at">addEventListener</span>(eventName<span class="op">,</span> highlight<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-19" title="19">  </a>
<a class="sourceLine" id="cb3-20" title="20"><span class="op">;</span>[<span class="st">&#39;dragleave&#39;</span><span class="op">,</span> <span class="st">&#39;drop&#39;</span>].<span class="at">forEach</span>(eventName <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-21" title="21">    <span class="va">dropZone</span>.<span class="at">addEventListener</span>(eventName<span class="op">,</span> unhighlight<span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb3-23" title="23">  </a>
<a class="sourceLine" id="cb3-24" title="24"><span class="kw">function</span> <span class="at">highlight</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-25" title="25">    <span class="va">dropZone</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;highlight&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-27" title="27">  </a>
<a class="sourceLine" id="cb3-28" title="28"><span class="kw">function</span> <span class="at">unhighlight</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-29" title="29">    <span class="va">dropZone</span>.<span class="va">classList</span>.<span class="at">remove</span>(<span class="st">&#39;highlight&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-31" title="31"></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">//set up the drop handler</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="va">dropZone</span>.<span class="at">addEventListener</span>(<span class="st">&#39;drop&#39;</span><span class="op">,</span> handleDrop<span class="op">,</span> <span class="kw">false</span>)</a>
<a class="sourceLine" id="cb3-34" title="34"></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="kw">function</span> <span class="at">handleDrop</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-36" title="36">    <span class="kw">let</span> dt <span class="op">=</span> <span class="va">e</span>.<span class="at">dataTransfer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-37" title="37">    <span class="kw">let</span> files <span class="op">=</span> <span class="va">dt</span>.<span class="at">files</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-38" title="38">    </a>
<a class="sourceLine" id="cb3-39" title="39">    <span class="at">handleFiles</span>(files)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-41" title="41"></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">//the file handler</span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="kw">function</span> <span class="at">handleFiles</span>(files) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-44" title="44">    ([...<span class="at">files</span>]).<span class="at">forEach</span>(uploadFile)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-45" title="45">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-46" title="46"></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="kw">function</span> <span class="at">reportStatus</span>(message)<span class="op">{</span></a>
<a class="sourceLine" id="cb3-48" title="48">    <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;statusBox&quot;</span>).<span class="at">innerHTML</span> <span class="op">+=</span> message <span class="op">+</span> <span class="st">&quot;&lt;br /&gt;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-49" title="49">    <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;statusBox&quot;</span>).<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;highlight&#39;</span>)</a>
<a class="sourceLine" id="cb3-50" title="50"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-51" title="51"></a>
<a class="sourceLine" id="cb3-52" title="52"><span class="kw">let</span> url <span class="op">=</span> <span class="kw">new</span> <span class="at">URL</span>(<span class="va">document</span>.<span class="va">location</span>.<span class="at">href</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-53" title="53"><span class="kw">let</span> searchParams <span class="op">=</span> <span class="kw">new</span> <span class="at">URLSearchParams</span>(<span class="va">url</span>.<span class="at">search</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-54" title="54"></a>
<a class="sourceLine" id="cb3-55" title="55"><span class="co">//get account info</span></a>
<a class="sourceLine" id="cb3-56" title="56"><span class="kw">const</span> accountName <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;accountName&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-57" title="57"><span class="kw">const</span> containerName <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;containerName&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-58" title="58"></a>
<a class="sourceLine" id="cb3-59" title="59"><span class="co">//regenerate the valid SAS key</span></a>
<a class="sourceLine" id="cb3-60" title="60"><span class="kw">const</span> sv <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;sv&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-61" title="61"><span class="kw">var</span> sasString <span class="op">=</span> <span class="st">&quot;?&quot;</span><span class="op">;</span><span class="co">//reinsert the ?</span></a>
<a class="sourceLine" id="cb3-62" title="62">sasString <span class="op">+=</span> <span class="st">&quot;sv=&quot;</span> <span class="op">+</span> sv<span class="op">;</span></a>
<a class="sourceLine" id="cb3-63" title="63"><span class="kw">const</span> ss <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;ss&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-64" title="64">sasString <span class="op">+=</span> <span class="st">&quot;&amp;ss=&quot;</span> <span class="op">+</span> ss<span class="op">;</span></a>
<a class="sourceLine" id="cb3-65" title="65"><span class="kw">const</span> srt <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;srt&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-66" title="66">sasString <span class="op">+=</span> <span class="st">&quot;&amp;srt=&quot;</span> <span class="op">+</span> srt<span class="op">;</span></a>
<a class="sourceLine" id="cb3-67" title="67"><span class="kw">const</span> sp <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;sp&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-68" title="68">sasString <span class="op">+=</span> <span class="st">&quot;&amp;sp=&quot;</span> <span class="op">+</span> sp<span class="op">;</span></a>
<a class="sourceLine" id="cb3-69" title="69"><span class="kw">const</span> se <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;se&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-70" title="70">sasString <span class="op">+=</span> <span class="st">&quot;&amp;se=&quot;</span> <span class="op">+</span> se<span class="op">;</span></a>
<a class="sourceLine" id="cb3-71" title="71"><span class="kw">const</span> st <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;st&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-72" title="72">sasString <span class="op">+=</span> <span class="st">&quot;&amp;st=&quot;</span> <span class="op">+</span> st<span class="op">;</span></a>
<a class="sourceLine" id="cb3-73" title="73"><span class="kw">const</span> spr <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;spr&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-74" title="74">sasString <span class="op">+=</span> <span class="st">&quot;&amp;spr=&quot;</span> <span class="op">+</span> spr<span class="op">;</span></a>
<a class="sourceLine" id="cb3-75" title="75"><span class="kw">const</span> sig <span class="op">=</span> <span class="va">searchParams</span>.<span class="at">get</span>(<span class="st">&quot;sig&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-76" title="76">sasString <span class="op">+=</span> <span class="st">&quot;&amp;sig=&quot;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(sig)<span class="op">;</span><span class="co">//must be encoded</span></a>
<a class="sourceLine" id="cb3-77" title="77"></a>
<a class="sourceLine" id="cb3-78" title="78"><span class="kw">const</span> containerURL <span class="op">=</span> <span class="kw">new</span> <span class="va">azblob</span>.<span class="at">ContainerURL</span>(</a>
<a class="sourceLine" id="cb3-79" title="79">    <span class="vs">`https://</span><span class="sc">${</span>accountName<span class="sc">}</span><span class="vs">.blob.core.windows.net/</span><span class="sc">${</span>containerName<span class="sc">}</span><span class="vs">?</span><span class="sc">${</span>sasString<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-80" title="80">    <span class="va">azblob</span>.<span class="va">StorageURL</span>.<span class="at">newPipeline</span>(<span class="kw">new</span> <span class="va">azblob</span>.<span class="at">AnonymousCredential</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-81" title="81"></a>
<a class="sourceLine" id="cb3-82" title="82"><span class="kw">async</span> <span class="kw">function</span> <span class="at">uploadFile</span>(file)<span class="op">{</span></a>
<a class="sourceLine" id="cb3-83" title="83">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-84" title="84">        <span class="at">reportStatus</span>(<span class="st">&quot;Uploading files...&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-85" title="85">        <span class="kw">const</span> promises <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb3-86" title="86">        <span class="kw">const</span> blockBlobURL <span class="op">=</span> <span class="va">azblob</span>.<span class="va">BlockBlobURL</span>.<span class="at">fromContainerURL</span>(containerURL<span class="op">,</span> <span class="va">file</span>.<span class="at">name</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-87" title="87">        <span class="va">promises</span>.<span class="at">push</span>(<span class="va">azblob</span>.<span class="at">uploadBrowserDataToBlockBlob</span>(</a>
<a class="sourceLine" id="cb3-88" title="88">            <span class="va">azblob</span>.<span class="va">Aborter</span>.<span class="at">none</span><span class="op">,</span> file<span class="op">,</span> blockBlobURL)</a>
<a class="sourceLine" id="cb3-89" title="89">            )<span class="op">;</span></a>
<a class="sourceLine" id="cb3-90" title="90">        <span class="cf">await</span> <span class="va">Promise</span>.<span class="at">all</span>(promises)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-91" title="91">        <span class="at">reportStatus</span>(<span class="va">file</span>.<span class="at">name</span> <span class="op">+</span> <span class="st">&quot;File Uploaded.&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-92" title="92">        <span class="at">listFiles</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-93" title="93">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-94" title="94">        <span class="at">reportStatus</span>(<span class="va">error</span>.<span class="va">body</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-95" title="95">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-96" title="96"><span class="op">}</span></a></code></pre>
    </div>
  </body>
</html>
