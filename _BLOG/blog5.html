<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>blog5</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <p>
      <a
        href="https://medium.com/@vithalreddy?source=post_page-----91b7bbd0d218--------------------------------"
        ><img
          src="https://miro.medium.com/fit/c/96/96/1*GlQSX_dAtVf7agV94PlmgA.jpeg"
          alt="VithalReddy"
      /></a>
    </p>
    <p>
      If you’re Developing your Rest API’s using Node.js or Express.js, Then
      You’re probably using MongoDB as Database for Storing Data and Probably
      with mongoose ODM for working with MongoDB Database.Now as you’re DB
      starts to grow and you have multiple collections and they are related to
      each other and soon, you need to work with <strong>array’s</strong> inside
      in <strong>MongoDB document</strong> and now you want to
      <strong>push</strong> and <strong>pop</strong> from that
      <strong>array</strong>, In this MongoDB How-To Tutorial, we are going to
      learn <strong>How to Push items into mongo Array</strong> with an example.
    </p>
    <p>
      Consider the following document, which is <strong>USER</strong> document,
      which has an <strong>array</strong> of <strong>Friends</strong>:
    </p>
    <p>
      {<br />
      “_id” : ObjectId(“5a0fa6f6e744c923ec159606”),<br />
      “updated_at” : ISODate(“2017-11-18T03:20:22.282Z”),<br />
      “created_at” : ISODate(“2017-11-18T03:20:22.282Z”),<br />
      “firstName” : “stackFame”,<br />
      “lastName” : “Media”,<br />
      “userName” : “stackFame”,<br />
      “email” : “stackFame@stackFame.com”,<br />
      “password” : “$2a<span class="math inline">10</span
      >Ru5TVFL889Y5RjDhycly.74c2tFXUEOn0rghzq6OiAu8oQNuqZwu”,<br />
      “status” : 1,<br />
      “language” : “en”,<br />
      “friends”:[<br />
      5a0fa6f6e744c923ec159606,<br />
      5a0fa6f6e744c923ec159606,<br />
      5a0fa6f6e744c923ec159606, ]<br />
      }
    </p>
    <p>
      Now, You want edit friends array, when you want to add or remove friend to
      friends array.First, we will push a friend into an array with the mongoose
      in nodejs app.
    </p>
    <p>
      // find by document id and update and push item in array<br />
      users.findByIdAndUpdate(userID,<br />
      {$push: {friends: friend}},<br />
      {safe: true, upsert: true},<br />
      function(err, doc) {<br />
      if(err){<br />
      console.log(err);<br />
      }else{<br />
      //do stuff<br />
      }<br />
      }<br />
      );
    </p>
    <h2 id="receive-inbound-emails-using-node.js-node-mailin">
      <a href="https://stackfame.com/receive-inbound-emails-node-js"
        >Receive Inbound emails using Node.js — Node-Mailin</a
      >
    </h2>
    <p>
      and you’ve successfully pushed item in a MongoDB document.Now we will
      learn how to pop or remove an item from MongoDB document array.
    </p>
    <p>
      // find by document id and update and pop or remove item in array<br />
      users.findByIdAndUpdate(userID,<br />
      {$pull: {friends: friend}},<br />
      {safe: true, upsert: true},<br />
      function(err, doc) {<br />
      if(err){<br />
      console.log(err);<br />
      }else{<br />
      //do stuff<br />
      }<br />
      }<br />
      );
    </p>
    <p>
      and you’re successfully poped or removed an item in a MongoDB document.
    </p>
    <p><strong>Conclusion</strong>:</p>
    <p>
      It’s very easy to handle data with mongoose and MongoDB.So that you’ve to
      spend less time with data handling in MongoDB, Focus on your business
      logic of Rest API’s.
    </p>
    <p>
      Article first appeared on:
      <a
        href="https://stackfame.com/push-pop-item-mongodb-array-mongoose-nodejs"
        >stackfame.com</a
      >
    </p>
  </body>
</html>
