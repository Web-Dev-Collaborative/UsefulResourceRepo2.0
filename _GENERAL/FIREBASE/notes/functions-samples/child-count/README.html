<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <h1 id="tracking-the-number-of-elements-in-a-list">
      Tracking the number of elements in a list
    </h1>
    <p>
      This template shows how to keep track of the number of elements in a
      Firebase Database list. For instance this can be useful to keep track of
      the number of “likes” or “followers” of something shared on a social
      platform.
    </p>
    <h2 id="functions-code">Functions Code</h2>
    <p>
      See file <a href="functions/index.js">functions/index.js</a> for the code.
    </p>
    <p>
      This is done by updating a <code>likes_count</code> property on the parent
      of the list node which is tracked.
    </p>
    <p>This counting is done in two cases:</p>
    <ol type="1">
      <li>
        When a like is added or deleted, the <code>likes_count</code> is
        incremented or decremented.
      </li>
      <li>
        When the <code>likes_count</code> is deleted, all likes are recounted.
      </li>
    </ol>
    <p>
      The dependencies are listed in
      <a href="functions/package.json">functions/package.json</a>.
    </p>
    <h2 id="sample-database-structure">Sample Database Structure</h2>
    <p>
      As an example we’ll be using the database structure shown below. It keeps
      tracks of the list of users who liked a post and the count of these likes:
    </p>
    <pre><code>/functions-project-12345
    /posts
        /key-123456
            likes_count: 32
            /likes
                user123456: true
                user456789: true
                user786245: true
                ...</code></pre>
  </body>
</html>
