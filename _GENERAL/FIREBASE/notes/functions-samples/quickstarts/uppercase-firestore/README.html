<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <h1 id="firebase-sdk-for-cloud-functions-quickstart---firestore">
      Firebase SDK for Cloud Functions Quickstart - Firestore
    </h1>
    <p>
      This quickstart demonstrates using the
      <strong>Firebase SDK for Cloud Functions</strong> with
      <strong>Firestore</strong>.
    </p>
    <h2 id="introduction">Introduction</h2>
    <p>This sample app does two things:</p>
    <ul>
      <li>
        Creates messages in Firestore using a simple HTTPS request which is
        handled by an HTTP function. Writing to Firestore is done using the
        Firebase Admin SDK.
      </li>
      <li>
        When a message gets added in Firestore, a function triggers and
        automatically makes these messages all uppercase.
      </li>
    </ul>
    <h2 id="set-up-the-sample">Set up the sample</h2>
    <p>
      Before you can test the functions locally or deploy to a Firebase project,
      you’ll need to run <code>npm install</code> in the
      <code>functions</code> directory.
    </p>
    <h2 id="run-locally-with-the-firebase-emulator-suite">
      Run locally with the Firebase Emulator suite
    </h2>
    <p>
      The
      <a href="https://firebase.google.com/docs/emulator-suite"
        >Firebase Local Emulator Suite</a
      >
      allows you to build and test apps on your local machine instead of
      deploying to a Firebase project.
    </p>
    <ol type="1">
      <li>
        Create a Firebase project in the
        <a href="https://console.firebase.google.com">Firebase Console</a> &gt;
        <em>Wondering why this step is needed?</em> Even though the emulator
        will run this &gt; sample on your local machine, it needs to interact
        with a Firebase project &gt; to retrieve some configuration values.
      </li>
      <li>
        <a href="https://firebase.google.com/docs/cli#setup_update_cli"
          >Set up or update the Firebase CLI</a
        >
      </li>
      <li>Run <code>firebase emulators:start</code></li>
      <li>
        Open the Emulator Suite UI
        <ol type="1">
          <li>
            Look in the output of the
            <code>firebase emulators:start</code> command for the URL of the
            Emulator Suite UI. It defaults to
            <a href="http://localhost:4000">localhost:4000</a>, but may be
            hosted on a different port on your machine.
          </li>
          <li>Enter that URL in your browser to open the UI.</li>
        </ol>
      </li>
      <li>
        Trigger the functions
        <ol type="1">
          <li>
            Look in the output of the
            <code>firebase emulators:start</code> command for the URL of the
            http function “addMessage”. It will look similar to:
            <code>http://localhost:5001/MY_PROJECT/us-central1/addMessage</code>
            <ol type="1">
              <li>
                <code>MY_PROJECT</code> will be replaced with your project ID
              </li>
              <li>The port may be different on your local machine</li>
            </ol>
          </li>
          <li>
            Add the query string <code>?text=uppercaseme</code> to the end of
            the function’s URL. It should now look something like:
            <code
              >http://localhost:5001/MY_PROJECT/us-central1/addMessage?text=uppercaseme</code
            >
            <ol type="1">
              <li>
                Optionally, you can change the message “uppercaseme” to a custom
                message
              </li>
            </ol>
          </li>
          <li>
            Create a new message by opening the URL in a new tab in your browser
          </li>
        </ol>
      </li>
      <li>
        <p>View the effects of the functions in the Emulator Suite UI</p>
        <ol type="1">
          <li>
            <p>
              In the “Logs” tab, you should see new logs indicating that the
              functions “addMessage” and “makeUppercase” ran:
            </p>
            <blockquote>
              <p><code>functions: Beginning execution of "addMessage"</code></p>
            </blockquote>
            <blockquote>
              <p>
                <code>functions: Beginning execution of "makeUppercase"</code>
              </p>
            </blockquote>
          </li>
          <li>
            <p>
              In the “Firestore” tab, you should see a document containing your
              original message as well as the uppercased version of your message
              (if it was originally “uppercaseme”, you’ll see “UPPERCASEME”)
            </p>
          </li>
        </ol>
      </li>
    </ol>
    <h2 id="deploy-and-test-on-a-live-firebase-project">
      Deploy and test on a live Firebase project
    </h2>
    <p>To deploy and test the sample:</p>
    <ol type="1">
      <li>
        Create a Firebase project on the
        <a href="https://console.firebase.google.com">Firebase Console</a>
      </li>
      <li>Deploy your project’s code using <code>firebase deploy</code></li>
      <li>
        Create a message by opening the following URL in your browser:
        https://us-central1-[MY_PROJECT].cloudfunctions.net/addMessage?text=uppercaseme
        (Replace [MY_PROJECT] by your project ID and you can change the message
        “uppercaseme”).
      </li>
    </ol>
    <p>
      You should see your text value displayed in the console and uppercase.
    </p>
    <h2 id="contributing">Contributing</h2>
    <p>
      We’d love that you contribute to the project. Before doing so please read
      our <a href="../../CONTRIBUTING.md">Contributor guide</a>.
    </p>
    <h2 id="license">License</h2>
    <p>
      © Google, 2016. Licensed under an
      <a href="../../LICENSE">Apache-2</a> license.
    </p>
  </body>
</html>
